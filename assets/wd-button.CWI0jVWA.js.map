{"version":3,"file":"wd-button.CWI0jVWA.js","sources":["../../../../src/uni_modules/wot-design-uni/components/wd-button/types.ts","../../../../src/uni_modules/wot-design-uni/components/wd-button/wd-button.vue"],"sourcesContent":["/*\n * @Author: weisheng\n * @Date: 2024-03-15 11:36:12\n * @LastEditTime: 2024-11-04 21:33:52\n * @LastEditors: weisheng\n * @Description:\n * @FilePath: \\wot-design-uni\\src\\uni_modules\\wot-design-uni\\components\\wd-button\\types.ts\n * 记得注释\n */\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport { baseProps, makeBooleanProp, makeStringProp } from '../common/props'\n\nexport type ButtonType = 'primary' | 'success' | 'info' | 'warning' | 'error' | 'default' | 'text' | 'icon'\nexport type ButtonSize = 'small' | 'medium' | 'large'\nexport type ButtonLang = 'zh_CN' | 'zh_TW' | 'en'\n\nexport type ButtonOpenType =\n  | 'feedback'\n  | 'share'\n  | 'getUserInfo'\n  | 'contact'\n  | 'getPhoneNumber'\n  | 'launchApp'\n  | 'openSetting'\n  | 'chooseAvatar'\n  | 'getAuthorize'\n  | 'lifestyle'\n  | 'contactShare'\n  | 'openGroupProfile'\n  | 'openGuildProfile'\n  | 'openPublicProfile'\n  | 'shareMessageToFriend'\n  | 'addFriend'\n  | 'addColorSign'\n  | 'addGroupApp'\n  | 'addToFavorites'\n  | 'chooseAddress'\n  | 'chooseInvoiceTitle'\n  | 'login'\n  | 'subscribe'\n  | 'favorite'\n  | 'watchLater'\n  | 'openProfile'\n  | 'agreePrivacyAuthorization'\n\nexport type ButtonScope = 'phoneNumber' | 'userInfo'\n\nexport const buttonProps = {\n  ...baseProps,\n  /**\n   * 幽灵按钮\n   */\n  plain: makeBooleanProp(false),\n  /**\n   * 圆角按钮\n   */\n  round: makeBooleanProp(true),\n  /**\n   * 禁用按钮\n   */\n  disabled: makeBooleanProp(false),\n  /**\n   * 是否细边框\n   */\n  hairline: makeBooleanProp(false),\n  /**\n   * 块状按钮\n   */\n  block: makeBooleanProp(false),\n  /**\n   * 按钮类型，可选值：primary / success / info / warning / error / text / icon\n   */\n  type: makeStringProp<ButtonType>('primary'),\n  /**\n   * 按钮尺寸，可选值：small / medium / large\n   */\n  size: makeStringProp<ButtonSize>('medium'),\n  /**\n   * 图标类名\n   */\n  icon: String,\n  /**\n   * 类名前缀，用于使用自定义图标，用法参考Icon组件\n   */\n  classPrefix: makeStringProp('wd-icon'),\n  /**\n   * 加载中按钮\n   */\n  loading: makeBooleanProp(false),\n  /**\n   * 加载图标颜色\n   */\n  loadingColor: String,\n  /**\n   * 开放能力\n   */\n  openType: String as PropType<ButtonOpenType>,\n  /**\n   * 指定是否阻止本节点的祖先节点出现点击态\n   */\n  hoverStopPropagation: Boolean,\n  /**\n   * 指定返回用户信息的语言，zh_CN 简体中文，zh_TW 繁体中文，en 英文\n   */\n  lang: String as PropType<ButtonLang>,\n  /**\n   * 会话来源，open-type=\"contact\"时有效\n   */\n  sessionFrom: String,\n  /**\n   * 会话内消息卡片标题，open-type=\"contact\"时有效\n   */\n  sendMessageTitle: String,\n  /**\n   * 会话内消息卡片点击跳转小程序路径，open-type=\"contact\"时有效\n   */\n  sendMessagePath: String,\n  /**\n   * 会话内消息卡片图片，open-type=\"contact\"时有效\n   */\n  sendMessageImg: String,\n  /**\n   * 打开 APP 时，向 APP 传递的参数，open-type=launchApp时有效\n   */\n  appParameter: String,\n  /**\n   * 是否显示会话内消息卡片，设置此参数为 true，用户进入客服会话会在右下角显示\"可能要发送的小程序\"提示，用户点击后可以快速发送小程序消息，open-type=\"contact\"时有效\n   */\n  showMessageCard: Boolean,\n  /**\n   * 按钮的唯一标识，可用于设置隐私同意授权按钮的id\n   */\n  buttonId: String,\n  /**\n   * 支付宝小程序，当 open-type 为 getAuthorize 时有效。\n   * 可选值：'phoneNumber' | 'userInfo'\n   */\n  scope: String as PropType<ButtonScope>\n}\n\nexport type ButtonProps = ExtractPropTypes<typeof buttonProps>\n","<template>\n  <button\n    :id=\"buttonId\"\n    :hover-class=\"`${disabled || loading ? '' : 'wd-button--active'}`\"\n    :style=\"customStyle\"\n    :class=\"[\n      'wd-button',\n      'is-' + type,\n      'is-' + size,\n      round ? 'is-round' : '',\n      hairline ? 'is-hairline' : '',\n      plain ? 'is-plain' : '',\n      disabled ? 'is-disabled' : '',\n      block ? 'is-block' : '',\n      loading ? 'is-loading' : '',\n      customClass\n    ]\"\n    :hover-start-time=\"hoverStartTime\"\n    :hover-stay-time=\"hoverStayTime\"\n    :open-type=\"disabled || loading ? undefined : openType\"\n    :send-message-title=\"sendMessageTitle\"\n    :send-message-path=\"sendMessagePath\"\n    :send-message-img=\"sendMessageImg\"\n    :app-parameter=\"appParameter\"\n    :show-message-card=\"showMessageCard\"\n    :session-from=\"sessionFrom\"\n    :lang=\"lang\"\n    :hover-stop-propagation=\"hoverStopPropagation\"\n    :scope=\"scope\"\n    @click=\"handleClick\"\n    @getAuthorize=\"handleGetAuthorize\"\n    @getuserinfo=\"handleGetuserinfo\"\n    @contact=\"handleConcat\"\n    @getphonenumber=\"handleGetphonenumber\"\n    @error=\"handleError\"\n    @launchapp=\"handleLaunchapp\"\n    @opensetting=\"handleOpensetting\"\n    @chooseavatar=\"handleChooseavatar\"\n    @agreeprivacyauthorization=\"handleAgreePrivacyAuthorization\"\n  >\n    <view class=\"wd-button__content\">\n      <view v-if=\"loading\" class=\"wd-button__loading\">\n        <view class=\"wd-button__loading-svg\" :style=\"loadingStyle\"></view>\n      </view>\n      <wd-icon v-else-if=\"icon\" custom-class=\"wd-button__icon\" :name=\"icon\" :classPrefix=\"classPrefix\"></wd-icon>\n      <view class=\"wd-button__text\"><slot /></view>\n    </view>\n  </button>\n</template>\n\n<script lang=\"ts\">\nexport default {\n  name: 'wd-button',\n  options: {\n    addGlobalClass: true,\n    virtualHost: true,\n    styleIsolation: 'shared'\n  }\n}\n</script>\n\n<script lang=\"ts\" setup>\nimport wdIcon from '../wd-icon/wd-icon.vue'\nimport { computed, watch } from 'vue'\nimport { ref } from 'vue'\nimport base64 from '../common/base64'\nimport { buttonProps } from './types'\n\nconst loadingIcon = (color = '#4D80F0', reverse = true) => {\n  return `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 42 42\"><defs><linearGradient x1=\"100%\" y1=\"0%\" x2=\"0%\" y2=\"0%\" id=\"a\"><stop stop-color=\"${\n    reverse ? color : '#fff'\n  }\" offset=\"0%\" stop-opacity=\"0\"/><stop stop-color=\"${\n    reverse ? color : '#fff'\n  }\" offset=\"100%\"/></linearGradient></defs><g fill=\"none\" fill-rule=\"evenodd\"><path d=\"M21 1c11.046 0 20 8.954 20 20s-8.954 20-20 20S1 32.046 1 21 9.954 1 21 1zm0 7C13.82 8 8 13.82 8 21s5.82 13 13 13 13-5.82 13-13S28.18 8 21 8z\" fill=\"${\n    reverse ? '#fff' : color\n  }\"/><path d=\"M4.599 21c0 9.044 7.332 16.376 16.376 16.376 9.045 0 16.376-7.332 16.376-16.376\" stroke=\"url(#a)\" stroke-width=\"3.5\" stroke-linecap=\"round\"/></g></svg>`\n}\nconst props = defineProps(buttonProps)\nconst emit = defineEmits([\n  'click',\n  'getuserinfo',\n  'contact',\n  'getphonenumber',\n  'error',\n  'launchapp',\n  'opensetting',\n  'chooseavatar',\n  'agreeprivacyauthorization'\n])\n\nconst hoverStartTime = ref<number>(20)\nconst hoverStayTime = ref<number>(70)\nconst loadingIconSvg = ref<string>('')\n\nconst loadingStyle = computed(() => {\n  return `background-image: url(${loadingIconSvg.value});`\n})\n\nwatch(\n  () => props.loading,\n  () => {\n    buildLoadingSvg()\n  },\n  { deep: true, immediate: true }\n)\n\nfunction handleClick(event: any) {\n  if (!props.disabled && !props.loading) {\n    emit('click', event)\n  }\n}\n\n/**\n * 支付宝小程序授权\n * @param event\n */\nfunction handleGetAuthorize(event: any) {\n  if (props.scope === 'phoneNumber') {\n    handleGetphonenumber(event)\n  } else if (props.scope === 'userInfo') {\n    handleGetuserinfo(event)\n  }\n}\n\nfunction handleGetuserinfo(event: any) {\n  emit('getuserinfo', event.detail)\n}\n\nfunction handleConcat(event: any) {\n  emit('contact', event.detail)\n}\n\nfunction handleGetphonenumber(event: any) {\n  emit('getphonenumber', event.detail)\n}\n\nfunction handleError(event: any) {\n  emit('error', event.detail)\n}\n\nfunction handleLaunchapp(event: any) {\n  emit('launchapp', event.detail)\n}\n\nfunction handleOpensetting(event: any) {\n  emit('opensetting', event.detail)\n}\n\nfunction handleChooseavatar(event: any) {\n  emit('chooseavatar', event.detail)\n}\n\nfunction handleAgreePrivacyAuthorization(event: any) {\n  emit('agreeprivacyauthorization', event.detail)\n}\nfunction buildLoadingSvg() {\n  const { loadingColor, type, plain } = props\n  let color = loadingColor\n  if (!color) {\n    switch (type) {\n      case 'primary':\n        color = '#4D80F0'\n        break\n      case 'success':\n        color = '#34d19d'\n        break\n      case 'info':\n        color = '#333'\n        break\n      case 'warning':\n        color = '#f0883a'\n        break\n      case 'error':\n        color = '#fa4350'\n        break\n      case 'default':\n        color = '#333'\n        break\n    }\n  }\n\n  const svg = loadingIcon(color, !plain)\n  loadingIconSvg.value = `\"data:image/svg+xml;base64,${base64(svg)}\"`\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import './index.scss';\n</style>\n"],"names":["buttonProps","__spreadProps","baseProps","plain","makeBooleanProp","round","disabled","hairline","block","type","makeStringProp","size","icon","String","classPrefix","loading","loadingColor","openType","hoverStopPropagation","Boolean","lang","sessionFrom","sendMessageTitle","sendMessagePath","sendMessageImg","appParameter","showMessageCard","buttonId","scope","name","options","addGlobalClass","virtualHost","styleIsolation","props","__props","emit","__emit","hoverStartTime","ref","hoverStayTime","loadingIconSvg","loadingStyle","computed","value","handleClick","event","handleGetAuthorize","handleGetphonenumber","handleGetuserinfo","detail","handleConcat","handleError","handleLaunchapp","handleOpensetting","handleChooseavatar","handleAgreePrivacyAuthorization","watch","color","svg","reverse","loadingIcon","base64","buildLoadingSvg","deep","immediate"],"mappings":"8mBA+CO,MAAMA,EAAcC,OACtBC,GADsB,CAKzBC,MAAOC,GAAgB,GAIvBC,MAAOD,GAAgB,GAIvBE,SAAUF,GAAgB,GAI1BG,SAAUH,GAAgB,GAI1BI,MAAOJ,GAAgB,GAIvBK,KAAMC,EAA2B,WAIjCC,KAAMD,EAA2B,UAIjCE,KAAMC,OAINC,YAAaJ,EAAe,WAI5BK,QAASX,GAAgB,GAIzBY,aAAcH,OAIdI,SAAUJ,OAIVK,qBAAsBC,QAItBC,KAAMP,OAINQ,YAAaR,OAIbS,iBAAkBT,OAIlBU,gBAAiBV,OAIjBW,eAAgBX,OAIhBY,aAAcZ,OAIda,gBAAiBP,QAIjBQ,SAAUd,OAKVe,MAAOf,sBCtFM,CACbgB,KAAM,YACNC,QAAS,CACPC,gBAAgB,EAChBC,aAAa,EACbC,eAAgB,6KAYpB,MASMC,EAAQC,EACRC,EAAOC,EAYPC,EAAiBC,EAAY,IAC7BC,EAAgBD,EAAY,IAC5BE,EAAiBF,EAAY,IAE7BG,EAAeC,EAAS,IACrB,yBAAyBF,EAAeG,WAWjD,SAASC,EAAYC,GACdZ,EAAM5B,UAAa4B,EAAMnB,SAC5BqB,EAAK,QAASU,EAChB,CAOF,SAASC,EAAmBD,GACN,gBAAhBZ,EAAMN,MACRoB,EAAqBF,GACI,aAAhBZ,EAAMN,OACfqB,EAAkBH,EACpB,CAGF,SAASG,EAAkBH,GACzBV,EAAK,cAAeU,EAAMI,OAAM,CAGlC,SAASC,EAAaL,GACpBV,EAAK,UAAWU,EAAMI,OAAM,CAG9B,SAASF,EAAqBF,GAC5BV,EAAK,iBAAkBU,EAAMI,OAAM,CAGrC,SAASE,EAAYN,GACnBV,EAAK,QAASU,EAAMI,OAAM,CAG5B,SAASG,EAAgBP,GACvBV,EAAK,YAAaU,EAAMI,OAAM,CAGhC,SAASI,EAAkBR,GACzBV,EAAK,cAAeU,EAAMI,OAAM,CAGlC,SAASK,EAAmBT,GAC1BV,EAAK,eAAgBU,EAAMI,OAAM,CAGnC,SAASM,EAAgCV,GACvCV,EAAK,4BAA6BU,EAAMI,OAAM,QAvDhDO,EACE,IAAMvB,EAAMnB,QACZ,MAuDF,WACE,MAAMC,aAAEA,EAAAP,KAAcA,EAAAN,MAAMA,GAAU+B,EACtC,IAAIwB,EAAQ1C,EACZ,IAAK0C,EACH,OAAQjD,GACN,IAAK,UACHiD,EAAQ,UACR,MACF,IAAK,UACHA,EAAQ,UACR,MACF,IAAK,OASL,IAAK,UACHA,EAAQ,OACR,MARF,IAAK,UACHA,EAAQ,UACR,MACF,IAAK,QACHA,EAAQ,UAQd,MAAMC,EAjHY,EAACD,EAAQ,UAAWE,GAAU,IACzC,gJACLA,EAAUF,EAAQ,2DAElBE,EAAUF,EAAQ,kPAElBE,EAAU,OAASF,uKA2GTG,CAAYH,GAAQvD,GAChCsC,EAAeG,MAAQ,8BAA8BkB,EAAOH,KAAI,CAjF9DI,IAEF,CAAEC,MAAM,EAAMC,WAAW"}