{"version":3,"file":"wd-toast.hw5jrMAu.js","sources":["../../../../src/uni_modules/wot-design-uni/components/wd-toast/index.ts","../../../../src/uni_modules/wot-design-uni/components/wd-loading/types.ts","../../../../src/uni_modules/wot-design-uni/components/wd-loading/wd-loading.vue","../../../../src/uni_modules/wot-design-uni/components/wd-toast/types.ts","../../../../src/uni_modules/wot-design-uni/components/wd-toast/wd-toast.vue"],"sourcesContent":["import { inject, provide, ref } from 'vue'\nimport type { Toast, ToastOptions } from './types'\nimport { deepMerge } from '../common/util'\n\n/**\n * useToast 用到的key\n */\nconst toastDefaultOptionKey = '__TOAST_OPTION__'\n\n// 默认模板\nexport const defaultOptions: ToastOptions = {\n  duration: 2000,\n  show: false\n}\n\nconst None = Symbol('None')\n\nexport function useToast(selector: string = ''): Toast {\n  const toastOptionKey = getToastOptionKey(selector)\n  const toastOption = inject(toastOptionKey, ref<ToastOptions | typeof None>(None)) // toast选项\n  if (toastOption.value === None) {\n    toastOption.value = defaultOptions\n    provide(toastOptionKey, toastOption)\n  }\n  let timer: ReturnType<typeof setTimeout> | null = null\n\n  const createMethod = (toastOptions: ToastOptions) => {\n    return (options: ToastOptions | string) => {\n      return show(deepMerge(toastOptions, typeof options === 'string' ? { msg: options } : options) as ToastOptions)\n    }\n  }\n\n  const show = (option: ToastOptions | string) => {\n    const options = deepMerge(defaultOptions, typeof option === 'string' ? { msg: option } : option) as ToastOptions\n    toastOption.value = deepMerge(options, {\n      show: true\n    }) as ToastOptions\n    // 开始渲染，并在 duration ms之后执行清除\n    timer && clearTimeout(timer)\n    if (toastOption.value.duration && toastOption.value.duration > 0) {\n      timer = setTimeout(() => {\n        timer && clearTimeout(timer)\n        close()\n      }, options.duration)\n    }\n  }\n\n  const loading = createMethod({\n    iconName: 'loading',\n    duration: 0,\n    cover: true\n  })\n  const success = createMethod({\n    iconName: 'success',\n    duration: 1500\n  })\n  const error = createMethod({ iconName: 'error' })\n  const warning = createMethod({ iconName: 'warning' })\n  const info = createMethod({ iconName: 'info' })\n\n  const close = () => {\n    toastOption.value = { show: false }\n  }\n  return {\n    show,\n    loading,\n    success,\n    error,\n    warning,\n    info,\n    close\n  }\n}\n\nexport const getToastOptionKey = (selector: string) => {\n  return selector ? `${toastDefaultOptionKey}${selector}` : toastDefaultOptionKey\n}\n\nexport const toastIcon = {\n  success() {\n    return '<svg width=\"42px\" height=\"42px\" viewBox=\"0 0 42 42\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><title>成功</title><desc>Created with Sketch.</desc><defs><filter x=\"-63.2%\" y=\"-80.0%\" width=\"226.3%\" height=\"260.0%\" filterUnits=\"objectBoundingBox\" id=\"filter-1\"><feOffset dx=\"0\" dy=\"2\" in=\"SourceAlpha\" result=\"shadowOffsetOuter1\"></feOffset><feGaussianBlur stdDeviation=\"2\" in=\"shadowOffsetOuter1\" result=\"shadowBlurOuter1\"></feGaussianBlur><feColorMatrix values=\"0 0 0 0 0.122733141   0 0 0 0 0.710852582   0 0 0 0 0.514812768  0 0 0 1 0\" type=\"matrix\" in=\"shadowBlurOuter1\" result=\"shadowMatrixOuter1\"></feColorMatrix><feMerge><feMergeNode in=\"shadowMatrixOuter1\"></feMergeNode><feMergeNode in=\"SourceGraphic\"></feMergeNode></feMerge></filter><rect id=\"path-2\" x=\"3.4176226\" y=\"5.81442199\" width=\"3\" height=\"8.5\" rx=\"1.5\"></rect><linearGradient x1=\"50%\" y1=\"0.126649064%\" x2=\"50%\" y2=\"100%\" id=\"linearGradient-4\"><stop stop-color=\"#ACFFBD\" stop-opacity=\"0.208123907\" offset=\"0%\"></stop><stop stop-color=\"#10B87C\" offset=\"100%\"></stop></linearGradient></defs><g id=\"规范\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\"><g id=\"反馈-轻提示\" transform=\"translate(-388.000000, -538.000000)\"><g id=\"成功\" transform=\"translate(388.000000, 538.000000)\"><circle id=\"Oval\" fill=\"#34D19D\" opacity=\"0.400000006\" cx=\"21\" cy=\"21\" r=\"20\"></circle><circle id=\"Oval\" fill=\"#34D19D\" cx=\"21\" cy=\"21\" r=\"16\"></circle><g id=\"Group-6\" filter=\"url(#filter-1)\" transform=\"translate(11.500000, 14.000000)\"><mask id=\"mask-3\" fill=\"white\"><use xlink:href=\"#path-2\"></use></mask><use id=\"Rectangle-Copy-24\" fill=\"#C4FFEB\" transform=\"translate(4.917623, 10.064422) rotate(-45.000000) translate(-4.917623, -10.064422) \" xlink:href=\"#path-2\"></use><rect id=\"Rectangle\" fill=\"url(#linearGradient-4)\" mask=\"url(#mask-3)\" transform=\"translate(6.215869, 11.372277) rotate(-45.000000) translate(-6.215869, -11.372277) \" x=\"4.71586891\" y=\"9.52269089\" width=\"3\" height=\"3.69917136\"></rect><rect id=\"Rectangle\" fill=\"#FFFFFF\" transform=\"translate(11.636236, 7.232744) scale(1, -1) rotate(-45.000000) translate(-11.636236, -7.232744) \" x=\"10.1362361\" y=\"-1.02185365\" width=\"3\" height=\"16.5091951\" rx=\"1.5\"></rect></g></g></g></g></svg>'\n  },\n  warning() {\n    return '<svg width=\"42px\" height=\"42px\" viewBox=\"0 0 42 42\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><title>警告</title><desc>Created with Sketch.</desc> <defs> <filter x=\"-240.0%\" y=\"-60.0%\" width=\"580.0%\" height=\"220.0%\" filterUnits=\"objectBoundingBox\" id=\"filter-1\"><feOffset dx=\"0\" dy=\"2\" in=\"SourceAlpha\" result=\"shadowOffsetOuter1\"></feOffset><feGaussianBlur stdDeviation=\"2\" in=\"shadowOffsetOuter1\" result=\"shadowBlurOuter1\"></feGaussianBlur><feColorMatrix values=\"0 0 0 0 0.824756567   0 0 0 0 0.450356612   0 0 0 0 0.168550194  0 0 0 1 0\" type=\"matrix\" in=\"shadowBlurOuter1\" result=\"shadowMatrixOuter1\"></feColorMatrix><feMerge><feMergeNode in=\"shadowMatrixOuter1\"></feMergeNode> <feMergeNode in=\"SourceGraphic\"></feMergeNode></feMerge></filter></defs><g id=\"规范\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\"><g id=\"反馈-轻提示\" transform=\"translate(-580.000000, -538.000000)\"> <g id=\"警告\" transform=\"translate(580.000000, 538.000000)\"><circle id=\"Oval\" fill=\"#F0883A\" opacity=\"0.400000006\" cx=\"21\" cy=\"21\" r=\"20\"></circle><circle id=\"Oval\" fill=\"#F0883A\" cx=\"21\" cy=\"21\" r=\"16\"></circle><g id=\"Group-6\" filter=\"url(#filter-1)\" transform=\"translate(18.500000, 10.800000)\"><rect id=\"Rectangle\" fill=\"#FFFFFF\" transform=\"translate(2.492935, 7.171583) scale(1, -1) rotate(-360.000000) translate(-2.492935, -7.171583) \" x=\"0.992934699\" y=\"0.955464537\" width=\"3\" height=\"12.4322365\" rx=\"1.5\"></rect><rect id=\"Rectangle-Copy-25\" fill=\"#FFDEC5\" transform=\"translate(2.508751, 17.202636) scale(1, -1) rotate(-360.000000) translate(-2.508751, -17.202636) \" x=\"1.00875134\" y=\"15.200563\" width=\"3\" height=\"4.00414639\" rx=\"1.5\"></rect></g></g></g></g></svg>'\n  },\n  info() {\n    return '<svg width=\"42px\" height=\"42px\" viewBox=\"0 0 42 42\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><title>常规</title><desc>Created with Sketch.</desc><defs><filter x=\"-300.0%\" y=\"-57.1%\" width=\"700.0%\" height=\"214.3%\" filterUnits=\"objectBoundingBox\" id=\"filter-1\"><feOffset dx=\"0\" dy=\"2\" in=\"SourceAlpha\" result=\"shadowOffsetOuter1\"></feOffset><feGaussianBlur stdDeviation=\"2\" in=\"shadowOffsetOuter1\" result=\"shadowBlurOuter1\"></feGaussianBlur><feColorMatrix values=\"0 0 0 0 0.362700096   0 0 0 0 0.409035039   0 0 0 0 0.520238904  0 0 0 1 0\" type=\"matrix\" in=\"shadowBlurOuter1\" result=\"shadowMatrixOuter1\"></feColorMatrix><feMerge><feMergeNode in=\"shadowMatrixOuter1\"></feMergeNode><feMergeNode in=\"SourceGraphic\"></feMergeNode></feMerge></filter></defs><g id=\"规范\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\"><g id=\"反馈-轻提示\" transform=\"translate(-772.000000, -538.000000)\"><g id=\"常规\" transform=\"translate(772.000000, 538.000000)\"><circle id=\"Oval\" fill=\"#909CB7\" opacity=\"0.4\" cx=\"21\" cy=\"21\" r=\"20\"></circle><circle id=\"Oval\" fill=\"#909CB7\" cx=\"21\" cy=\"21\" r=\"16\"></circle><g id=\"Group-6\" filter=\"url(#filter-1)\" transform=\"translate(18.500000, 9.800000)\"><g id=\"编组-2\" transform=\"translate(2.492935, 10.204709) rotate(-180.000000) translate(-2.492935, -10.204709) translate(0.992935, 0.204709)\"><rect id=\"Rectangle\" fill=\"#FFFFFF\" transform=\"translate(1.500000, 7.000000) scale(1, -1) rotate(-360.000000) translate(-1.500000, -7.000000) \" x=\"0\" y=\"0\" width=\"3\" height=\"14\" rx=\"1.5\"></rect><rect id=\"Rectangle-Copy-25\" fill=\"#EEEEEE\" transform=\"translate(1.500000, 18.000000) scale(1, -1) rotate(-360.000000) translate(-1.500000, -18.000000) \" x=\"0\" y=\"16\" width=\"3\" height=\"4\" rx=\"1.5\"></rect></g></g></g></g></g></svg>'\n  },\n  error() {\n    return '<svg width=\"42px\" height=\"42px\" viewBox=\"0 0 42 42\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><title>toast</title><desc>Created with Sketch.</desc><defs><linearGradient x1=\"99.6229896%\" y1=\"50.3770104%\" x2=\"0.377010363%\" y2=\"50.3770104%\" id=\"linearGradient-1\"><stop stop-color=\"#FFDFDF\" offset=\"0%\"></stop><stop stop-color=\"#F9BEBE\" offset=\"100%\"></stop></linearGradient><linearGradient x1=\"0.377010363%\" y1=\"50.3770104%\" x2=\"99.6229896%\" y2=\"50.3770104%\" id=\"linearGradient-2\"><stop stop-color=\"#FFDFDF\" offset=\"0%\"></stop><stop stop-color=\"#F9BEBE\" offset=\"100%\"></stop></linearGradient></defs><g id=\"规范\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\"><g id=\"反馈-轻提示\" transform=\"translate(-196.000000, -538.000000)\"> <g id=\"toast\" transform=\"translate(196.000000, 538.000000)\"><circle id=\"Oval\" fill=\"#FA4350\" opacity=\"0.400000006\" cx=\"21\" cy=\"21\" r=\"20\"></circle><circle id=\"Oval\" fill=\"#FA4350\" opacity=\"0.900000036\" cx=\"21\" cy=\"21\" r=\"16\"></circle><rect id=\"矩形\" fill=\"#FFDFDF\" transform=\"translate(21.071068, 21.071068) rotate(-225.000000) translate(-21.071068, -21.071068) \" x=\"12.5710678\" y=\"19.5710678\" width=\"17\" height=\"3\" rx=\"1.5\"></rect><rect id=\"矩形\" fill=\"url(#linearGradient-1)\" transform=\"translate(19.303301, 22.838835) rotate(-225.000000) translate(-19.303301, -22.838835) \" x=\"17.3033009\" y=\"21.3388348\" width=\"4\" height=\"3\"></rect><rect id=\"矩形\" fill=\"url(#linearGradient-2)\" transform=\"translate(22.838835, 19.303301) rotate(-225.000000) translate(-22.838835, -19.303301) \" x=\"20.8388348\" y=\"17.8033009\" width=\"4\" height=\"3\"></rect><rect id=\"矩形\" fill=\"#FFFFFF\" transform=\"translate(21.071068, 21.071068) rotate(-315.000000) translate(-21.071068, -21.071068) \" x=\"12.5710678\" y=\"19.5710678\" width=\"17\" height=\"3\" rx=\"1.5\"></rect></g></g></g></svg>'\n  }\n}\n","/*\n * @Author: weisheng\n * @Date: 2024-03-15 20:40:34\n * @LastEditTime: 2024-07-18 22:09:12\n * @LastEditors: weisheng\n * @Description:\n * @FilePath: /wot-design-uni/src/uni_modules/wot-design-uni/components/wd-loading/types.ts\n * 记得注释\n */\nimport type { ExtractPropTypes } from 'vue'\nimport { baseProps, makeNumericProp, makeStringProp } from '../common/props'\n\nexport type LoadingType = 'outline' | 'ring' // 提示信息加载状态类型\n\nexport const loadingProps = {\n  ...baseProps,\n  /**\n   * 加载指示器类型，可选值：'outline' | 'ring'\n   */\n  type: makeStringProp<LoadingType>('ring'),\n  /**\n   * 设置加载指示器颜色\n   */\n  color: makeStringProp('#4D80F0'),\n  /**\n   * 设置加载指示器大小\n   */\n  size: makeNumericProp('')\n}\n\nexport type LoadingProps = ExtractPropTypes<typeof loadingProps>\n","<template>\n  <view :class=\"`wd-loading ${props.customClass}`\" :style=\"rootStyle\">\n    <view class=\"wd-loading__body\">\n      <view class=\"wd-loading__svg\" :style=\"`background-image: url(${svg});`\"></view>\n    </view>\n  </view>\n</template>\n<script lang=\"ts\">\nexport default {\n  name: 'wd-loading',\n  options: {\n    virtualHost: true,\n    addGlobalClass: true,\n    styleIsolation: 'shared'\n  }\n}\n</script>\n\n<script lang=\"ts\" setup>\nimport { computed, onBeforeMount, ref, watch, type CSSProperties } from 'vue'\nimport base64 from '../common/base64'\nimport { gradient, context, objToStyle, addUnit, isDef } from '../common/util'\nimport { loadingProps } from './types'\n\nconst svgDefineId = context.id++\nconst svgDefineId1 = context.id++\nconst svgDefineId2 = context.id++\n\nconst icon = {\n  outline(color = '#4D80F0') {\n    return `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 42 42\"><defs><linearGradient x1=\"100%\" y1=\"0%\" x2=\"0%\" y2=\"0%\" id=\"${svgDefineId}\"><stop stop-color=\"#FFF\" offset=\"0%\" stop-opacity=\"0\"/><stop stop-color=\"#FFF\" offset=\"100%\"/></linearGradient></defs><g fill=\"none\" fill-rule=\"evenodd\"><path d=\"M21 1c11.046 0 20 8.954 20 20s-8.954 20-20 20S1 32.046 1 21 9.954 1 21 1zm0 7C13.82 8 8 13.82 8 21s5.82 13 13 13 13-5.82 13-13S28.18 8 21 8z\" fill=\"${color}\"/><path d=\"M4.599 21c0 9.044 7.332 16.376 16.376 16.376 9.045 0 16.376-7.332 16.376-16.376\" stroke=\"url(#${svgDefineId}) \" stroke-width=\"3.5\" stroke-linecap=\"round\"/></g></svg>`\n  },\n  ring(color = '#4D80F0', intermediateColor = '#a6bff7') {\n    return `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 200 200\"><linearGradient id=\"${svgDefineId1}\" gradientUnits=\"userSpaceOnUse\" x1=\"50\" x2=\"50\" y2=\"180\"><stop offset=\"0\" stop-color=\"${color}\"></stop> <stop offset=\"1\" stop-color=\"${intermediateColor}\"></stop></linearGradient> <path fill=\"url(#${svgDefineId1})\" d=\"M20 100c0-44.1 35.9-80 80-80V0C44.8 0 0 44.8 0 100s44.8 100 100 100v-20c-44.1 0-80-35.9-80-80z\"></path> <linearGradient id=\"${svgDefineId2}\" gradientUnits=\"userSpaceOnUse\" x1=\"150\" y1=\"20\" x2=\"150\" y2=\"180\"><stop offset=\"0\" stop-color=\"#fff\" stop-opacity=\"0\"></stop> <stop offset=\"1\" stop-color=\"${intermediateColor}\"></stop></linearGradient> <path fill=\"url(#${svgDefineId2})\" d=\"M100 0v20c44.1 0 80 35.9 80 80s-35.9 80-80 80v20c55.2 0 100-44.8 100-100S155.2 0 100 0z\"></path> <circle cx=\"100\" cy=\"10\" r=\"10\" fill=\"${color}\"></circle></svg>`\n  }\n}\n\nconst props = defineProps(loadingProps)\n\nconst svg = ref<string>('')\nconst intermediateColor = ref<string>('')\nconst iconSize = ref<string | number | null>(null)\n\nwatch(\n  () => props.size,\n  (newVal) => {\n    iconSize.value = addUnit(newVal)\n  },\n  {\n    deep: true,\n    immediate: true\n  }\n)\n\nwatch(\n  () => props.type,\n  () => {\n    buildSvg()\n  },\n  {\n    deep: true,\n    immediate: true\n  }\n)\n\nconst rootStyle = computed(() => {\n  const style: CSSProperties = {}\n  if (isDef(iconSize.value)) {\n    style.height = addUnit(iconSize.value)\n    style.width = addUnit(iconSize.value)\n  }\n  return `${objToStyle(style)} ${props.customStyle}`\n})\n\nonBeforeMount(() => {\n  intermediateColor.value = gradient(props.color, '#ffffff', 2)[1]\n  buildSvg()\n})\n\nfunction buildSvg() {\n  const { type, color } = props\n  let ringType: 'outline' | 'ring' = isDef(type) ? type : 'ring'\n  const svgStr = `\"data:image/svg+xml;base64,${base64(ringType === 'ring' ? icon[ringType](color, intermediateColor.value) : icon[ringType](color))}\"`\n  svg.value = svgStr\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import './index.scss';\n</style>\n","/*\n * @Author: weisheng\n * @Date: 2023-06-19 12:47:57\n * @LastEditTime: 2025-02-16 15:52:17\n * @LastEditors: weisheng\n * @Description:\n * @FilePath: /wot-design-uni/src/uni_modules/wot-design-uni/components/wd-toast/types.ts\n * 记得注释\n */\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport { baseProps, makeStringProp } from '../common/props'\nimport type { LoadingType } from '../wd-loading/types'\n\nexport type ToastIconType = 'success' | 'error' | 'warning' | 'loading' | 'info' // 图标类型\n\nexport type ToastPositionType = 'top' | 'middle-top' | 'middle' | 'bottom' // 提示信息框的位置类型\n\nexport type ToastDirection = 'vertical' | 'horizontal' // 提示信息框的排列方向\n\nexport type ToastLoadingType = LoadingType // 提示信息加载状态类型\n\nexport type ToastOptions = {\n  msg?: string\n  duration?: number\n  direction?: ToastDirection\n  iconName?: ToastIconType\n  iconSize?: number\n  loadingType?: ToastLoadingType\n  loadingColor?: string\n  loadingSize?: number\n  iconColor?: string\n  position?: ToastPositionType\n  show?: boolean\n  zIndex?: number\n  /**\n   * 是否存在遮罩层\n   */\n  cover?: boolean\n  /**\n   * 图标类名\n   */\n  iconClass?: string\n  /**\n   * 类名前缀，用于使用自定义图标\n   */\n  classPrefix?: string\n  /**\n   * 完全展示后的回调函数\n   */\n  opened?: () => void\n  /**\n   * 完全关闭时的回调函数\n   */\n  closed?: () => void\n}\n\nexport interface Toast {\n  // 打开Toast\n  show(toastOptions: ToastOptions | string): void\n  // 成功提示\n  success(toastOptions: ToastOptions | string): void\n  // 关闭提示\n  error(toastOptions: ToastOptions | string): void\n  // 常规提示\n  info(toastOptions: ToastOptions | string): void\n  // 警告提示\n  warning(toastOptions: ToastOptions | string): void\n  // 加载提示\n  loading(toastOptions: ToastOptions | string): void\n  // 关闭Toast\n  close(): void\n}\n\nexport const toastProps = {\n  ...baseProps,\n  /**\n   * 选择器\n   * @type {string}\n   * @default ''\n   */\n  selector: makeStringProp(''),\n  /**\n   * 提示信息\n   * @type {string}\n   * @default ''\n   */\n  msg: {\n    type: String,\n    default: ''\n  },\n  /**\n   * 排列方向\n   * @type {'vertical' | 'horizontal'}\n   * @default 'horizontal'\n   */\n  direction: makeStringProp<ToastDirection>('horizontal'),\n  /**\n   * 图标名称\n   * @type {'success' | 'error' | 'warning' | 'loading' | 'info'}\n   * @default ''\n   */\n  iconName: {\n    type: String as PropType<ToastIconType>,\n    default: ''\n  },\n  /**\n   * 图标大小\n   * @type {number}\n   */\n  iconSize: Number,\n  /**\n   * 加载类型\n   * @type {'outline' | 'ring'}\n   * @default 'outline'\n   */\n  loadingType: makeStringProp<ToastLoadingType>('outline'),\n  /**\n   * 加载颜色\n   * @type {string}\n   * @default '#4D80F0'\n   */\n  loadingColor: {\n    type: String,\n    default: '#4D80F0'\n  },\n  /**\n   * 加载大小\n   * @type {number}\n   */\n  loadingSize: Number,\n  /**\n   * 图标颜色\n   * @type {string}\n   */\n  iconColor: String,\n  /**\n   * 位置\n   * @type {'top' | 'middle-top' | 'middle' | 'bottom'}\n   * @default 'middle-top'\n   */\n  position: makeStringProp<ToastPositionType>('middle-top'),\n  /**\n   * 层级\n   * @type {number}\n   * @default 100\n   */\n  zIndex: {\n    type: Number,\n    default: 100\n  },\n  /**\n   * 是否存在遮罩层\n   * @type {boolean}\n   * @default false\n   */\n  cover: {\n    type: Boolean,\n    default: false\n  },\n  /**\n   * 图标类名\n   * @type {string}\n   * @default ''\n   */\n  iconClass: {\n    type: String,\n    default: ''\n  },\n  /**\n   * 类名前缀\n   * @type {string}\n   * @default 'wd-icon'\n   */\n  classPrefix: {\n    type: String,\n    default: 'wd-icon'\n  },\n  /**\n   * 完全展示后的回调函数\n   * @type {Function}\n   */\n  opened: Function as PropType<() => void>,\n  /**\n   * 完全关闭时的回调函数\n   * @type {Function}\n   */\n  closed: Function as PropType<() => void>\n}\n\nexport type ToastProps = ExtractPropTypes<typeof toastProps>\n","<template>\n  <wd-overlay v-if=\"cover\" :z-index=\"zIndex\" lock-scroll :show=\"show\" custom-style=\"background-color: transparent;pointer-events: auto;\"></wd-overlay>\n  <wd-transition name=\"fade\" :show=\"show\" :custom-style=\"transitionStyle\" @after-enter=\"handleAfterEnter\" @after-leave=\"handleAfterLeave\">\n    <view :class=\"rootClass\">\n      <!--iconName优先级更高-->\n      <wd-loading\n        v-if=\"iconName === 'loading'\"\n        :type=\"loadingType\"\n        :color=\"loadingColor\"\n        :size=\"loadingSize\"\n        :custom-class=\"`wd-toast__icon ${direction === 'vertical' ? 'is-vertical' : ''}`\"\n      />\n      <view\n        :class=\"`wd-toast__iconWrap wd-toast__icon ${direction === 'vertical' ? 'is-vertical' : ''}`\"\n        v-else-if=\"iconName === 'success' || iconName === 'warning' || iconName === 'info' || iconName === 'error'\"\n      >\n        <view class=\"wd-toast__iconBox\">\n          <view class=\"wd-toast__iconSvg\" :style=\"svgStyle\"></view>\n        </view>\n      </view>\n      <wd-icon\n        v-else-if=\"iconClass\"\n        :custom-class=\"`wd-toast__icon ${direction === 'vertical' ? 'is-vertical' : ''}`\"\n        :size=\"iconSize\"\n        :class-prefix=\"classPrefix\"\n        :name=\"iconClass\"\n      ></wd-icon>\n      <!--文本-->\n      <view v-if=\"msg\" class=\"wd-toast__msg\">{{ msg }}</view>\n    </view>\n  </wd-transition>\n</template>\n\n<script lang=\"ts\">\nexport default {\n  name: 'wd-toast',\n  options: {\n    addGlobalClass: true,\n    virtualHost: true,\n    styleIsolation: 'shared'\n  }\n}\n</script>\n\n<script lang=\"ts\" setup>\nimport wdIcon from '../wd-icon/wd-icon.vue'\nimport wdLoading from '../wd-loading/wd-loading.vue'\nimport wdOverlay from '../wd-overlay/wd-overlay.vue'\nimport wdTransition from '../wd-transition/wd-transition.vue'\n\nimport { computed, inject, onBeforeMount, ref, watch, type CSSProperties } from 'vue'\nimport base64 from '../common/base64'\nimport { defaultOptions, getToastOptionKey, toastIcon } from '.'\nimport { toastProps, type ToastDirection, type ToastLoadingType, type ToastOptions, type ToastProps } from './types'\nimport { addUnit, isDef, isFunction, objToStyle } from '../common/util'\n\nconst props = defineProps(toastProps)\nconst iconName = ref<string>('') // 图标类型\nconst msg = ref<string>('') // 消息内容\nconst position = ref<string>('middle')\nconst show = ref<boolean>(false)\nconst zIndex = ref<number>(100)\nconst loadingType = ref<ToastLoadingType>('outline')\nconst loadingColor = ref<string>('#4D80F0')\nconst iconSize = ref<string>() // 图标大小\nconst loadingSize = ref<string>() // loading大小\nconst svgStr = ref<string>('') // 图标\nconst cover = ref<boolean>(false) // 是否存在遮罩层\nconst classPrefix = ref<string>('wd-icon') // 图标前缀\nconst iconClass = ref<string>('') // 图标类名\nconst direction = ref<ToastDirection>('horizontal') // toast布局方向\n\nlet opened: (() => void) | null = null\n\nlet closed: (() => void) | null = null\n\nconst toastOptionKey = getToastOptionKey(props.selector)\nconst toastOption = inject(toastOptionKey, ref<ToastOptions>(defaultOptions)) // toast选项\n\n// 监听options变化展示\nwatch(\n  () => toastOption.value,\n  (newVal: ToastOptions) => {\n    reset(newVal)\n  },\n  {\n    deep: true,\n    immediate: true\n  }\n)\n\n// 监听options变化展示\nwatch(\n  () => iconName.value,\n  () => {\n    buildSvg()\n  },\n  {\n    deep: true,\n    immediate: true\n  }\n)\n\n/**\n * 动画自定义样式\n */\nconst transitionStyle = computed(() => {\n  const style: CSSProperties = {\n    'z-index': zIndex.value,\n    position: 'fixed',\n    top: '50%',\n    left: 0,\n    width: '100%',\n    transform: 'translate(0, -50%)',\n    'text-align': 'center',\n    'pointer-events': 'none'\n  }\n  return objToStyle(style)\n})\n\nconst rootClass = computed(() => {\n  return `wd-toast ${props.customClass} wd-toast--${position.value} ${\n    (iconName.value !== 'loading' || msg.value) && (iconName.value || iconClass.value) ? 'wd-toast--with-icon' : ''\n  } ${iconName.value === 'loading' && !msg.value ? 'wd-toast--loading' : ''} ${direction.value === 'vertical' ? 'is-vertical' : ''}`\n})\n\nconst svgStyle = computed(() => {\n  const style: CSSProperties = {\n    backgroundImage: `url(${svgStr.value})`\n  }\n  if (isDef(iconSize.value)) {\n    style.width = iconSize.value\n    style.height = iconSize.value\n  }\n  return objToStyle(style)\n})\n\nonBeforeMount(() => {\n  buildSvg()\n})\n\nfunction handleAfterEnter() {\n  if (isFunction(opened)) {\n    opened()\n  }\n}\n\nfunction handleAfterLeave() {\n  if (isFunction(closed)) {\n    closed()\n  }\n}\n\nfunction buildSvg() {\n  if (iconName.value !== 'success' && iconName.value !== 'warning' && iconName.value !== 'info' && iconName.value !== 'error') return\n  const iconSvg = toastIcon[iconName.value]()\n  const iconSvgStr = `\"data:image/svg+xml;base64,${base64(iconSvg)}\"`\n  svgStr.value = iconSvgStr\n}\n\n/**\n * 重置toast选项值\n * @param option toast选项值\n */\nfunction reset(option: ToastOptions) {\n  show.value = isDef(option.show) ? option.show : false\n\n  if (show.value) {\n    mergeOptionsWithProps(option, props)\n  }\n}\n\nfunction mergeOptionsWithProps(option: ToastOptions, props: ToastProps) {\n  iconName.value = isDef(option.iconName!) ? option.iconName! : props.iconName\n  iconClass.value = isDef(option.iconClass!) ? option.iconClass! : props.iconClass\n  msg.value = isDef(option.msg!) ? option.msg! : props.msg\n  position.value = isDef(option.position!) ? option.position! : props.position\n  zIndex.value = isDef(option.zIndex!) ? option.zIndex! : props.zIndex\n  loadingType.value = isDef(option.loadingType!) ? option.loadingType! : props.loadingType\n  loadingColor.value = isDef(option.loadingColor!) ? option.loadingColor! : props.loadingColor\n  iconSize.value = isDef(option.iconSize) ? addUnit(option.iconSize) : isDef(props.iconSize) ? addUnit(props.iconSize) : undefined\n  loadingSize.value = isDef(option.loadingSize) ? addUnit(option.loadingSize) : isDef(props.loadingSize) ? addUnit(props.loadingSize) : undefined\n  cover.value = isDef(option.cover!) ? option.cover! : props.cover\n  classPrefix.value = isDef(option.classPrefix) ? option.classPrefix : props.classPrefix\n  direction.value = isDef(option.direction) ? option.direction : props.direction\n  closed = isFunction(option.closed) ? option.closed : isFunction(props.closed) ? props.closed : null\n  opened = isFunction(option.opened) ? option.opened : isFunction(props.opened) ? props.opened : null\n}\n</script>\n<style lang=\"scss\" scoped>\n@import './index.scss';\n</style>\n"],"names":["toastDefaultOptionKey","defaultOptions","duration","show","None","Symbol","useToast","selector","toastOptionKey","getToastOptionKey","toastOption","inject","ref","value","provide","timer","createMethod","toastOptions","options","deepMerge","msg","option","clearTimeout","setTimeout","close","loading","iconName","cover","success","error","warning","info","toastIcon","loadingProps","__spreadProps","baseProps","type","makeStringProp","color","size","makeNumericProp","name","virtualHost","addGlobalClass","styleIsolation","svgDefineId","context","id","svgDefineId1","svgDefineId2","icon","outline","ring","intermediateColor","props","__props","svg","iconSize","watch","newVal","addUnit","deep","immediate","buildSvg","rootStyle","computed","style","isDef","height","width","objToStyle","customStyle","ringType","svgStr","base64","onBeforeMount","gradient","toastProps","String","default","direction","Number","loadingType","loadingColor","loadingSize","iconColor","position","zIndex","Boolean","iconClass","classPrefix","opened","Function","closed","isFunction","mergeOptionsWithProps","transitionStyle","top","left","transform","rootClass","customClass","svgStyle","backgroundImage","handleAfterEnter","handleAfterLeave","iconSvg","iconSvgStr"],"mappings":"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"}