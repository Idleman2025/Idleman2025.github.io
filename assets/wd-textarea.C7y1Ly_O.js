var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,r=(a,l,s)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[l]=s,i=(e,a)=>{for(var l in a||(a={}))t.call(a,l)&&r(e,l,a[l]);if(s)for(var l of s(a))o.call(a,l)&&r(e,l,a[l]);return e},n=(e,s)=>a(e,l(s)),u=(e,a,l)=>new Promise((s,t)=>{var o=e=>{try{i(l.next(e))}catch(a){t(a)}},r=e=>{try{i(l.throw(e))}catch(a){t(a)}},i=e=>e.done?s(e.value):Promise.resolve(e.value).then(o,r);i((l=l.apply(e,a)).next())});import{J as d,c,o as p,w as f,R as m,d as h,i as v,a3 as y,f as g,g as b,x as _,S as x,D as w,_ as C,G as $,H as k,aB as S,E as j,am as P,I as O,aK as I,q as T,a0 as V,r as W,O as E,N as H,a2 as B,C as L,aG as q,e as D,aD as K,as as F}from"./index-1PzZjqPQ.js";import{u as G}from"./useChildren.SCs81q4I.js";import{c as M,C as z,u as A}from"./useCell.CJ0j4X-N.js";import{F as N}from"./types.BfJKOtH_.js";import{u as J}from"./useParent.BAmnY2_h.js";import{u as R}from"./useTranslate.rB0KP7BQ.js";const U=C(d(n(i({},{name:"wd-cell-group",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"}}),{props:M,setup(e){const a=e,{linkChildren:l}=G(z);return l({props:a}),(e,a)=>{const l=g,s=v;return p(),c(s,{class:w(["wd-cell-group",e.border?"is-border":"",e.customClass]),style:x(e.customStyle)},{default:f(()=>[e.title||e.value||e.useSlot?(p(),c(s,{key:0,class:"wd-cell-group__title"},{default:f(()=>[h(s,{class:"wd-cell-group__left"},{default:f(()=>[e.$slots.title?y(e.$slots,"title",{key:1},void 0,!0):(p(),c(l,{key:0},{default:f(()=>[b(_(e.title),1)]),_:1}))]),_:3}),h(s,{class:"wd-cell-group__right"},{default:f(()=>[e.$slots.value?y(e.$slots,"value",{key:1},void 0,!0):(p(),c(l,{key:0},{default:f(()=>[b(_(e.value),1)]),_:1}))]),_:3})]),_:3})):m("",!0),h(s,{class:"wd-cell-group__body"},{default:f(()=>[y(e.$slots,"default",{},void 0,!0)]),_:3})]),_:3},8,["class","style"])}}})),[["__scopeId","data-v-10cab378"]]),Q=n(i({},O),{customTextareaContainerClass:$(""),customTextareaClass:$(""),customLabelClass:$(""),modelValue:P(""),placeholder:String,placeholderStyle:String,placeholderClass:$(""),disabled:k(!1),maxlength:j(-1),autoFocus:k(!1),focus:k(!1),autoHeight:k(!1),fixed:k(!1),cursorSpacing:j(0),cursor:j(-1),confirmType:String,confirmHold:k(!1),showConfirmBar:k(!0),selectionStart:j(-1),selectionEnd:j(-1),adjustPosition:k(!0),disableDefaultPadding:k(!1),holdKeyboard:k(!1),showPassword:k(!1),clearable:k(!1),readonly:k(!1),prefixIcon:String,showWordLimit:k(!1),label:String,labelWidth:$(""),size:String,error:k(!1),center:k(!1),noBorder:k(!1),required:k(!1),prop:$(""),rules:S(),clearTrigger:$("always"),focusWhenClear:k(!0),ignoreCompositionEvent:k(!0),inputmode:$("text")}),X=C(d(n(i({},{name:"wd-textarea",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),{props:Q,emits:["update:modelValue","clear","blur","focus","input","keyboardheightchange","confirm","linechange","clickprefixicon","click"],setup(e,{emit:a}){const{translate:l}=R("textarea"),s=e,t=a,o=I(),r=T(()=>V(s.placeholder)?s.placeholder:l("placeholder")),i=W(!1),n=W(!1),d=W(!1),C=W(""),$=A();E(()=>s.focus,e=>{n.value=e},{immediate:!0,deep:!0}),E(()=>s.modelValue,e=>{C.value=V(e)?String(e):""},{immediate:!0,deep:!0});const{parent:k}=J(N),S=T(()=>{const{disabled:e,readonly:a,clearable:l,clearTrigger:t}=s;return!(!l||a||e||!C.value||!("always"===t||"focus"===s.clearTrigger&&d.value))}),j=T(()=>{const{disabled:e,readonly:a,maxlength:l,showWordLimit:t}=s;return Boolean(!e&&!a&&V(l)&&l>-1&&t)}),P=T(()=>k&&s.prop&&k.errorMessages&&k.errorMessages[s.prop]?k.errorMessages[s.prop]:""),O=T(()=>{let e=!1;if(k&&k.props.rules){const a=k.props.rules;for(const l in a)Object.prototype.hasOwnProperty.call(a,l)&&l===s.prop&&Array.isArray(a[l])&&(e=a[l].some(e=>e.required))}return s.required||s.rules.some(e=>e.required)||e}),G=T(()=>Array.from(String(Y(s.modelValue))).length),M=T(()=>`wd-textarea   ${s.label||o.label?"is-cell":""} ${s.center?"is-center":""} ${$.border.value?"is-border":""} ${s.size?"is-"+s.size:""} ${s.error?"is-error":""} ${s.disabled?"is-disabled":""} ${s.autoHeight?"is-auto-height":""} ${G.value>0?"is-not-empty":""}  ${s.noBorder?"is-no-border":""} ${s.customClass}`),z=T(()=>`wd-textarea__label ${s.customLabelClass} ${O.value?"is-required":""}`),U=T(()=>`wd-textarea__placeholder  ${s.placeholderClass}`),Q=T(()=>`${G.value>0?"wd-textarea__count-current":""} ${G.value>s.maxlength?"is-error":""}`),X=T(()=>s.labelWidth?H({"min-width":s.labelWidth,"max-width":s.labelWidth}):"");function Y(e){if(null==e)return"";const{maxlength:a,showWordLimit:l}=s;return l&&-1!==a&&String(e).length>a?e.toString().substring(0,a):`${e}`}function Z(){return u(this,null,function*(){d.value=!1,C.value="",s.focusWhenClear&&(i.value=!0,n.value=!1),yield F(),s.focusWhenClear&&(n.value=!0,d.value=!0),t("update:modelValue",C.value),t("clear")})}function ee(e){return u(this,arguments,function*({detail:e}){yield F(150),i.value?i.value=!1:(d.value=!1,t("blur",{value:C.value,cursor:e.cursor?e.cursor:null}))})}function ae({detail:e}){d.value=!0,t("focus",e)}function le({detail:e}){C.value=Y(C.value),t("update:modelValue",C.value),t("input",e)}function se({detail:e}){t("keyboardheightchange",e)}function te({detail:e}){t("confirm",e)}function oe({detail:e}){t("linechange",e)}function re(){t("clickprefixicon")}return B(()=>{C.value=Y(C.value),t("update:modelValue",C.value)}),(e,a)=>{const l=v,t=g,o=q;return p(),c(l,{class:w(M.value),style:x(e.customStyle)},{default:f(()=>[e.label||e.$slots.label?(p(),c(l,{key:0,class:w(z.value),style:x(X.value)},{default:f(()=>[e.prefixIcon||e.$slots.prefix?(p(),c(l,{key:0,class:"wd-textarea__prefix"},{default:f(()=>[e.prefixIcon&&!e.$slots.prefix?(p(),c(L,{key:0,"custom-class":"wd-textarea__icon",name:e.prefixIcon,onClick:re},null,8,["name"])):y(e.$slots,"prefix",{key:1},void 0,!0)]),_:3})):m("",!0),h(l,{class:"wd-textarea__label-inner"},{default:f(()=>[e.label&&!e.$slots.label?(p(),c(t,{key:0},{default:f(()=>[b(_(e.label),1)]),_:1})):y(e.$slots,"label",{key:1},void 0,!0)]),_:3})]),_:3},8,["class","style"])):m("",!0),h(l,{class:w(`wd-textarea__value ${S.value?"is-suffix":""} ${e.customTextareaContainerClass} ${j.value?"is-show-limit":""}`)},{default:f(()=>[h(o,{class:w(`wd-textarea__inner ${e.customTextareaClass}`),modelValue:C.value,"onUpdate:modelValue":a[0]||(a[0]=e=>C.value=e),"show-count":!1,placeholder:r.value,disabled:e.disabled||("readonly"in e?e.readonly:D(K)),maxlength:e.maxlength,focus:n.value,"auto-focus":e.autoFocus,"placeholder-style":e.placeholderStyle,"placeholder-class":U.value,"auto-height":e.autoHeight,"cursor-spacing":e.cursorSpacing,fixed:e.fixed,cursor:e.cursor,"show-confirm-bar":e.showConfirmBar,"selection-start":e.selectionStart,"selection-end":e.selectionEnd,"adjust-position":e.adjustPosition,"hold-keyboard":e.holdKeyboard,"confirm-type":e.confirmType,"confirm-hold":e.confirmHold,"disable-default-padding":e.disableDefaultPadding,ignoreCompositionEvent:e.ignoreCompositionEvent,inputmode:e.inputmode,onInput:le,onFocus:ae,onBlur:ee,onConfirm:te,onLinechange:oe,onKeyboardheightchange:se},null,8,["class","modelValue","placeholder","disabled","maxlength","focus","auto-focus","placeholder-style","placeholder-class","auto-height","cursor-spacing","fixed","cursor","show-confirm-bar","selection-start","selection-end","adjust-position","hold-keyboard","confirm-type","confirm-hold","disable-default-padding","ignoreCompositionEvent","inputmode"]),P.value?(p(),c(l,{key:0,class:"wd-textarea__error-message"},{default:f(()=>[b(_(P.value),1)]),_:1})):m("",!0),s.readonly?(p(),c(l,{key:1,class:"wd-textarea__readonly-mask"})):m("",!0),h(l,{class:"wd-textarea__suffix"},{default:f(()=>[S.value?(p(),c(L,{key:0,"custom-class":"wd-textarea__clear",name:"error-fill",onClick:Z})):m("",!0),j.value?(p(),c(l,{key:1,class:"wd-textarea__count"},{default:f(()=>[h(t,{class:w(Q.value)},{default:f(()=>[b(_(G.value),1)]),_:1},8,["class"]),b(" /"+_(e.maxlength),1)]),_:1})):m("",!0)]),_:1})]),_:1},8,["class"])]),_:3},8,["class","style"])}}})),[["__scopeId","data-v-4c316e84"]]);export{U as _,X as a};
//# sourceMappingURL=wd-textarea.C7y1Ly_O.js.map
