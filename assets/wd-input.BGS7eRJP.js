var e=Object.defineProperty,l=Object.defineProperties,a=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,t=(l,a,s)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[a]=s,n=(e,l)=>{for(var a in l||(l={}))o.call(l,a)&&t(e,a,l[a]);if(s)for(var a of s(l))r.call(l,a)&&t(e,a,l[a]);return e},i=(e,s)=>l(e,a(s)),u=(e,l,a)=>new Promise((s,o)=>{var r=e=>{try{n(a.next(e))}catch(l){o(l)}},t=e=>{try{n(a.throw(e))}catch(l){o(l)}},n=e=>e.done?s(e.value):Promise.resolve(e.value).then(r,t);n((a=a.apply(e,l)).next())});import{G as c,H as d,aB as p,am as f,E as m,I as y,J as h,aK as v,r as g,O as b,q as _,a0 as w,N as x,U as k,c as S,o as C,w as $,R as I,d as j,i as P,S as O,D as V,a3 as E,C as W,v as q,F as T,g as B,x as K,ay as L,e as H,aD as M,f as z,as as D,_ as F}from"./index-CaBmDrrg.js";import{u as N}from"./useCell.jsEGvsUz.js";import{F as R}from"./types.B3aYX4lf.js";import{u as A}from"./useParent.zc7AofC8.js";import{u as G}from"./useTranslate.CMWidIsD.js";const U=i(n({},y),{customInputClass:c(""),customLabelClass:c(""),placeholder:String,placeholderStyle:String,placeholderClass:c(""),cursorSpacing:m(0),cursor:m(-1),selectionStart:m(-1),selectionEnd:m(-1),adjustPosition:d(!0),holdKeyboard:d(!1),confirmType:c("done"),confirmHold:d(!1),focus:d(!1),type:c("text"),maxlength:{type:Number,default:-1},disabled:d(!1),alwaysEmbed:d(!1),alignRight:d(!1),modelValue:f(""),showPassword:d(!1),clearable:d(!1),readonly:d(!1),prefixIcon:String,suffixIcon:String,showWordLimit:d(!1),label:String,labelWidth:c(""),size:String,error:d(!1),center:d(!1),noBorder:d(!1),required:d(!1),prop:String,rules:p(),clearTrigger:c("always"),focusWhenClear:d(!0),ignoreCompositionEvent:d(!0),inputmode:c("text")}),J=F(h(i(n({},{name:"wd-input",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),{props:U,emits:["update:modelValue","clear","blur","focus","input","keyboardheightchange","confirm","clicksuffixicon","clickprefixicon","click"],setup(e,{emit:l}){const a=e,s=l,o=v(),{translate:r}=G("input"),t=g(!1),n=g(!1),i=g(!1),c=g(!1),d=g(function(){const e=function(e){const{maxlength:l}=a;if(w(l)&&-1!==l&&String(e).length>l)return e.toString().slice(0,l);return e}(a.modelValue);l=e,o=a.modelValue,k(String(l),String(o))||s("update:modelValue",e);var l,o;return e}()),p=N();b(()=>a.focus,e=>{i.value=e},{immediate:!0,deep:!0}),b(()=>a.modelValue,e=>{d.value=w(e)?String(e):""});const{parent:f}=A(R),m=_(()=>w(a.placeholder)?a.placeholder:r("placeholder")),y=_(()=>{const{disabled:e,readonly:l,clearable:s,clearTrigger:o}=a;return!(!s||l||e||!d.value||!("always"===o||"focus"===a.clearTrigger&&c.value))}),h=_(()=>{const{disabled:e,readonly:l,maxlength:s,showWordLimit:o}=a;return Boolean(!e&&!l&&w(s)&&s>-1&&o)}),F=_(()=>f&&a.prop&&f.errorMessages&&f.errorMessages[a.prop]?f.errorMessages[a.prop]:""),U=_(()=>{let e=!1;if(f&&f.props.rules){const l=f.props.rules;for(const s in l)Object.prototype.hasOwnProperty.call(l,s)&&s===a.prop&&Array.isArray(l[s])&&(e=l[s].some(e=>e.required))}return a.required||a.rules.some(e=>e.required)||e}),J=_(()=>`wd-input  ${a.label||o.label?"is-cell":""} ${a.center?"is-center":""} ${p.border.value?"is-border":""} ${a.size?"is-"+a.size:""} ${a.error?"is-error":""} ${a.disabled?"is-disabled":""}  ${d.value&&String(d.value).length>0?"is-not-empty":""}  ${a.noBorder?"is-no-border":""} ${a.customClass}`),Q=_(()=>`wd-input__label ${a.customLabelClass} ${U.value?"is-required":""}`),X=_(()=>`wd-input__placeholder  ${a.placeholderClass}`),Y=_(()=>a.labelWidth?x({"min-width":a.labelWidth,"max-width":a.labelWidth}):"");function Z(){t.value=!t.value}function ee(){return u(this,null,function*(){c.value=!1,d.value="",a.focusWhenClear&&(n.value=!0,i.value=!1),yield D(),a.focusWhenClear&&(i.value=!0,c.value=!0),s("update:modelValue",d.value),s("clear")})}function le(){return u(this,null,function*(){yield D(150),n.value?n.value=!1:(c.value=!1,s("blur",{value:d.value}))})}function ae({detail:e}){c.value=!0,s("focus",e)}function se({detail:e}){s("update:modelValue",d.value),s("input",e)}function oe({detail:e}){s("keyboardheightchange",e)}function re({detail:e}){s("confirm",e)}function te(){s("clicksuffixicon")}function ne(){s("clickprefixicon")}function ie(e){s("click",e)}return(e,l)=>{const s=P,o=L,r=z;return C(),S(s,{class:V(J.value),style:O(e.customStyle),onClick:ie},{default:$(()=>[e.label||e.$slots.label?(C(),S(s,{key:0,class:V(Q.value),style:O(Y.value)},{default:$(()=>[e.prefixIcon||e.$slots.prefix?(C(),S(s,{key:0,class:"wd-input__prefix"},{default:$(()=>[e.prefixIcon&&!e.$slots.prefix?(C(),S(W,{key:0,"custom-class":"wd-input__icon",name:e.prefixIcon,onClick:ne},null,8,["name"])):E(e.$slots,"prefix",{key:1},void 0,!0)]),_:3})):I("",!0),j(s,{class:"wd-input__label-inner"},{default:$(()=>[e.label&&!e.$slots.label?(C(),q(T,{key:0},[B(K(e.label),1)],64)):E(e.$slots,"label",{key:1},void 0,!0)]),_:3})]),_:3},8,["class","style"])):I("",!0),j(s,{class:"wd-input__body"},{default:$(()=>[j(s,{class:"wd-input__value"},{default:$(()=>[!e.prefixIcon&&!e.$slots.prefix||e.label?I("",!0):(C(),S(s,{key:0,class:"wd-input__prefix"},{default:$(()=>[e.prefixIcon&&!e.$slots.prefix?(C(),S(W,{key:0,"custom-class":"wd-input__icon",name:e.prefixIcon,onClick:ne},null,8,["name"])):E(e.$slots,"prefix",{key:1},void 0,!0)]),_:3})),j(o,{class:V(["wd-input__inner",e.prefixIcon?"wd-input__inner--prefix":"",h.value?"wd-input__inner--count":"",e.alignRight?"is-align-right":"",e.customInputClass]),type:e.type,password:e.showPassword&&!t.value,modelValue:d.value,"onUpdate:modelValue":l[0]||(l[0]=e=>d.value=e),placeholder:m.value,disabled:e.disabled||("readonly"in e?e.readonly:H(M)),maxlength:e.maxlength,focus:i.value,"confirm-type":e.confirmType,"confirm-hold":e.confirmHold,cursor:e.cursor,"cursor-spacing":e.cursorSpacing,"placeholder-style":e.placeholderStyle,"selection-start":e.selectionStart,"selection-end":e.selectionEnd,"adjust-position":e.adjustPosition,"hold-keyboard":e.holdKeyboard,"always-embed":e.alwaysEmbed,"placeholder-class":X.value,ignoreCompositionEvent:e.ignoreCompositionEvent,inputmode:e.inputmode,onInput:se,onFocus:ae,onBlur:le,onConfirm:re,onKeyboardheightchange:oe},null,8,["class","type","password","modelValue","placeholder","disabled","maxlength","focus","confirm-type","confirm-hold","cursor","cursor-spacing","placeholder-style","selection-start","selection-end","adjust-position","hold-keyboard","always-embed","placeholder-class","ignoreCompositionEvent","inputmode"]),a.readonly?(C(),S(s,{key:1,class:"wd-input__readonly-mask"})):I("",!0),y.value||e.showPassword||e.suffixIcon||h.value||e.$slots.suffix?(C(),S(s,{key:2,class:"wd-input__suffix"},{default:$(()=>[y.value?(C(),S(W,{key:0,"custom-class":"wd-input__clear",name:"error-fill",onClick:ee})):I("",!0),e.showPassword?(C(),S(W,{key:1,"custom-class":"wd-input__icon",name:t.value?"view":"eye-close",onClick:Z},null,8,["name"])):I("",!0),h.value?(C(),S(s,{key:2,class:"wd-input__count"},{default:$(()=>[j(r,{class:V([d.value&&String(d.value).length>0?"wd-input__count-current":"",String(d.value).length>e.maxlength?"is-error":""])},{default:$(()=>[B(K(String(d.value).length),1)]),_:1},8,["class"]),B(" /"+K(e.maxlength),1)]),_:1})):I("",!0),e.suffixIcon&&!e.$slots.suffix?(C(),S(W,{key:3,"custom-class":"wd-input__icon",name:e.suffixIcon,onClick:te},null,8,["name"])):E(e.$slots,"suffix",{key:4},void 0,!0)]),_:3})):I("",!0)]),_:3}),F.value?(C(),S(s,{key:0,class:"wd-input__error-message"},{default:$(()=>[B(K(F.value),1)]),_:1})):I("",!0)]),_:3})]),_:3},8,["class","style"])}}})),[["__scopeId","data-v-29f55521"]]);export{J as _};
//# sourceMappingURL=wd-input.BGS7eRJP.js.map
