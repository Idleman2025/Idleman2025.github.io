{"version":3,"file":"wd-drop-menu.B1plMBEB.js","sources":["../../../../src/uni_modules/wot-design-uni/components/composables/useQueue.ts","../../../../src/uni_modules/wot-design-uni/components/common/clickoutside.ts","../../../../src/uni_modules/wot-design-uni/components/wd-drop-menu/types.ts","../../../../src/uni_modules/wot-design-uni/components/wd-drop-menu-item/types.ts","../../../../src/uni_modules/wot-design-uni/components/wd-drop-menu-item/wd-drop-menu-item.vue","../../../../src/uni_modules/wot-design-uni/components/wd-drop-menu/wd-drop-menu.vue"],"sourcesContent":["import { type Ref, provide, ref } from 'vue'\n\nexport const queueKey = '__QUEUE_KEY__'\n\nexport interface Queue {\n  queue: Ref<any[]>\n  pushToQueue: (comp: any) => void\n  removeFromQueue: (comp: any) => void\n  closeOther: (comp: any) => void\n  closeOutside: () => void\n}\n\nexport function useQueue() {\n  const queue = ref<any[]>([])\n\n  function pushToQueue(comp: any) {\n    queue.value.push(comp)\n  }\n\n  function removeFromQueue(comp: any) {\n    queue.value = queue.value.filter((item) => {\n      return item.$.uid !== comp.$.uid\n    })\n  }\n\n  function closeOther(comp: any) {\n    queue.value.forEach((item) => {\n      if (item.$.uid !== comp.$.uid) {\n        item.$.exposed.close()\n      }\n    })\n  }\n\n  function closeOutside() {\n    queue.value.forEach((item) => {\n      item.$.exposed.close()\n    })\n  }\n\n  provide(queueKey, {\n    queue,\n    pushToQueue,\n    removeFromQueue,\n    closeOther,\n    closeOutside\n  })\n\n  return {\n    closeOther,\n    closeOutside\n  }\n}\n","/*\n * @Author: weisheng\n * @Date: 2023-07-02 22:51:06\n * @LastEditTime: 2024-03-16 19:59:07\n * @LastEditors: weisheng\n * @Description:\n * @FilePath: /wot-design-uni/src/uni_modules/wot-design-uni/components/common/clickoutside.ts\n * 记得注释\n */\nlet queue: any[] = []\n\nexport function pushToQueue(comp: any) {\n  queue.push(comp)\n}\n\nexport function removeFromQueue(comp: any) {\n  queue = queue.filter((item) => {\n    return item.$.uid !== comp.$.uid\n  })\n}\n\nexport function closeOther(comp: any) {\n  queue.forEach((item) => {\n    if (item.$.uid !== comp.$.uid) {\n      item.$.exposed.close()\n    }\n  })\n}\n\nexport function closeOutside() {\n  queue.forEach((item) => {\n    item.$.exposed.close()\n  })\n}\n","import { type ExtractPropTypes, type InjectionKey, type Ref } from 'vue'\nimport { baseProps, makeBooleanProp, makeNumberProp, makeStringProp } from '../common/props'\n\nexport type DropDirction = 'up' | 'down'\n\nexport type DropMenuProvide = {\n  props: Partial<DropMenuProps>\n  fold: (child?: any) => void\n  offset: Ref<number>\n}\n\nexport const DROP_MENU_KEY: InjectionKey<DropMenuProvide> = Symbol('wd-drop-menu')\n\nexport const dropMenuProps = {\n  ...baseProps,\n  /**\n   * 弹框层级\n   */\n  zIndex: makeNumberProp(12),\n  /**\n   * 菜单展开方向，可选值为up 或 down\n   */\n  direction: makeStringProp<DropDirction>('down'),\n  /**\n   * 是否展示蒙层\n   */\n  modal: makeBooleanProp(true),\n  /**\n   * 是否点击蒙层时关闭\n   */\n  closeOnClickModal: makeBooleanProp(true),\n  /**\n   * 菜单展开收起动画时间，单位 ms\n   */\n  duration: makeNumberProp(200)\n}\n\nexport type DropMenuProps = ExtractPropTypes<typeof dropMenuProps>\n","import type { ComponentPublicInstance, ExtractPropTypes, PropType } from 'vue'\nimport { baseProps, makeArrayProp, makeBooleanProp, makeNumericProp, makeStringProp, numericProp } from '../common/props'\n\nexport type DropMenuItemBeforeToggleOption = {\n  // 操作状态：true 打开下拉菜单，false 关闭下拉菜单\n  status: boolean\n  // 回调函数，用于控制是否允许打开或关闭下拉菜单，true 允许打开或关闭，false 不允许打开或关闭\n  resolve: (isPass: boolean) => void\n}\n\nexport type DropMenuItemBeforeToggle = (option: DropMenuItemBeforeToggleOption) => void\n\nexport const dorpMenuItemProps = {\n  ...baseProps,\n  /**\n   * DropMenuItem 左侧文字样式\n   */\n  customTitle: makeStringProp(''),\n  /**\n   * DropMenuItem 右侧 icon 样式\n   */\n  customIcon: makeStringProp(''),\n  /**\n   * 当前选中项对应选中的 value\n   */\n  modelValue: [String, Number],\n  /**\n   * 列表数据，对应数据结构 [{text: '标题', value: '0', tip: '提示文字'}]\n   */\n  options: makeArrayProp<Record<string, any>>(),\n  /**\n   * 禁用菜单\n   */\n  disabled: makeBooleanProp(false),\n  /**\n   * 选中的图标名称(可选名称在 wd-icon 组件中)\n   */\n  iconName: makeStringProp('check'),\n  /**\n   * 菜单标题\n   */\n  title: String,\n  /**\n   * 菜单图标\n   */\n  icon: makeStringProp('arrow-down'),\n  /**\n   * 菜单图标大小\n   */\n  iconSize: numericProp,\n  /**\n   * 自定义点击事件\n   */\n  beforeToggle: Function as PropType<DropMenuItemBeforeToggle>,\n  /**\n   * 选项对象中，value 对应的 key\n   */\n  valueKey: makeStringProp('value'),\n  /**\n   * 选项对象中，展示的文本对应的 key\n   */\n  labelKey: makeStringProp('label'),\n  /**\n   * 选项对象中，选项说明对应的 key\n   */\n  tipKey: makeStringProp('tip'),\n  /**\n   * 自定义下拉菜单popup样式类\n   */\n  customPopupClass: makeStringProp(''),\n  /**\n   * 自定义下拉菜单popup样式\n   */\n  customPopupStyle: makeStringProp('')\n}\n\nexport type DropMenuItemProps = ExtractPropTypes<typeof dorpMenuItemProps>\n\nexport type DropMenuItemExpose = {\n  getShowPop: () => boolean\n  open: () => void\n  close: () => void\n  toggle: () => void\n}\n\nexport type DropMenuItemInstance = ComponentPublicInstance<DropMenuItemProps, DropMenuItemExpose>\n","<template>\n  <view\n    v-if=\"showWrapper\"\n    :class=\"`wd-drop-item  ${customClass}`\"\n    :style=\"`pointer-events: none; z-index: ${zIndex}; ${positionStyle};${customStyle}`\"\n  >\n    <wd-popup\n      v-model=\"showPop\"\n      :z-index=\"zIndex\"\n      :duration=\"duration\"\n      :position=\"position\"\n      :custom-style=\"`position: absolute; pointer-events: auto; max-height: 80%;${customPopupStyle}`\"\n      :custom-class=\"customPopupClass\"\n      :modal=\"false\"\n      :close-on-click-modal=\"false\"\n      @before-enter=\"beforeEnter\"\n      @after-enter=\"afterEnter\"\n      @before-leave=\"beforeLeave\"\n      @after-leave=\"afterLeave\"\n    >\n      <view v-if=\"options.length\">\n        <view\n          v-for=\"(item, index) in options\"\n          :key=\"index\"\n          @click=\"choose(index)\"\n          :class=\"`wd-drop-item__option ${(item[valueKey] !== '' ? item[valueKey] : item) === modelValue ? 'is-active' : ''}`\"\n        >\n          <view :class=\"`wd-drop-item__title ${customTitle}`\">\n            <text>{{ item[labelKey] ? item[labelKey] : item }}</text>\n            <text v-if=\"item[tipKey]\" class=\"wd-drop-item__tip\">{{ item[tipKey] }}</text>\n          </view>\n          <wd-icon\n            v-if=\"(item[valueKey] !== '' ? item[valueKey] : item) === modelValue\"\n            :name=\"iconName\"\n            :custom-class=\"`wd-drop-item__icon ${customIcon}`\"\n          />\n        </view>\n      </view>\n      <slot v-else />\n    </wd-popup>\n  </view>\n</template>\n<script lang=\"ts\">\nexport default {\n  name: 'wd-drop-menu-item',\n  options: {\n    virtualHost: true,\n    addGlobalClass: true,\n    styleIsolation: 'shared'\n  }\n}\n</script>\n\n<script lang=\"ts\" setup>\nimport wdPopup from '../wd-popup/wd-popup.vue'\nimport wdIcon from '../wd-icon/wd-icon.vue'\nimport { computed, getCurrentInstance, inject, onBeforeMount, onBeforeUnmount, ref, watch } from 'vue'\nimport { pushToQueue, removeFromQueue } from '../common/clickoutside'\nimport { type Queue, queueKey } from '../composables/useQueue'\nimport type { PopupType } from '../wd-popup/types'\nimport { useParent } from '../composables/useParent'\nimport { DROP_MENU_KEY } from '../wd-drop-menu/types'\nimport { isDef, isFunction } from '../common/util'\nimport { dorpMenuItemProps, type DropMenuItemExpose } from './types'\n\nconst props = defineProps(dorpMenuItemProps)\nconst emit = defineEmits<{\n  (e: 'update:modelValue', value: string | number): void\n  (e: 'change', event: { value: string | number; selectedItem: Record<string, any> }): void\n  (e: 'open'): void\n  (e: 'opened'): void\n  (e: 'close'): void\n  (e: 'closed'): void\n}>()\n\nconst queue = inject<Queue | null>(queueKey, null)\nconst showWrapper = ref<boolean>(false)\nconst showPop = ref<boolean>(false)\nconst position = ref<PopupType>()\nconst zIndex = ref<number>(12)\nconst duration = ref<number>(0)\n\nconst { parent: dropMenu } = useParent(DROP_MENU_KEY)\n\nconst { proxy } = getCurrentInstance() as any\n\nconst positionStyle = computed(() => {\n  let style: string = ''\n  if (showWrapper.value && dropMenu) {\n    style =\n      dropMenu.props.direction === 'down'\n        ? `top: calc(var(--window-top) + ${dropMenu.offset.value}px); bottom: 0;`\n        : `top: 0; bottom: calc(var(--window-bottom) + ${dropMenu.offset.value}px)`\n  } else {\n    style = ''\n  }\n  return style\n})\n\nwatch(\n  () => props.modelValue,\n  (newValue) => {\n    if (isDef(newValue) && typeof newValue !== 'number' && typeof newValue !== 'string') {\n      console.error('[wot-design] warning(wd-drop-menu-item): the type of value should be a number or a string.')\n    }\n  },\n  {\n    deep: true,\n    immediate: true\n  }\n)\n\nonBeforeMount(() => {\n  if (queue && queue.pushToQueue) {\n    queue.pushToQueue(proxy)\n  } else {\n    pushToQueue(proxy)\n  }\n})\n\nonBeforeUnmount(() => {\n  if (queue && queue.removeFromQueue) {\n    queue.removeFromQueue(proxy)\n  } else {\n    removeFromQueue(proxy)\n  }\n})\n\nfunction getShowPop() {\n  return showPop.value\n}\n// 模拟单选操作 默认根据 value 选中操作\nfunction choose(index: number) {\n  if (props.disabled) return\n  const { valueKey } = props\n  const item = props.options[index]\n  const newValue = item[valueKey] !== undefined ? item[valueKey] : item\n  emit('update:modelValue', newValue)\n  emit('change', {\n    value: newValue,\n    selectedItem: item\n  })\n  close()\n}\n// 外部关闭弹出框\nfunction close() {\n  if (!showPop.value) {\n    return\n  }\n  if (isFunction(props.beforeToggle)) {\n    props.beforeToggle({\n      status: false,\n      resolve: (isPass: boolean) => {\n        isPass && handleClose()\n      }\n    })\n  } else {\n    handleClose()\n  }\n}\n\nfunction handleClose() {\n  if (showPop.value) {\n    showPop.value = false\n  }\n}\n\nfunction open() {\n  if (showPop.value) {\n    return\n  }\n  if (isFunction(props.beforeToggle)) {\n    props.beforeToggle({\n      status: true,\n      resolve: (isPass) => {\n        isPass && handleOpen()\n      }\n    })\n  } else {\n    handleOpen()\n  }\n}\n\nfunction handleOpen() {\n  showWrapper.value = true\n  showPop.value = true\n  if (dropMenu) {\n    duration.value = Number(dropMenu.props.duration)\n    position.value = dropMenu.props.direction === 'down' ? 'top' : 'bottom'\n  }\n}\n\nfunction toggle() {\n  if (showPop.value) {\n    close()\n  } else {\n    open()\n  }\n}\n\nfunction afterLeave() {\n  showWrapper.value = false\n  emit('closed')\n}\nfunction beforeEnter() {\n  emit('open')\n}\nfunction afterEnter() {\n  emit('opened')\n}\nfunction beforeLeave() {\n  emit('close')\n}\n\ndefineExpose<DropMenuItemExpose>({ getShowPop, open, close, toggle })\n</script>\n\n<style lang=\"scss\" scoped>\n@import './index.scss';\n</style>\n","<template>\n  <view :style=\"customStyle\" :class=\"`wd-drop-menu ${customClass}`\" @click.stop.prevent=\"noop\" :id=\"dropMenuId\">\n    <wd-overlay\n      :show=\"overlayVisible\"\n      :duration=\"duration\"\n      :z-index=\"12\"\n      :custom-style=\"modalStyle\"\n      @click=\"handleClickOverlay\"\n      @touchmove=\"noop\"\n      v-if=\"modal\"\n    />\n\n\n\n\n      <view class=\"wd-drop-menu__list\">\n        <view\n          v-for=\"(child, index) in children\"\n          :key=\"index\"\n          @click=\"toggle(child)\"\n          :class=\"`wd-drop-menu__item ${child.disabled ? 'is-disabled' : ''} ${child.$.exposed!.getShowPop() ? 'is-active' : ''}`\"\n        >\n          <view class=\"wd-drop-menu__item-title\">\n            <view class=\"wd-drop-menu__item-title-text\">{{ getDisplayTitle(child) }}</view>\n            <wd-icon :name=\"child.icon\" :size=\"child.iconSize\" custom-class=\"wd-drop-menu__arrow\" />\n          </view>\n        </view>\n      </view>\n      <slot />\n\n\n\n  </view>\n</template>\n<script lang=\"ts\">\nexport default {\n  name: 'wd-drop-menu',\n  options: {\n    virtualHost: true,\n    addGlobalClass: true,\n    styleIsolation: 'shared'\n  }\n}\n</script>\n\n<script lang=\"ts\" setup>\nimport { computed, getCurrentInstance, inject, onBeforeMount, ref, watch } from 'vue'\nimport { closeOther } from '../common/clickoutside'\nimport { type Queue, queueKey } from '../composables/useQueue'\nimport { getRect, uuid } from '../common/util'\nimport { useChildren } from '../composables/useChildren'\nimport { DROP_MENU_KEY, dropMenuProps } from './types'\nimport wdOverlay from '../wd-overlay/wd-overlay.vue'\n\nconst props = defineProps(dropMenuProps)\nconst queue = inject<Queue | null>(queueKey, null)\nconst dropMenuId = ref<string>(`dropMenuId${uuid()}`)\nconst offset = ref<number>(0)\nconst windowHeight = ref<number>(0)\nconst modalStyle = computed(() => {\n  return props.direction === 'down'\n    ? `top: calc(var(--window-top) + ${offset.value}px); bottom: 0;`\n    : `top: 0; bottom: calc(var(--window-bottom) + ${offset.value}px)`\n})\n\nconst { proxy } = getCurrentInstance() as any\n\nconst { linkChildren, children } = useChildren(DROP_MENU_KEY)\n\nconst showOverlay = computed(() => {\n  return children.some((child) => child.$.exposed!.getShowPop())\n})\n\nconst overlayVisible = ref(false)\nlet overlayTimer: ReturnType<typeof setTimeout> | null\n\n// 延迟关闭遮罩层，避免闪烁\n// 小程序中，即使先 fold 再 closeOther 也会有闪烁，使用延迟关闭遮罩层处理\nwatch(showOverlay, (newVal) => {\n  if (overlayTimer) {\n    clearTimeout(overlayTimer)\n  }\n  if (newVal) {\n    overlayVisible.value = true\n  } else {\n    overlayTimer = setTimeout(() => {\n      overlayVisible.value = false\n      overlayTimer = null\n    }, 16)\n  }\n})\n\nlinkChildren({ props, fold, offset })\n\nwatch(\n  () => props.direction,\n  (newValue) => {\n    if (!['up', 'down'].includes(newValue)) {\n      // eslint-disable-next-line quotes\n      console.error(\"[wot ui] warning(wd-drop-menu): direction must be 'up' or 'down'\")\n    }\n  },\n  { deep: true, immediate: true }\n)\n\nonBeforeMount(() => {\n  windowHeight.value = uni.getSystemInfoSync().windowHeight\n})\n\nfunction noop() {}\n\nfunction getDisplayTitle(child: any) {\n  const { title, modelValue, options, valueKey, labelKey } = child\n\n  if (title) {\n    return title\n  }\n  for (let i = 0, len = options.length; i < len; i++) {\n    if (modelValue === options[i][valueKey]) {\n      return options[i][labelKey]\n    }\n  }\n  console.error('[wot-design] warning(wd-drop-menu-item): no value is matched in the options option.')\n}\n\nfunction toggle(child: any) {\n  // 点击当前 menu, 关闭其他 menu\n  if (child && !child.disabled) {\n    if (queue && queue.closeOther) {\n      queue.closeOther(child)\n    } else {\n      closeOther(child)\n    }\n    fold(child)\n  }\n}\n\n/**\n * 控制菜单内容是否展开\n */\nfunction fold(child: any) {\n  getRect(`#${dropMenuId.value}`, false, proxy).then((rect) => {\n    if (!rect) return\n    const { top, bottom } = rect\n    if (props.direction === 'down') {\n      offset.value = Number(bottom)\n    } else {\n      offset.value = windowHeight.value - Number(top)\n    }\n    child.$.exposed!.toggle()\n  })\n}\n\nfunction handleClickOverlay() {\n  if (props.closeOnClickModal) {\n    // 关闭所有打开的菜单项\n    children.forEach((child) => {\n      child.$.exposed!.close()\n    })\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import './index.scss';\n</style>\n"],"names":["queueKey","queue","DROP_MENU_KEY","Symbol","dropMenuProps","__spreadProps","baseProps","zIndex","makeNumberProp","direction","makeStringProp","modal","makeBooleanProp","closeOnClickModal","duration","dorpMenuItemProps","customTitle","customIcon","modelValue","String","Number","options","makeArrayProp","disabled","iconName","title","icon","iconSize","numericProp","beforeToggle","Function","valueKey","labelKey","tipKey","customPopupClass","customPopupStyle","name","virtualHost","addGlobalClass","styleIsolation","props","__props","emit","__emit","inject","showWrapper","ref","showPop","position","parent","dropMenu","useParent","proxy","getCurrentInstance","positionStyle","computed","style","value","offset","close","isFunction","status","resolve","isPass","handleClose","open","handleOpen","afterLeave","beforeEnter","afterEnter","beforeLeave","watch","newValue","isDef","console","error","deep","immediate","onBeforeMount","comp","pushToQueue","push","onBeforeUnmount","removeFromQueue","filter","item","$","uid","__expose","getShowPop","toggle","index","selectedItem","dropMenuId","uuid","windowHeight","modalStyle","linkChildren","children","useChildren","showOverlay","some","child","exposed","overlayVisible","overlayTimer","noop","getDisplayTitle","i","len","length","closeOther","forEach","fold","getRect","then","rect","top","bottom","handleClickOverlay","newVal","clearTimeout","setTimeout","includes","uni.getSystemInfoSync"],"mappings":"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"}