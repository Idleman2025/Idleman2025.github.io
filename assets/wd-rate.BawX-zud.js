var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,n=(e,a)=>{for(var t in a||(a={}))r.call(a,t)&&s(e,t,a[t]);if(l)for(var t of l(a))o.call(a,t)&&s(e,t,a[t]);return e},i=(e,l)=>a(e,t(l));import{I as c,H as u,G as d,E as m,J as y,L as p,r as f,q as v,O as b,c as h,o as g,w,v as _,F as C,z as x,i as O,S as k,d as z,R as I,C as j,y as P,D as A,Q as H,_ as V}from"./index-1PzZjqPQ.js";const E=i(n({},c),{num:m(5),modelValue:{type:[String,Number,null],default:null},readonly:u(!1),size:d("16px"),space:d("4px"),color:d("#E8E8E8"),activeColor:{type:[String,Array],default:"linear-gradient(180deg, rgba(255,238,0,1) 0%,rgba(250,176,21,1) 100%)"},icon:d("star-on"),activeIcon:d("star-on"),disabled:u(!1),disabledColor:d("linear-gradient(315deg, rgba(177,177,177,1) 0%,rgba(199,199,199,1) 100%)"),allowHalf:u(!1)}),S=V(y(i(n({},{name:"wd-rate",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"}}),{props:E,emits:["update:modelValue","change"],setup(e,{emit:a}){const{proxy:t}=p(),l=e,r=a,o=f([]),s=f(""),n=v(()=>`background:${l.color};`),i=v(()=>`background:${l.disabled?l.disabledColor:s.value};`);b(()=>l.activeColor,e=>{Array.isArray(e)&&!e.length&&console.error("activeColor cannot be an empty array"),u()},{immediate:!0,deep:!0}),b([()=>l.num,()=>l.modelValue],()=>{!function(){const{modelValue:e,num:a,allowHalf:t}=l;if(null===e||!a)return;if("number"!=typeof e)return void console.error("[wot ui] error(wd-rate): the value of wd-rate should be a number");const r=[],s=Math.floor(e);for(let l=0;l<a;l++)l<s?r.push("100%"):l===s&&t&&e%1!=0?r.push("50%"):r.push("0");o.value=r,u()}()},{immediate:!0,deep:!0});const c=e=>"0"!==e;function u(){const{activeColor:e,modelValue:a,num:t}=l;let r="";r=Array.isArray(e)&&e.length?Number(a)<=.6*t||!e[1]?e[0]:e[1]:e,s.value=r}function d(e,a){if(l.readonly||l.disabled)return;const t=a?e+.5:e+1;r("update:modelValue",t),r("change",{value:t})}function m(e){return a=this,r=null,o=function*(){const{clientX:a}=e.touches[0],r=yield H(".wd-rate__item",!0,t),o=Array.from(r).findIndex(e=>a>=e.left&&a<=e.right);if(-1!==o){const e=r[o],t=e.width,s=l.allowHalf&&a-e.left<t/2;(s?o+.5:o+1)>=.5&&d(o,s)}},new Promise((e,t)=>{var l=e=>{try{n(o.next(e))}catch(a){t(a)}},s=e=>{try{n(o.throw(e))}catch(a){t(a)}},n=a=>a.done?e(a.value):Promise.resolve(a.value).then(l,s);n((o=o.apply(a,r)).next())});var a,r,o}return(e,a)=>{const t=O;return g(),h(t,{class:A(`wd-rate ${e.customClass}`),style:k(e.customStyle),onTouchmove:m},{default:w(()=>[(g(!0),_(C,null,x(o.value,(a,r)=>(g(),h(t,{key:r,"data-index":r,style:k({"margin-right":r==o.value.length-1?0:e.space}),class:"wd-rate__item"},{default:w(()=>[z(j,{"custom-class":"wd-rate__item-star",name:c(a)?e.activeIcon:e.icon,size:e.size,"custom-style":"100%"===a?i.value:n.value,onClick:e=>d(r,!1)},null,8,["name","size","custom-style","onClick"]),l.allowHalf?(g(),h(t,{key:0,class:"wd-rate__item-half",onClick:P(e=>d(r,!0),["stop"])},{default:w(()=>[z(j,{"custom-class":"wd-rate__item-star",name:c(a)?e.activeIcon:e.icon,size:e.size,"custom-style":"0"!==a?i.value:n.value},null,8,["name","size","custom-style"])]),_:2},1032,["onClick"])):I("",!0)]),_:2},1032,["data-index","style"]))),128))]),_:1},8,["class","style"])}}})),[["__scopeId","data-v-607352fe"]]);export{S as _};
//# sourceMappingURL=wd-rate.BawX-zud.js.map
