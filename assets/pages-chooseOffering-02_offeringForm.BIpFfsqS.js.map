{"version":3,"file":"pages-chooseOffering-02_offeringForm.BIpFfsqS.js","sources":["../../../../src/uni_modules/wot-design-uni/components/common/dayjs.ts","../../../../src/uni_modules/wot-design-uni/components/wd-tabs/types.ts","../../../../src/uni_modules/wot-design-uni/components/wd-tab/types.ts","../../../../src/uni_modules/wot-design-uni/components/wd-tab/wd-tab.vue","../../../../src/uni_modules/wot-design-uni/components/wd-badge/types.ts","../../../../src/uni_modules/wot-design-uni/components/wd-badge/wd-badge.vue","../../../../src/uni_modules/wot-design-uni/components/wd-resize/types.ts","../../../../src/uni_modules/wot-design-uni/components/wd-resize/wd-resize.vue","../../../../src/uni_modules/wot-design-uni/components/wd-sticky/types.ts","../../../../src/uni_modules/wot-design-uni/components/wd-sticky-box/types.ts","../../../../src/uni_modules/wot-design-uni/components/wd-sticky/wd-sticky.vue","../../../../src/uni_modules/wot-design-uni/components/wd-sticky-box/wd-sticky-box.vue","../../../../src/uni_modules/wot-design-uni/components/wd-tabs/wd-tabs.vue","../../../../src/uni_modules/wot-design-uni/components/wd-tag/types.ts","../../../../src/uni_modules/wot-design-uni/components/wd-tag/wd-tag.vue","../../../../src/uni_modules/wot-design-uni/components/wd-calendar-view/utils.ts","../../../../src/uni_modules/wot-design-uni/components/wd-calendar-view/year/types.ts","../../../../src/uni_modules/wot-design-uni/components/wd-calendar-view/year/year.vue","../../../../src/uni_modules/wot-design-uni/components/wd-calendar-view/yearPanel/types.ts","../../../../src/uni_modules/wot-design-uni/components/wd-calendar-view/yearPanel/year-panel.vue","../../../../src/uni_modules/wot-design-uni/components/wd-calendar-view/month/types.ts","../../../../src/uni_modules/wot-design-uni/components/wd-calendar-view/month/month.vue","../../../../src/uni_modules/wot-design-uni/components/wd-calendar-view/monthPanel/types.ts","../../../../src/uni_modules/wot-design-uni/components/wd-calendar-view/monthPanel/month-panel.vue","../../../../src/uni_modules/wot-design-uni/components/wd-calendar-view/types.ts","../../../../src/uni_modules/wot-design-uni/components/wd-calendar-view/wd-calendar-view.vue","../../../../src/uni_modules/wot-design-uni/components/wd-action-sheet/types.ts","../../../../src/uni_modules/wot-design-uni/components/wd-action-sheet/wd-action-sheet.vue","../../../../src/uni_modules/wot-design-uni/components/wd-calendar/types.ts","../../../../src/uni_modules/wot-design-uni/components/wd-calendar/wd-calendar.vue","../../../../src/pages/chooseOffering/02_offeringForm.vue"],"sourcesContent":["import { isDate } from './util'\n\n/* eslint-disable */\nclass Dayjs {\n  utc: boolean\n  date: Date\n  timeZone: number\n  timeZoneString: any\n  mYear: any\n  mMonth: any\n  mDay: any\n  mWeek: any\n  mHour: any\n  mMinute: any\n  mSecond: any\n  constructor(dateStr?: string | number | Date) {\n    this.utc = false\n    const parsedDate = this.parseConfig(dateStr)\n    this.date = new Date(parsedDate)\n    this.timeZone = this.date.getTimezoneOffset() / 60\n    this.timeZoneString = this.padNumber(String(-1 * this.timeZone).replace(/^(.)?(\\d)/, '$10$200'), 5, '+')\n    this.mYear = this.date.getFullYear()\n    this.mMonth = this.date.getMonth()\n    this.mDay = this.date.getDate()\n    this.mWeek = this.date.getDay()\n    this.mHour = this.date.getHours()\n    this.mMinute = this.date.getMinutes()\n    this.mSecond = this.date.getSeconds()\n  }\n\n  parseConfig(dateStr?:string | number | Date) {\n    if (!dateStr) return new Date()\n    if (isDate(dateStr)) return dateStr\n    if (/^(\\d){8}$/.test(dateStr as string)) {\n      this.utc = true\n      return `${(dateStr as string).substr(0, 4)}-${(dateStr as string).substr(4, 2)}-${(dateStr as string).substr(6, 2)}`\n    }\n    return dateStr\n  }\n\n  padNumber(num:string, length:number, padChar:string) {\n    return !num || num.length >= length ? num : `${Array(length + 1 - num.length).join(padChar)}${num}`\n  }\n\n  year() {\n    return this.mYear\n  }\n\n  month() {\n    return this.mMonth\n  }\n\n  unix() {\n    const timeZoneOffset = this.utc ? 60 * this.timeZone * 60 * 1000 : 0\n    return Math.floor((this.date.getTime() + timeZoneOffset) / 1000)\n  }\n\n  toString() {\n    return this.date.toUTCString()\n  }\n\n  startOf(unit:string) {\n    switch (unit) {\n      case 'year':\n        return new Dayjs(new Date(this.year(), 0, 1))\n      case 'month':\n        return new Dayjs(new Date(this.year(), this.month(), 1))\n      default:\n        return this\n    }\n  }\n\n  add(amount:number, unit:string) {\n    let interval\n    switch (unit) {\n      case 'm':\n      case 'minutes':\n        interval = 60\n        break\n      case 'h':\n      case 'hours':\n        interval = 60 * 60\n        break\n      case 'd':\n      case 'days':\n        interval = 24 * 60 * 60\n        break\n      case 'w':\n      case 'weeks':\n        interval = 7 * 24 * 60 * 60\n        break\n      default:\n        interval = 1\n    }\n    const newUnixTime = this.unix() + amount * interval\n    return new Dayjs(1000 * newUnixTime)\n  }\n\n  subtract(amount:number, unit:string) {\n    return this.add(-1 * amount, unit)\n  }\n\n  format(formatStr = 'YYYY-MM-DDTHH:mm:ssZ') {\n    const weekdays = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday']\n    return formatStr.replace(/Y{2,4}|M{1,2}|D{1,2}|d{1,4}|H{1,2}|m{1,2}|s{1,2}|Z{1,2}/g, (match) => {\n      switch (match) {\n        case 'YY':\n          return String(this.mYear).slice(-2)\n        case 'YYYY':\n          return String(this.mYear)\n        case 'M':\n          return String(this.mMonth + 1)\n        case 'MM':\n          return this.padNumber(String(this.mMonth + 1), 2, '0')\n        case 'D':\n          return String(this.mDay)\n        case 'DD':\n          return this.padNumber(String(this.mDay), 2, '0')\n        case 'd':\n          return String(this.mWeek)\n        case 'dddd':\n          return weekdays[this.mWeek]\n        case 'H':\n          return String(this.mHour)\n        case 'HH':\n          return this.padNumber(String(this.mHour), 2, '0')\n        case 'm':\n          return String(this.mMinute)\n        case 'mm':\n          return this.padNumber(String(this.mMinute), 2, '0')\n        case 's':\n          return String(this.mSecond)\n        case 'ss':\n          return this.padNumber(String(this.mSecond), 2, '0')\n        case 'Z':\n          return `${this.timeZoneString.slice(0, -2)}:00`\n        case 'ZZ':\n          return this.timeZoneString\n        default:\n          return match\n      }\n    })\n  }\n}\n\nexport  function dayjs(dateStr?: string | number | Date) {\n return new Dayjs(dateStr)\n}\n","import { type ComponentPublicInstance, type ExtractPropTypes, type InjectionKey } from 'vue'\nimport { baseProps, makeBooleanProp, makeNumberProp, makeNumericProp, makeStringProp, numericProp } from '../common/props'\n\nexport type TabsProvide = {\n  state: {\n    activeIndex: number\n    lineStyle: string // 激活项边框线样式\n    inited: boolean // 是否初始化\n    animating: boolean // 是否动画中\n    mapShow: boolean // map的开关\n    scrollLeft: number // scroll-view偏移量\n  }\n  props: Partial<TabsProps>\n}\n\nexport type TabsSlidable = 'auto' | 'always'\n\nexport const TABS_KEY: InjectionKey<TabsProvide> = Symbol('wd-tabs')\n\nexport const tabsProps = {\n  ...baseProps,\n  /**\n   * 绑定值\n   */\n  modelValue: makeNumericProp(0),\n  /**\n   * 标签数超过阈值可滑动\n   */\n  slidableNum: makeNumberProp(6),\n  /**\n   * 标签数超过阈值显示导航地图\n   */\n  mapNum: makeNumberProp(10),\n  /**\n   * 导航地图的标题\n   */\n  mapTitle: String,\n  /**\n   * 粘性布局\n   */\n  sticky: makeBooleanProp(false),\n  /**\n   * 粘性布局吸顶位置\n   */\n  offsetTop: makeNumberProp(0),\n  /**\n   * 开启手势滑动\n   */\n  swipeable: makeBooleanProp(false),\n  /**\n   * 自动调整底部条宽度，设置了 lineWidth 后无效\n   */\n  autoLineWidth: makeBooleanProp(false),\n  /**\n   * 底部条宽度，单位像素\n   */\n  lineWidth: numericProp,\n  /**\n   * 底部条高度，单位像素\n   */\n  lineHeight: numericProp,\n  /**\n   * 颜色\n   */\n  color: makeStringProp(''),\n  /**\n   * 非活动状态颜色\n   */\n  inactiveColor: makeStringProp(''),\n  /**\n   * 是否开启切换标签内容时的过渡动画\n   */\n  animated: makeBooleanProp(false),\n  /**\n   * 切换动画过渡时间，单位毫秒\n   */\n  duration: makeNumberProp(300),\n  /**\n   * 是否开启滚动导航\n   * 可选值：'auto' | 'always'\n   * @default auto\n   */\n  slidable: makeStringProp<TabsSlidable>('auto')\n}\n\nexport type TabsExpose = {\n  /**\n   * 设置激活项\n   * @param value 激活值\n   * @param init 是否已初始化\n   * @param setScroll 是否设置scroll-view滚动\n   */\n  setActive: (value: number | string, init: boolean, setScroll: boolean) => void\n  /**\n   * 使选中项滚动到可视区域\n   */\n  scrollIntoView: () => void\n  /**\n   * 更新激活项边框线样式\n   * @param animation 是否开启动画，默认开启\n   */\n  updateLineStyle: (animation?: boolean) => void\n}\n\nexport type TabsProps = ExtractPropTypes<typeof tabsProps>\n\nexport type TabsInstance = ComponentPublicInstance<TabsProps, TabsExpose>\n","import type { ExtractPropTypes, PropType } from 'vue'\nimport { baseProps, makeBooleanProp, numericProp } from '../common/props'\nimport type { BadgeProps } from '../wd-badge/types'\n\nexport const tabProps = {\n  ...baseProps,\n  /**\n   * 唯一标识符\n   */\n  name: numericProp,\n  /**\n   * tab的标题\n   */\n  title: String,\n  /**\n   *  是否禁用，无法点击\n   */\n  disabled: makeBooleanProp(false),\n  /**\n   * 是否懒加载，切换到该tab时才加载内容\n   * @default true\n   */\n  lazy: makeBooleanProp(true),\n  /**\n   * 徽标属性，透传给 Badge 组件\n   */\n  badgeProps: Object as PropType<Partial<BadgeProps>>\n}\n\nexport type TabProps = ExtractPropTypes<typeof tabProps>\n","<template>\n  <view :class=\"`wd-tab ${customClass}`\" :style=\"customStyle\">\n    <view :class=\"['wd-tab__body', { 'wd-tab__body--inactive': !active }]\" v-if=\"shouldBeRender\" :style=\"tabBodyStyle\">\n      <slot />\n    </view>\n  </view>\n</template>\n<script lang=\"ts\">\nexport default {\n  name: 'wd-tab',\n  options: {\n    addGlobalClass: true,\n    virtualHost: true,\n    styleIsolation: 'shared'\n  }\n}\n</script>\n<script lang=\"ts\" setup>\nimport { getCurrentInstance, ref, watch, type CSSProperties } from 'vue'\nimport { isDef, isNumber, isString, objToStyle } from '../common/util'\nimport { useParent } from '../composables/useParent'\nimport { TABS_KEY } from '../wd-tabs/types'\nimport { computed } from 'vue'\nimport { tabProps } from './types'\n\nconst props = defineProps(tabProps)\n\nconst { proxy } = getCurrentInstance() as any\nconst { parent: tabs, index } = useParent(TABS_KEY)\n\n// 激活项下标\nconst active = computed(() => {\n  return isDef(tabs) ? tabs.state.activeIndex === index.value : false\n})\n\nconst painted = ref<boolean>(active.value) // 初始状态tab不会渲染，必须通过tabs来设置painted使tab渲染\n\nconst tabBodyStyle = computed(() => {\n  const style: CSSProperties = {}\n  if (!active.value && (!isDef(tabs) || !tabs.props.animated)) {\n    style.display = 'none'\n  }\n  return objToStyle(style)\n})\n\nconst shouldBeRender = computed(() => !props.lazy || painted.value || active.value)\n\nwatch(active, (val) => {\n  if (val) painted.value = true\n})\n\nwatch(\n  () => props.name,\n  (newValue) => {\n    if (isDef(newValue) && !isNumber(newValue) && !isString(newValue)) {\n      console.error('[wot ui] error(wd-tab): the type of name should be number or string')\n      return\n    }\n    if (tabs) {\n      checkName(proxy)\n    }\n  },\n  {\n    deep: true,\n    immediate: true\n  }\n)\n\n/**\n * @description 检测tab绑定的name是否和其它tab的name冲突\n * @param {Object} self 自身\n */\nfunction checkName(self: any) {\n  const { name: myName } = props\n  if (myName === undefined || myName === null || myName === '') {\n    return\n  }\n  tabs &&\n    tabs.children.forEach((child: any) => {\n      if (child.$.uid !== self.$.uid && child.name === myName) {\n        console.error(`The tab's bound value: ${myName} has been used`)\n      }\n    })\n}\n</script>\n<style lang=\"scss\" scoped>\n@import './index.scss';\n</style>\n","/*\n * @Author: weisheng\n * @Date: 2024-03-15 11:36:12\n * @LastEditTime: 2024-11-20 20:29:03\n * @LastEditors: weisheng\n * @Description:\n * @FilePath: /wot-design-uni/src/uni_modules/wot-design-uni/components/wd-badge/types.ts\n * 记得注释\n */\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport { baseProps, makeBooleanProp, makeStringProp, numericProp } from '../common/props'\n\nexport type BadgeType = 'primary' | 'success' | 'warning' | 'danger' | 'info'\n\nexport const badgeProps = {\n  ...baseProps,\n  /**\n   * 显示值\n   */\n  modelValue: numericProp,\n  /** 当数值为 0 时，是否展示徽标 */\n  showZero: makeBooleanProp(false),\n  bgColor: String,\n  /**\n   * 最大值，超过最大值会显示 '{max}+'，要求 value 是 Number 类型\n   */\n  max: Number,\n  /**\n   * 是否为红色点状标注\n   */\n  isDot: Boolean,\n  /**\n   * 是否隐藏 badge\n   */\n  hidden: Boolean,\n  /**\n   * badge类型，可选值primary / success / warning / danger / info\n   */\n  type: makeStringProp<BadgeType | undefined>(undefined),\n  /**\n   * 为正时，角标向下偏移对应的像素\n   */\n  top: numericProp,\n  /**\n   * 为正时，角标向左偏移对应的像素\n   */\n  right: numericProp\n}\n\nexport type BadgeProps = ExtractPropTypes<typeof badgeProps>\n","<template>\n  <view :class=\"['wd-badge', customClass]\" :style=\"customStyle\">\n    <slot></slot>\n    <view\n      v-if=\"shouldShowBadge\"\n      :class=\"['wd-badge__content', 'is-fixed', type ? 'wd-badge__content--' + type : '', isDot ? 'is-dot' : '']\"\n      :style=\"contentStyle\"\n    >\n      {{ content }}\n    </view>\n  </view>\n</template>\n<script lang=\"ts\">\nexport default {\n  name: 'wd-badge',\n  options: {\n    addGlobalClass: true,\n    virtualHost: true,\n    styleIsolation: 'shared'\n  }\n}\n</script>\n<script lang=\"ts\" setup>\nimport { computed, type CSSProperties } from 'vue'\nimport { badgeProps } from './types'\nimport { addUnit, isDef, isNumber, objToStyle } from '../common/util'\n\nconst props = defineProps(badgeProps)\nconst content = computed(() => {\n  const { modelValue, max, isDot } = props\n  if (isDot) return ''\n  let value = modelValue\n  if (value && max && isNumber(value) && !Number.isNaN(value) && !Number.isNaN(max)) {\n    value = max < value ? `${max}+` : value\n  }\n  return value\n})\n\nconst contentStyle = computed(() => {\n  const style: CSSProperties = {}\n  if (isDef(props.bgColor)) {\n    style.backgroundColor = props.bgColor\n  }\n\n  if (isDef(props.top)) {\n    style.top = addUnit(props.top)\n  }\n\n  if (isDef(props.right)) {\n    style.right = addUnit(props.right)\n  }\n  return objToStyle(style)\n})\n\n// 是否展示徽标数字\nconst shouldShowBadge = computed(() => !props.hidden && (content.value || (content.value === 0 && props.showZero) || props.isDot))\n</script>\n\n<style lang=\"scss\" scoped>\n@import './index.scss';\n</style>\n","import { baseProps, makeStringProp } from '../common/props'\n\nexport const resizeProps = {\n  ...baseProps,\n  customContainerClass: makeStringProp('')\n}\n","<template>\n  <view :class=\"`wd-resize ${customClass}`\" :style=\"rootStyle\">\n    <!--插槽需要脱离父容器文档流，防止父容器固宽固高，进而导致插槽大小被被父容器限制-->\n    <view :id=\"resizeId\" :class=\"`wd-resize__container ${customContainerClass}`\">\n      <!--被监听的插槽-->\n      <slot />\n      <!--监听插槽变大-->\n      <scroll-view\n        class=\"wd-resize__wrapper\"\n        :scroll-y=\"true\"\n        :scroll-top=\"expandScrollTop\"\n        :scroll-x=\"true\"\n        :scroll-left=\"expandScrollLeft\"\n        @scroll=\"onScrollHandler\"\n      >\n        <view class=\"wd-resize__wrapper--placeholder\" style=\"height: 100000px; width: 100000px\"></view>\n      </scroll-view>\n      <!--监听插槽变小-->\n      <scroll-view\n        class=\"wd-resize__wrapper\"\n        :scroll-y=\"true\"\n        :scroll-top=\"shrinkScrollTop\"\n        :scroll-x=\"true\"\n        :scroll-left=\"shrinkScrollLeft\"\n        @scroll=\"onScrollHandler\"\n      >\n        <view class=\"wd-resize__wrapper--placeholder\" style=\"height: 250%; width: 250%\"></view>\n      </scroll-view>\n    </view>\n  </view>\n</template>\n\n<script lang=\"ts\">\nexport default {\n  name: 'wd-resize',\n  options: {\n    virtualHost: true,\n    addGlobalClass: true,\n    styleIsolation: 'shared'\n  }\n}\n</script>\n\n<script lang=\"ts\" setup>\nimport { computed, getCurrentInstance, onMounted, ref } from 'vue'\nimport { addUnit, objToStyle, uuid } from '../common/util'\nimport { resizeProps } from './types'\n\nconst props = defineProps(resizeProps)\nconst emit = defineEmits(['resize'])\n\nconst expandScrollTop = ref<number>(0)\nconst shrinkScrollTop = ref<number>(0)\nconst expandScrollLeft = ref<number>(0)\nconst shrinkScrollLeft = ref<number>(0)\nconst height = ref<number>(0)\nconst width = ref<number>(0)\nconst scrollEventCount = ref<number>(0)\n\nconst rootStyle = computed(() => {\n  const style: Record<string, string | number> = {\n    width: addUnit(width.value),\n    height: addUnit(height.value)\n  }\n  return `${objToStyle(style)}${props.customStyle}`\n})\nlet onScrollHandler = () => {}\nconst { proxy } = getCurrentInstance() as any\n\nconst resizeId = ref<string>(`resize${uuid()}`)\n\nonMounted(() => {\n  // 初始化数据获取\n  const query = uni.createSelectorQuery().in(proxy).select(`#${resizeId.value}`).boundingClientRect()\n  query.exec(([res]) => {\n    // 闭包记录容器高度\n    let lastHeight = res.height\n    let lastWidth = res.width\n    // 立即填充父容器高宽\n    height.value = lastHeight\n    width.value = lastWidth\n    // 监听滚动事件\n    onScrollHandler = () => {\n      const query = uni.createSelectorQuery().in(proxy).select(`#${resizeId.value}`).boundingClientRect()\n      query.exec(([res]) => {\n        // 前两次滚动事件被触发，说明 created 的修改已渲染，通知用户代码当前容器大小\n        if (scrollEventCount.value++ === 0) {\n          const result: Record<string, string | number> = {}\n          ;['bottom', 'top', 'left', 'right', 'height', 'width'].forEach((propName) => {\n            result[propName] = res[propName]\n          })\n          emit('resize', result)\n        }\n        // 滚动条拉到底部会触发两次多余的事件，屏蔽掉。\n        if (scrollEventCount.value < 3) return\n        // 手动设置父容器高宽，防止父容器坍塌\n        // 滚动完，重新获取容器新的高度\n        const newHeight = res.height\n        const newWidth = res.width\n        // 立即填充父容器高宽\n        height.value = newHeight\n        width.value = newWidth\n        // 宽高都改变时，只需要触发一次 size 事件\n        const emitStack: number[] = []\n        if (newHeight !== lastHeight) {\n          lastHeight = newHeight\n          emitStack.push(1)\n        }\n        if (newWidth !== lastWidth) {\n          lastWidth = newWidth\n          emitStack.push(1)\n        }\n        if (emitStack.length !== 0) {\n          const result: Record<string, any> = {}\n          ;['bottom', 'top', 'left', 'right', 'height', 'width'].forEach((propName) => {\n            result[propName] = res[propName]\n          })\n          emit('resize', result)\n        }\n        // 滚动条拉到底部（如果使用 nextTick 效果更佳）\n        scrollToBottom({\n          lastWidth: lastWidth,\n          lastHeight: lastHeight\n        })\n      })\n    }\n    // 滚动条拉到底部（如果使用 nextTick 效果更佳）\n    scrollToBottom({\n      lastWidth: lastWidth,\n      lastHeight: lastHeight\n    })\n  })\n})\n\nfunction scrollToBottom({ lastWidth, lastHeight }: { lastWidth: number; lastHeight: number }) {\n  expandScrollTop.value = 100000 + lastHeight\n  shrinkScrollTop.value = 3 * height.value + lastHeight\n  expandScrollLeft.value = 100000 + lastWidth\n  shrinkScrollLeft.value = 3 * width.value + lastWidth\n}\n</script>\n<style lang=\"scss\" scoped>\n@import './index.scss';\n</style>\n","import { baseProps, makeNumberProp } from '../common/props'\n\nexport const stickyProps = {\n  ...baseProps,\n  /**\n   * 层级\n   */\n  zIndex: makeNumberProp(1),\n  /**\n   * 吸顶距离\n   */\n  offsetTop: makeNumberProp(0)\n}\n","/*\n * @Author: weisheng\n * @Date: 2024-04-08 22:34:01\n * @LastEditTime: 2024-06-01 16:04:56\n * @LastEditors: weisheng\n * @Description:\n * @FilePath: /wot-design-uni/src/uni_modules/wot-design-uni/components/wd-sticky-box/types.ts\n * 记得注释\n */\nimport type { ComponentInternalInstance, InjectionKey } from 'vue'\n\nexport type stickyBoxProvide = {\n  boxStyle: {\n    height: number // 高度\n    width: number // 宽度\n  }\n  observerForChild: (child: ComponentInternalInstance) => void // 监听子组件\n}\n\nexport const STICKY_BOX_KEY: InjectionKey<stickyBoxProvide> = Symbol('wd-sticky-box')\n","<template>\n  <view :style=\"`${rootStyle};display: inline-block;`\">\n    <view :class=\"`wd-sticky ${customClass}`\" :style=\"stickyStyle\" :id=\"styckyId\">\n      <view class=\"wd-sticky__container\" :style=\"containerStyle\">\n        <wd-resize @resize=\"handleResize\" custom-style=\"display: inline-block;\">\n          <slot />\n        </wd-resize>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script lang=\"ts\">\nexport default {\n  name: 'wd-sticky',\n  options: {\n    addGlobalClass: true,\n    virtualHost: true,\n    styleIsolation: 'shared'\n  }\n}\n</script>\n\n<script lang=\"ts\" setup>\nimport wdResize from '../wd-resize/wd-resize.vue'\nimport { computed, getCurrentInstance, reactive, ref, type CSSProperties } from 'vue'\nimport { addUnit, getRect, objToStyle, pause, uuid } from '../common/util'\nimport { stickyProps } from './types'\nimport { useParent } from '../composables/useParent'\nimport { STICKY_BOX_KEY } from '../wd-sticky-box/types'\n\nconst props = defineProps(stickyProps)\nconst styckyId = ref<string>(`wd-sticky${uuid()}`)\nconst observerList = ref<UniApp.IntersectionObserver[]>([])\n\nconst stickyState = reactive({\n  position: 'absolute',\n  boxLeaved: false,\n  top: 0,\n  height: 0,\n  width: 0,\n  state: ''\n})\n\nconst { parent: stickyBox } = useParent(STICKY_BOX_KEY)\n\nconst { proxy } = getCurrentInstance() as any\n\nconst rootStyle = computed(() => {\n  const style: CSSProperties = {\n    'z-index': props.zIndex,\n    height: addUnit(stickyState.height),\n    width: addUnit(stickyState.width)\n  }\n  if (!stickyState.boxLeaved) {\n    style['position'] = 'relative'\n  }\n  return `${objToStyle(style)}${props.customStyle}`\n})\n\nconst stickyStyle = computed(() => {\n  const style: CSSProperties = {\n    'z-index': props.zIndex,\n    height: addUnit(stickyState.height),\n    width: addUnit(stickyState.width)\n  }\n  if (!stickyState.boxLeaved) {\n    style['position'] = 'relative'\n  }\n  return `${objToStyle(style)}`\n})\n\nconst containerStyle = computed(() => {\n  const style: CSSProperties = {\n    position: stickyState.position as 'static' | 'relative' | 'absolute' | 'sticky' | 'fixed',\n    top: addUnit(stickyState.top)\n  }\n  return objToStyle(style)\n})\n\nconst innerOffsetTop = computed(() => {\n  let top: number = 0\n\n  // H5端，导航栏为普通元素，需要将组件移动到导航栏的下边沿\n  // H5的导航栏高度为44px\n  top = 44\n\n\n  return top + props.offsetTop\n})\n\n/**\n * 清除对当前组件的监听\n */\nfunction clearObserver() {\n  while (observerList.value.length !== 0) {\n    observerList.value.pop()!.disconnect()\n  }\n}\n/**\n * 添加对当前组件的监听\n */\nfunction createObserver() {\n  const observer = uni.createIntersectionObserver(proxy, { thresholds: [0, 0.5] })\n  observerList.value.push(observer)\n  return observer\n}\n/**\n *  当前内容高度发生变化时重置监听\n */\nasync function handleResize(detail: any) {\n  stickyState.width = detail.width\n  stickyState.height = detail.height\n  await pause()\n  observerContentScroll()\n  if (!stickyBox || !stickyBox.observerForChild) return\n  stickyBox.observerForChild(proxy)\n}\n/**\n *  监听吸顶元素滚动事件\n */\nfunction observerContentScroll() {\n  if (stickyState.height === 0 && stickyState.width === 0) return\n  const offset = innerOffsetTop.value + stickyState.height\n  clearObserver()\n  createObserver()\n    .relativeToViewport({\n      top: -offset\n    })\n    .observe(`#${styckyId.value}`, (result) => {\n      handleRelativeTo(result)\n    })\n  getRect(`#${styckyId.value}`, false, proxy).then((res) => {\n\n    // H5端，查询节点信息未计算导航栏高度\n    res.bottom = Number(res.bottom) + 44\n\n    if (Number(res.bottom) <= offset) handleRelativeTo({ boundingClientRect: res })\n  })\n}\n/**\n * @description 根据位置进行吸顶\n */\nfunction handleRelativeTo({ boundingClientRect }: any) {\n  // sticky 高度大于或等于 wd-sticky-box，使用 wd-sticky-box 无任何意义\n  if (stickyBox && stickyBox.boxStyle && stickyState.height >= stickyBox.boxStyle.height) {\n    stickyState.position = 'absolute'\n    stickyState.top = 0\n    return\n  }\n\n  let isStycky = boundingClientRect.top <= innerOffsetTop.value\n\n  isStycky = boundingClientRect.top < innerOffsetTop.value\n\n\n  if (isStycky) {\n    stickyState.state = 'sticky'\n    stickyState.boxLeaved = false\n    stickyState.position = 'fixed'\n    stickyState.top = innerOffsetTop.value\n  } else {\n    stickyState.state = 'normal'\n    stickyState.boxLeaved = false\n    stickyState.position = 'absolute'\n    stickyState.top = 0\n  }\n}\n\n/**\n * 设置位置\n * @param setboxLeaved\n * @param setPosition\n * @param setTop\n */\nfunction setPosition(boxLeaved: boolean, position: string, top: number) {\n  stickyState.boxLeaved = boxLeaved\n  stickyState.position = position\n  stickyState.top = top\n}\n\ndefineExpose({\n  setPosition,\n  stickyState,\n  offsetTop: props.offsetTop\n})\n</script>\n<style lang=\"scss\" scoped>\n@import './index.scss';\n</style>\n","<template>\n  <view style=\"position: relative\">\n    <view :class=\"`wd-sticky-box ${props.customClass}`\" :style=\"customStyle\" :id=\"styckyBoxId\">\n      <wd-resize @resize=\"handleResize\">\n        <slot />\n      </wd-resize>\n    </view>\n  </view>\n</template>\n\n<script lang=\"ts\">\nexport default {\n  name: 'wd-sticky-box',\n  options: {\n    addGlobalClass: true,\n    // virtualHost: true,\n    styleIsolation: 'shared'\n  }\n}\n</script>\n\n<script lang=\"ts\" setup>\nimport wdResize from '../wd-resize/wd-resize.vue'\nimport { getCurrentInstance, onBeforeMount, reactive, ref } from 'vue'\nimport { getRect, uuid } from '../common/util'\nimport { baseProps } from '../common/props'\nimport { STICKY_BOX_KEY } from './types'\nimport { useChildren } from '../composables/useChildren'\n\nconst props = defineProps(baseProps)\n\nconst styckyBoxId = ref<string>(`wd-sticky-box${uuid()}`)\n\nconst observerMap = ref<Map<any, any>>(new Map())\n\nconst boxStyle = reactive({\n  height: 0,\n  width: 0\n})\n\nconst { proxy } = getCurrentInstance() as any\n\nconst { children: stickyList, linkChildren } = useChildren(STICKY_BOX_KEY)\nlinkChildren({\n  boxStyle: boxStyle,\n  observerForChild\n})\n\nonBeforeMount(() => {\n  observerMap.value = new Map()\n})\n\n/**\n * 容器大小变化后重新监听sticky组件与box组件的交叉状态\n * @param detail\n */\nfunction handleResize(detail: any) {\n  // 相对的容器大小改变后，同步设置 wd-sticky-box 的大小\n  boxStyle.width = detail.width\n  boxStyle.height = detail.height\n  // wd-sticky-box 大小变化时，重新监听所有吸顶元素\n  const temp = observerMap.value\n  observerMap.value = new Map()\n  for (const [uid] of temp) {\n    const child = stickyList.find((sticky) => {\n      return sticky.$.uid === uid\n    })\n    observerForChild(child)\n  }\n  temp.forEach((observer) => {\n    observer.disconnect()\n  })\n  temp.clear()\n}\n/**\n * 删除对指定sticky的监听\n * @param child 指定的子组件\n */\nfunction deleteObserver(child: any) {\n  const observer = observerMap.value.get(child.$.uid)\n  if (!observer) return\n  observer.disconnect()\n  observerMap.value.delete(child.$.uid)\n}\n/**\n * 针对指定sticky添加监听\n * @param child 指定的子组件\n */\nfunction createObserver(child: any) {\n  const observer = uni.createIntersectionObserver(proxy, { thresholds: [0, 0.5] })\n  observerMap.value.set(child.$.uid, observer)\n  return observer\n}\n/**\n * 监听子组件\n * @param child 子组件\n */\nfunction observerForChild(child: any) {\n  deleteObserver(child)\n  const observer = createObserver(child)\n  const exposed = child.$.exposed\n  let offset = exposed.stickyState.height + exposed.offsetTop\n\n  // H5端，导航栏为普通元素，需要将组件移动到导航栏的下边沿\n  // H5的导航栏高度为44px\n  offset = offset + 44\n\n\n  if (boxStyle.height <= exposed.stickyState.height) {\n    exposed.setPosition(false, 'absolute', 0)\n  }\n  observer.relativeToViewport({ top: -offset }).observe(`#${styckyBoxId.value}`, (result) => {\n    handleRelativeTo(exposed, result)\n  })\n  // 当子组件默认处于边界外且永远不会进入边界内时，需要手动调用一次\n  getRect(`#${styckyBoxId.value}`, false, proxy)\n    .then((res) => {\n\n      // H5端，查询节点信息未计算导航栏高度\n      res.bottom = Number(res.bottom) + 44\n\n      if (Number(res.bottom) <= offset) handleRelativeTo(exposed, { boundingClientRect: res })\n    })\n    .catch((res) => {\n      console.log(res)\n    })\n}\n/**\n *  监听容器组件\n * @param {Object} exposed wd-sticky实例暴露出的事件\n * @param {Object} boundingClientRect 边界信息\n */\nfunction handleRelativeTo(exposed: any, { boundingClientRect }: any) {\n  let childOffsetTop = exposed.offsetTop\n\n  // H5端，导航栏为普通元素，需要将组件移动到导航栏的下边沿\n  // H5的导航栏高度为44px\n  childOffsetTop = childOffsetTop + 44\n\n  const offset = exposed.stickyState.height + childOffsetTop\n  let isAbsolute = boundingClientRect.bottom <= offset\n\n  isAbsolute = boundingClientRect.bottom < offset\n\n  if (isAbsolute) {\n    exposed.setPosition(true, 'absolute', boundingClientRect.height - exposed.stickyState.height)\n  } else if (boundingClientRect.top <= offset && !isAbsolute) {\n    if (exposed.stickyState.state === 'normal') return\n    exposed.setPosition(false, 'fixed', childOffsetTop)\n  }\n}\n</script>\n<style lang=\"scss\" scoped>\n@import './index.scss';\n</style>\n","<template>\n  <template v-if=\"sticky\">\n    <wd-sticky-box>\n      <view\n        :class=\"`wd-tabs ${customClass} ${innerSlidable ? 'is-slide' : ''} ${mapNum < children.length && mapNum !== 0 ? 'is-map' : ''}`\"\n        :style=\"customStyle\"\n      >\n        <wd-sticky :offset-top=\"offsetTop\">\n          <view class=\"wd-tabs__nav wd-tabs__nav--sticky\">\n            <view class=\"wd-tabs__nav--wrap\">\n              <scroll-view :scroll-x=\"innerSlidable\" scroll-with-animation :scroll-left=\"state.scrollLeft\">\n                <view class=\"wd-tabs__nav-container\">\n                  <view\n                    @click=\"handleSelect(index)\"\n                    v-for=\"(item, index) in children\"\n                    :key=\"index\"\n                    :class=\"`wd-tabs__nav-item  ${state.activeIndex === index ? 'is-active' : ''} ${item.disabled ? 'is-disabled' : ''}`\"\n                    :style=\"state.activeIndex === index ? (color ? 'color:' + color : '') : inactiveColor ? 'color:' + inactiveColor : ''\"\n                  >\n                    <wd-badge v-if=\"item.badgeProps\" v-bind=\"item.badgeProps\">\n                      <text class=\"wd-tabs__nav-item-text\">{{ item.title }}</text>\n                    </wd-badge>\n                    <text v-else class=\"wd-tabs__nav-item-text\">{{ item.title }}</text>\n\n                    <view class=\"wd-tabs__line wd-tabs__line--inner\" v-if=\"state.activeIndex === index && state.useInnerLine\"></view>\n                  </view>\n                  <view class=\"wd-tabs__line\" :style=\"state.lineStyle\"></view>\n                </view>\n              </scroll-view>\n            </view>\n            <view class=\"wd-tabs__map\" v-if=\"mapNum < children.length && mapNum !== 0\">\n              <view :class=\"`wd-tabs__map-btn  ${state.animating ? 'is-open' : ''}`\" @click=\"toggleMap\">\n                <view :class=\"`wd-tabs__map-arrow  ${state.animating ? 'is-open' : ''}`\">\n                  <wd-icon name=\"arrow-down\" />\n                </view>\n              </view>\n              <view class=\"wd-tabs__map-header\" :style=\"`${state.mapShow ? '' : 'display:none;'}  ${state.animating ? 'opacity:1;' : ''}`\">\n                {{ mapTitle || translate('all') }}\n              </view>\n              <view :class=\"`wd-tabs__map-body  ${state.animating ? 'is-open' : ''}`\" :style=\"state.mapShow ? '' : 'display:none'\">\n                <view class=\"wd-tabs__map-nav-item\" v-for=\"(item, index) in children\" :key=\"index\" @click=\"handleSelect(index)\">\n                  <view\n                    :class=\"`wd-tabs__map-nav-btn ${state.activeIndex === index ? 'is-active' : ''}  ${item.disabled ? 'is-disabled' : ''}`\"\n                    :style=\"\n                      state.activeIndex === index\n                        ? color\n                          ? 'color:' + color + ';border-color:' + color\n                          : ''\n                        : inactiveColor\n                        ? 'color:' + inactiveColor\n                        : ''\n                    \"\n                  >\n                    {{ item.title }}\n                  </view>\n                </view>\n              </view>\n            </view>\n          </view>\n        </wd-sticky>\n\n        <view class=\"wd-tabs__container\" @touchstart=\"onTouchStart\" @touchmove=\"onTouchMove\" @touchend=\"onTouchEnd\" @touchcancel=\"onTouchEnd\">\n          <view :class=\"['wd-tabs__body', animated ? 'is-animated' : '']\" :style=\"bodyStyle\">\n            <slot />\n          </view>\n        </view>\n\n        <view\n          class=\"wd-tabs__mask\"\n          :style=\"`${state.mapShow ? '' : 'display:none;'} ${state.animating ? 'opacity:1;' : ''}`\"\n          @click=\"toggleMap\"\n        ></view>\n      </view>\n    </wd-sticky-box>\n  </template>\n\n  <template v-else>\n    <view :class=\"`wd-tabs ${customClass} ${innerSlidable ? 'is-slide' : ''} ${mapNum < children.length && mapNum !== 0 ? 'is-map' : ''}`\">\n      <view class=\"wd-tabs__nav\">\n        <view class=\"wd-tabs__nav--wrap\">\n          <scroll-view :scroll-x=\"innerSlidable\" scroll-with-animation :scroll-left=\"state.scrollLeft\">\n            <view class=\"wd-tabs__nav-container\">\n              <view\n                v-for=\"(item, index) in children\"\n                @click=\"handleSelect(index)\"\n                :key=\"index\"\n                :class=\"`wd-tabs__nav-item ${state.activeIndex === index ? 'is-active' : ''} ${item.disabled ? 'is-disabled' : ''}`\"\n                :style=\"state.activeIndex === index ? (color ? 'color:' + color : '') : inactiveColor ? 'color:' + inactiveColor : ''\"\n              >\n                <wd-badge custom-class=\"wd-tabs__nav-item-badge\" v-if=\"item.badgeProps\" v-bind=\"item.badgeProps\">\n                  <text class=\"wd-tabs__nav-item-text\">{{ item.title }}</text>\n                </wd-badge>\n                <text v-else class=\"wd-tabs__nav-item-text\">{{ item.title }}</text>\n                <view class=\"wd-tabs__line wd-tabs__line--inner\" v-if=\"state.activeIndex === index && state.useInnerLine\"></view>\n              </view>\n              <view class=\"wd-tabs__line\" :style=\"state.lineStyle\"></view>\n            </view>\n          </scroll-view>\n        </view>\n        <view class=\"wd-tabs__map\" v-if=\"mapNum < children.length && mapNum !== 0\">\n          <view class=\"wd-tabs__map-btn\" @click=\"toggleMap\">\n            <view :class=\"`wd-tabs__map-arrow ${state.animating ? 'is-open' : ''}`\">\n              <wd-icon name=\"arrow-down\" />\n            </view>\n          </view>\n          <view class=\"wd-tabs__map-header\" :style=\"`${state.mapShow ? '' : 'display:none;'}  ${state.animating ? 'opacity:1;' : ''}`\">\n            {{ mapTitle || translate('all') }}\n          </view>\n          <view :class=\"`wd-tabs__map-body ${state.animating ? 'is-open' : ''}`\" :style=\"state.mapShow ? '' : 'display:none'\">\n            <view class=\"wd-tabs__map-nav-item\" v-for=\"(item, index) in children\" :key=\"index\" @click=\"handleSelect(index)\">\n              <view :class=\"`wd-tabs__map-nav-btn ${state.activeIndex === index ? 'is-active' : ''}  ${item.disabled ? 'is-disabled' : ''}`\">\n                {{ item.title }}\n              </view>\n            </view>\n          </view>\n        </view>\n      </view>\n\n      <view class=\"wd-tabs__container\" @touchstart=\"onTouchStart\" @touchmove=\"onTouchMove\" @touchend=\"onTouchEnd\" @touchcancel=\"onTouchEnd\">\n        <view :class=\"['wd-tabs__body', animated ? 'is-animated' : '']\" :style=\"bodyStyle\">\n          <slot />\n        </view>\n      </view>\n\n      <view class=\"wd-tabs__mask\" :style=\"`${state.mapShow ? '' : 'display:none;'}  ${state.animating ? 'opacity:1' : ''}`\" @click=\"toggleMap\"></view>\n    </view>\n  </template>\n</template>\n<script lang=\"ts\">\nexport default {\n  name: 'wd-tabs',\n  options: {\n    addGlobalClass: true,\n    virtualHost: true,\n    styleIsolation: 'shared'\n  }\n}\n</script>\n<script lang=\"ts\" setup>\nimport wdIcon from '../wd-icon/wd-icon.vue'\nimport wdSticky from '../wd-sticky/wd-sticky.vue'\nimport wdStickyBox from '../wd-sticky-box/wd-sticky-box.vue'\nimport { computed, getCurrentInstance, onMounted, watch, nextTick, reactive, type CSSProperties, type ComponentInstance } from 'vue'\nimport { addUnit, checkNumRange, debounce, getRect, isDef, isNumber, isString, objToStyle } from '../common/util'\nimport { useTouch } from '../composables/useTouch'\nimport { TABS_KEY, tabsProps, type TabsExpose } from './types'\nimport { useChildren } from '../composables/useChildren'\nimport { useTranslate } from '../composables/useTranslate'\n\nconst $item = '.wd-tabs__nav-item'\nconst $itemText = '.wd-tabs__nav-item-text'\nconst $container = '.wd-tabs__nav-container'\n\nconst props = defineProps(tabsProps)\nconst emit = defineEmits(['change', 'disabled', 'click', 'update:modelValue'])\n\nconst { translate } = useTranslate('tabs')\n\nconst state = reactive({\n  activeIndex: 0, // 选中值的索引，默认第一个\n  lineStyle: 'display:none;', // 激活项边框线样式\n  useInnerLine: false, // 是否使用内部激活项边框线，当外部激活下划线未成功渲染时显示内部定位的\n  inited: false, // 是否初始化\n  animating: false, // 是否动画中\n  mapShow: false, // map的开关\n  scrollLeft: 0 // scroll-view偏移量\n})\n\nconst { children, linkChildren } = useChildren(TABS_KEY)\nlinkChildren({ state, props })\n\nconst { proxy } = getCurrentInstance() as any\n\nconst touch = useTouch()\n\nconst innerSlidable = computed(() => {\n  return props.slidable === 'always' || children.length > props.slidableNum\n})\n\nconst bodyStyle = computed(() => {\n  if (!props.animated) {\n    return ''\n  }\n\n  return objToStyle({\n    left: -100 * state.activeIndex + '%',\n    'transition-duration': props.duration + 'ms',\n    '-webkit-transition-duration': props.duration + 'ms'\n  })\n})\n\nconst getTabName = (tab: ComponentInstance<any>, index: number) => {\n  return isDef(tab.name) ? tab.name : index\n}\n\n/**\n * 更新激活项\n * @param value 激活值\n * @param init 是否已初始化\n * @param setScroll // 是否设置scroll-view滚动\n */\nconst updateActive = (value: number | string = 0, init: boolean = false, setScroll: boolean = true) => {\n  // 没有tab子元素，不执行任何操作\n  if (children.length === 0) return\n\n  value = getActiveIndex(value)\n  // 被禁用，不执行任何操作\n  if (children[value].disabled) return\n  state.activeIndex = value\n  if (setScroll) {\n    updateLineStyle(init === false)\n    scrollIntoView()\n  }\n  setActiveTab()\n}\n\n/**\n * @description 修改选中的tab Index\n * @param {String |Number } value - radio绑定的value或者tab索引，默认值0\n * @param {Boolean } init - 是否伴随初始化操作\n */\nconst setActive = debounce(updateActive, 100, { leading: true })\n\nwatch(\n  () => props.modelValue,\n  (newValue) => {\n    if (!isNumber(newValue) && !isString(newValue)) {\n      console.error('[wot ui] error(wd-tabs): the type of value should be number or string')\n    }\n    // 保证不为非空字符串，小于0的数字\n    if (newValue === '' || !isDef(newValue)) {\n      // eslint-disable-next-line quotes\n      console.error(\"[wot ui] error(wd-tabs): tabs's value cannot be '' null or undefined\")\n    }\n    if (typeof newValue === 'number' && newValue < 0) {\n      // eslint-disable-next-line quotes\n      console.error(\"[wot ui] error(wd-tabs): tabs's value cannot be less than zero\")\n    }\n  },\n  {\n    immediate: true,\n    deep: true\n  }\n)\n\nwatch(\n  () => props.modelValue,\n  (newValue) => {\n    const index = getActiveIndex(newValue)\n    setActive(newValue, false, index !== state.activeIndex)\n  },\n  {\n    immediate: false,\n    deep: true\n  }\n)\n\nwatch(\n  () => children.length,\n  () => {\n    if (state.inited) {\n      nextTick(() => {\n        setActive(props.modelValue)\n      })\n    }\n  }\n)\n\nwatch(\n  () => props.slidableNum,\n  (newValue) => {\n    checkNumRange(newValue, 'slidableNum')\n  }\n)\n\nwatch(\n  () => props.mapNum,\n  (newValue) => {\n    checkNumRange(newValue, 'mapNum')\n  }\n)\n\nonMounted(() => {\n  state.inited = true\n  nextTick(() => {\n    updateActive(props.modelValue, true)\n    state.useInnerLine = true\n  })\n})\n\nfunction toggleMap() {\n  if (state.mapShow) {\n    state.animating = false\n    setTimeout(() => {\n      state.mapShow = false\n    }, 300)\n  } else {\n    state.mapShow = true\n    setTimeout(() => {\n      state.animating = true\n    }, 100)\n  }\n}\n\n/**\n * 更新 underline的偏移量\n * @param animation 是否开启动画\n */\nasync function updateLineStyle(animation: boolean = true) {\n  if (!state.inited) return\n  const { autoLineWidth, lineWidth, lineHeight } = props\n  try {\n    const lineStyle: CSSProperties = {}\n    if (isDef(lineWidth)) {\n      lineStyle.width = addUnit(lineWidth)\n    } else {\n      if (autoLineWidth) {\n        const textRects = await getRect($itemText, true, proxy)\n        const textWidth = Number(textRects[state.activeIndex].width)\n        lineStyle.width = addUnit(textWidth)\n      }\n    }\n    if (isDef(lineHeight)) {\n      lineStyle.height = addUnit(lineHeight)\n      lineStyle.borderRadius = `calc(${addUnit(lineHeight)} / 2)`\n    }\n    const rects = await getRect($item, true, proxy)\n    const rect = rects[state.activeIndex]\n    let left = rects.slice(0, state.activeIndex).reduce((prev, curr) => prev + Number(curr.width), 0) + Number(rect.width) / 2\n    if (left) {\n      lineStyle.transform = `translateX(${left}px) translateX(-50%)`\n      if (animation) {\n        lineStyle.transition = 'width 0.3s cubic-bezier(0.4, 0, 0.2, 1), transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);'\n      }\n      state.useInnerLine = false\n      state.lineStyle = objToStyle(lineStyle)\n    }\n  } catch (error) {\n    console.error('[wot ui] error(wd-tabs): update line style failed', error)\n  }\n}\n\nfunction setActiveTab() {\n  if (!state.inited) return\n  const name = getTabName(children[state.activeIndex], state.activeIndex)\n  if (name !== props.modelValue) {\n    emit('change', {\n      index: state.activeIndex,\n      name: name\n    })\n    emit('update:modelValue', name)\n  }\n}\n\nfunction scrollIntoView() {\n  if (!state.inited) return\n  Promise.all([getRect($item, true, proxy), getRect($container, false, proxy)]).then(([navItemsRects, navRect]) => {\n    // 选中元素\n    const selectItem = navItemsRects[state.activeIndex]\n    // 选中元素之前的节点的宽度总和\n    const offsetLeft = (navItemsRects as any).slice(0, state.activeIndex).reduce((prev: any, curr: any) => prev + curr.width, 0)\n    // scroll-view滑动到selectItem的偏移量\n    const left = offsetLeft - ((navRect as any).width - Number(selectItem.width)) / 2\n    if (left === state.scrollLeft) {\n      state.scrollLeft = left + Math.random() / 10000\n    } else {\n      state.scrollLeft = left\n    }\n  })\n}\n\n/**\n * @description 单击tab的处理\n * @param index\n */\nfunction handleSelect(index: number) {\n  if (index === undefined) return\n  const { disabled } = children[index]\n  const name = getTabName(children[index], index)\n\n  if (disabled) {\n    emit('disabled', {\n      index,\n      name\n    })\n    return\n  }\n  state.mapShow && toggleMap()\n  setActive(index)\n  emit('click', {\n    index,\n    name\n  })\n}\nfunction onTouchStart(event: any) {\n  if (!props.swipeable) return\n  touch.touchStart(event)\n}\nfunction onTouchMove(event: any) {\n  if (!props.swipeable) return\n  touch.touchMove(event)\n}\nfunction onTouchEnd() {\n  if (!props.swipeable) return\n  const { direction, deltaX, offsetX } = touch\n  const minSwipeDistance = 50\n  if (direction.value === 'horizontal' && offsetX.value >= minSwipeDistance) {\n    if (deltaX.value > 0 && state.activeIndex !== 0) {\n      setActive(state.activeIndex - 1)\n    } else if (deltaX.value < 0 && state.activeIndex !== children.length - 1) {\n      setActive(state.activeIndex + 1)\n    }\n  }\n}\nfunction getActiveIndex(value: number | string) {\n  // name代表的索引超过了children长度的边界，自动用0兜底\n  if (isNumber(value) && value >= children.length) {\n    // eslint-disable-next-line prettier/prettier\n    console.error('[wot ui] warning(wd-tabs): the type of tabs\\' value is Number shouldn\\'t be less than its children')\n    value = 0\n  }\n  // 如果是字符串直接匹配，匹配不到用0兜底\n  if (isString(value)) {\n    const index = children.findIndex((item) => item.name === value)\n    value = index === -1 ? 0 : index\n  }\n\n  return value\n}\n\ndefineExpose<TabsExpose>({\n  setActive,\n  scrollIntoView,\n  updateLineStyle\n})\n</script>\n<style lang=\"scss\" scoped>\n@import './index.scss';\n</style>\n","import type { ExtractPropTypes } from 'vue'\nimport { baseProps, makeBooleanProp, makeStringProp } from '../common/props'\n\nexport type TagType = 'default' | 'primary' | 'success' | 'warning' | 'danger'\n\nexport const tagProps = {\n  ...baseProps,\n\n  /**\n   * 是否开启图标插槽\n   * 类型：boolean\n   * 默认值：false\n   */\n  useIconSlot: makeBooleanProp(false),\n\n  /**\n   * 标签类型\n   * 类型：string\n   * 可选值：'default' / 'primary' / 'danger' / 'warning' / 'success'\n   * 默认值：'default'\n   */\n  type: makeStringProp<TagType>('default'),\n\n  /**\n   * 左侧图标\n   * 类型：string\n   * 默认值：空字符串\n   */\n  icon: makeStringProp(''),\n\n  /**\n   * 是否可关闭（只对圆角类型支持）\n   * 类型：boolean\n   * 默认值：false\n   */\n  closable: makeBooleanProp(false),\n\n  /**\n   * 幽灵类型\n   * 类型：boolean\n   * 默认值：false\n   */\n  plain: makeBooleanProp(false),\n\n  /**\n   * 是否为新增标签\n   * 类型：boolean\n   * 默认值：false\n   */\n  dynamic: makeBooleanProp(false),\n\n  /**\n   * 文字颜色\n   * 类型：string\n   * 默认值：空字符串\n   */\n  color: makeStringProp(''),\n\n  /**\n   * 背景色和边框色\n   * 类型：string\n   * 默认值：空字符串\n   */\n  bgColor: makeStringProp(''),\n\n  /**\n   * 圆角类型\n   * 类型：boolean\n   * 默认值：false\n   */\n  round: makeBooleanProp(false),\n\n  /**\n   * 标记类型\n   * 类型：boolean\n   * 默认值：false\n   */\n  mark: makeBooleanProp(false)\n}\n\nexport type TagProps = ExtractPropTypes<typeof tagProps>\n","<template>\n  <view :class=\"rootClass\" :style=\"rootStyle\" @click=\"handleClick\">\n    <view v-if=\"useIconSlot\" class=\"wd-tag__icon\">\n      <slot name=\"icon\" />\n    </view>\n    <wd-icon v-else-if=\"icon\" :name=\"icon\" custom-class=\"wd-tag__icon\" />\n    <view class=\"wd-tag__text\" :style=\"textStyle\">\n      <slot />\n    </view>\n    <view class=\"wd-tag__close\" v-if=\"closable && round\" @click.stop=\"handleClose\">\n      <wd-icon name=\"error-fill\" />\n    </view>\n    <input\n      v-if=\"dynamicInput && dynamic\"\n      class=\"wd-tag__add-text\"\n      :placeholder=\"translate('placeholder')\"\n      type=\"text\"\n      :focus=\"true\"\n      v-model=\"dynamicValue\"\n      @blur=\"handleBlur\"\n      @confirm=\"handleConfirm\"\n    />\n    <view v-else-if=\"dynamic\" class=\"wd-tag__text\" :style=\"textStyle\" @click.stop=\"handleAdd\">\n      <slot name=\"add\" v-if=\"$slots.add\"></slot>\n      <template v-else>\n        <wd-icon name=\"add\" custom-class=\"wd-tag__add wd-tag__icon\" />\n        <text>{{ translate('add') }}</text>\n      </template>\n    </view>\n  </view>\n</template>\n\n<script lang=\"ts\">\nexport default {\n  name: 'wd-tag',\n  options: {\n    addGlobalClass: true,\n    virtualHost: true,\n    styleIsolation: 'shared'\n  }\n}\n</script>\n<script lang=\"ts\" setup>\nimport wdIcon from '../wd-icon/wd-icon.vue'\nimport { objToStyle } from '../common/util'\nimport { computed, ref, watch } from 'vue'\nimport { useTranslate } from '../composables/useTranslate'\nimport { tagProps } from './types'\n\nconst props = defineProps(tagProps)\nconst emit = defineEmits(['click', 'close', 'confirm'])\n\nconst { translate } = useTranslate('tag')\n\nconst tagClass = ref<string>('')\nconst dynamicValue = ref<string>('')\nconst dynamicInput = ref<boolean>(false)\n\nwatch(\n  [() => props.useIconSlot, () => props.icon, () => props.plain, () => props.dynamic, () => props.round, () => props.mark],\n  () => {\n    computeTagClass()\n  },\n  { deep: true, immediate: true }\n)\n\nwatch(\n  () => props.type,\n  (newValue) => {\n    if (!newValue) return\n    // type: 'primary', 'danger', 'warning', 'success'\n    const type = ['primary', 'danger', 'warning', 'success', 'default']\n    if (type.indexOf(newValue) === -1) console.error(`type must be one of ${type.toString()}`)\n    computeTagClass()\n  },\n  { deep: true, immediate: true }\n)\n\nwatch(\n  () => dynamicInput.value,\n  () => {\n    computeTagClass()\n  },\n  { deep: true, immediate: true }\n)\n\nconst rootClass = computed(() => {\n  return `wd-tag ${props.customClass} ${tagClass.value}`\n})\n\nconst rootStyle = computed(() => {\n  const rootStyle: Record<string, any> = {}\n  if (!props.plain && props.bgColor) {\n    rootStyle['background'] = props.bgColor\n  }\n  if (props.bgColor) {\n    rootStyle['border-color'] = props.bgColor\n  }\n  return `${objToStyle(rootStyle)}${props.customStyle}`\n})\n\nconst textStyle = computed(() => {\n  const textStyle: Record<string, any> = {}\n  if (props.color) {\n    textStyle['color'] = props.color\n  }\n  return objToStyle(textStyle)\n})\n\nfunction computeTagClass() {\n  const { type, plain, round, mark, dynamic, icon, useIconSlot } = props\n  let tagClassList: string[] = []\n  type && tagClassList.push(`is-${type}`)\n  plain && tagClassList.push('is-plain')\n  round && tagClassList.push('is-round')\n  mark && tagClassList.push('is-mark')\n  dynamic && tagClassList.push('is-dynamic')\n  dynamicInput.value && tagClassList.push('is-dynamic-input')\n  if (icon || useIconSlot) tagClassList.push('is-icon')\n  tagClass.value = tagClassList.join(' ')\n}\n\nfunction handleClick(event: any) {\n  emit('click', event)\n}\nfunction handleClose(event: any) {\n  emit('close', event)\n}\nfunction handleAdd() {\n  dynamicInput.value = true\n  dynamicValue.value = ''\n}\nfunction handleBlur() {\n  setDynamicInput()\n}\nfunction handleConfirm(event: any) {\n  setDynamicInput()\n  emit('confirm', {\n    value: event.detail.value\n  })\n}\nfunction setDynamicInput() {\n  dynamicInput.value = false\n}\n</script>\n<style lang=\"scss\" scoped>\n@import './index.scss';\n</style>\n","import { computed } from 'vue'\nimport { dayjs } from '../common/dayjs'\nimport { isArray, isFunction, padZero } from '../common/util'\nimport { useTranslate } from '../composables/useTranslate'\nimport type { CalendarDayType, CalendarItem, CalendarTimeFilter, CalendarType } from './types'\nconst { translate } = useTranslate('calendar-view')\n\nconst weeks = computed(() => {\n  return [\n    translate('weeks.sun'),\n    translate('weeks.mon'),\n    translate('weeks.tue'),\n    translate('weeks.wed'),\n    translate('weeks.thu'),\n    translate('weeks.fri'),\n    translate('weeks.sat')\n  ]\n})\n\n/**\n * 比较两个时间的日期是否相等\n * @param {timestamp} date1\n * @param {timestamp} date2\n */\nexport function compareDate(date1: number, date2: number | null) {\n  const dateValue1 = new Date(date1)\n  const dateValue2 = new Date(date2 || '')\n\n  const year1 = dateValue1.getFullYear()\n  const year2 = dateValue2.getFullYear()\n  const month1 = dateValue1.getMonth()\n  const month2 = dateValue2.getMonth()\n  const day1 = dateValue1.getDate()\n  const day2 = dateValue2.getDate()\n\n  if (year1 === year2) {\n    if (month1 === month2) {\n      return day1 === day2 ? 0 : day1 > day2 ? 1 : -1\n    }\n    return month1 === month2 ? 0 : month1 > month2 ? 1 : -1\n  }\n\n  return year1 > year2 ? 1 : -1\n}\n\n/**\n * 判断是否是范围选择\n * @param {string} type\n */\nexport function isRange(type: CalendarType) {\n  return type.indexOf('range') > -1\n}\n\n/**\n * 比较两个日期的月份是否相等\n * @param {timestamp} date1\n * @param {timestamp} date2\n */\nexport function compareMonth(date1: number, date2: number) {\n  const dateValue1 = new Date(date1)\n  const dateValue2 = new Date(date2)\n\n  const year1 = dateValue1.getFullYear()\n  const year2 = dateValue2.getFullYear()\n  const month1 = dateValue1.getMonth()\n  const month2 = dateValue2.getMonth()\n\n  if (year1 === year2) {\n    return month1 === month2 ? 0 : month1 > month2 ? 1 : -1\n  }\n\n  return year1 > year2 ? 1 : -1\n}\n\n/**\n * 比较两个日期的年份是否一致\n * @param {timestamp} date1\n * @param {timestamp} date2\n */\nexport function compareYear(date1: number, date2: number) {\n  const dateValue1 = new Date(date1)\n  const dateValue2 = new Date(date2)\n\n  const year1 = dateValue1.getFullYear()\n  const year2 = dateValue2.getFullYear()\n\n  return year1 === year2 ? 0 : year1 > year2 ? 1 : -1\n}\n\n/**\n * 获取一个月的最后一天\n * @param {number} year\n * @param {number} month\n */\nexport function getMonthEndDay(year: number, month: number) {\n  return 32 - new Date(year, month - 1, 32).getDate()\n}\n\n/**\n * 格式化年月\n * @param {timestamp} date\n */\nexport function formatMonthTitle(date: number) {\n  return dayjs(date).format(translate('monthTitle'))\n}\n\n/**\n * 根据下标获取星期\n * @param {number} index\n */\nexport function getWeekLabel(index: number) {\n  if (index >= 7) {\n    index = index % 7\n  }\n\n  return weeks.value[index]\n}\n\n/**\n * 格式化年份\n * @param {timestamp} date\n */\nexport function formatYearTitle(date: number) {\n  return dayjs(date).format(translate('yearTitle'))\n}\n\n/**\n * 根据最小日期和最大日期获取这之间总共有几个月份\n * @param {timestamp} minDate\n * @param {timestamp} maxDate\n */\nexport function getMonths(minDate: number, maxDate: number) {\n  const months: number[] = []\n  const month = new Date(minDate)\n  month.setDate(1)\n\n  while (compareMonth(month.getTime(), maxDate) < 1) {\n    months.push(month.getTime())\n    month.setMonth(month.getMonth() + 1)\n  }\n\n  return months\n}\n\n/**\n * 根据最小日期和最大日期获取这之间总共有几年\n * @param {timestamp} minDate\n * @param {timestamp} maxDate\n */\nexport function getYears(minDate: number, maxDate: number) {\n  const years: number[] = []\n  const year = new Date(minDate)\n  year.setMonth(0)\n  year.setDate(1)\n\n  while (compareYear(year.getTime(), maxDate) < 1) {\n    years.push(year.getTime())\n    year.setFullYear(year.getFullYear() + 1)\n  }\n\n  return years\n}\n\n/**\n * 获取一个日期所在周的第一天和最后一天\n * @param {timestamp} date\n */\nexport function getWeekRange(date: number, firstDayOfWeek: number) {\n  if (firstDayOfWeek >= 7) {\n    firstDayOfWeek = firstDayOfWeek % 7\n  }\n\n  const dateValue = new Date(date)\n  dateValue.setHours(0, 0, 0, 0)\n  const year = dateValue.getFullYear()\n  const month = dateValue.getMonth()\n  const day = dateValue.getDate()\n  const week = dateValue.getDay()\n\n  const weekStart = new Date(year, month, day - ((7 + week - firstDayOfWeek) % 7))\n  const weekEnd = new Date(year, month, day + 6 - ((7 + week - firstDayOfWeek) % 7))\n\n  return [weekStart.getTime(), weekEnd.getTime()]\n}\n\n/**\n * 获取日期偏移量\n * @param {timestamp} date1\n * @param {timestamp} date2\n */\nexport function getDayOffset(date1: number, date2: number) {\n  return (date1 - date2) / (24 * 60 * 60 * 1000) + 1\n}\n\n/**\n * 获取偏移日期\n * @param {timestamp} date\n * @param {number} offset\n */\nexport function getDayByOffset(date: number, offset: number) {\n  const dateValue = new Date(date)\n  dateValue.setDate(dateValue.getDate() + offset)\n\n  return dateValue.getTime()\n}\n\nexport const getPrevDay = (date: number) => getDayByOffset(date, -1)\nexport const getNextDay = (date: number) => getDayByOffset(date, 1)\n\n/**\n * 获取月份偏移量\n * @param {timestamp} date1\n * @param {timestamp} date2\n */\nexport function getMonthOffset(date1: number, date2: number) {\n  const dateValue1 = new Date(date1)\n  const dateValue2 = new Date(date2)\n\n  const year1 = dateValue1.getFullYear()\n  const year2 = dateValue2.getFullYear()\n  let month1 = dateValue1.getMonth()\n  const month2 = dateValue2.getMonth()\n\n  month1 = (year1 - year2) * 12 + month1\n\n  return month1 - month2 + 1\n}\n\n/**\n * 获取偏移月份\n * @param {timestamp} date\n * @param {number} offset\n */\nexport function getMonthByOffset(date: number, offset: number) {\n  const dateValue = new Date(date)\n  dateValue.setMonth(dateValue.getMonth() + offset)\n\n  return dateValue.getTime()\n}\n\n/**\n * 获取默认时间，格式化为数组\n * @param {array|string|null} defaultTime\n */\nexport function getDefaultTime(defaultTime: string[] | string | null) {\n  if (isArray(defaultTime)) {\n    const startTime = (defaultTime[0] || '00:00:00').split(':').map((item: string) => {\n      return parseInt(item)\n    })\n    const endTime = (defaultTime[1] || '00:00:00').split(':').map((item) => {\n      return parseInt(item)\n    })\n    return [startTime, endTime]\n  } else {\n    const time = (defaultTime || '00:00:00').split(':').map((item) => {\n      return parseInt(item)\n    })\n\n    return [time, time]\n  }\n}\n\n/**\n * 根据默认时间获取日期\n * @param {timestamp} date\n * @param {array} defaultTime\n */\nexport function getDateByDefaultTime(date: number, defaultTime: number[]) {\n  const dateValue = new Date(date)\n  dateValue.setHours(defaultTime[0])\n  dateValue.setMinutes(defaultTime[1])\n  dateValue.setSeconds(defaultTime[2])\n\n  return dateValue.getTime()\n}\n\n/**\n * 获取经过 iteratee 格式化后的长度为 n 的数组\n * @param {number} n\n * @param {function} iteratee\n */\nconst times = (n: number, iteratee: (index: number) => CalendarItem) => {\n  let index: number = -1\n  const result: CalendarItem[] = Array(n < 0 ? 0 : n)\n  while (++index < n) {\n    result[index] = iteratee(index)\n  }\n  return result\n}\n\n/**\n * 获取时分秒\n * @param {timestamp}} date\n */\nconst getTime = (date: number) => {\n  const dateValue = new Date(date)\n  return [dateValue.getHours(), dateValue.getMinutes(), dateValue.getSeconds()]\n}\n\n/**\n * 根据最小最大日期获取时间数据，用于填入picker\n * @param {*} param0\n */\nexport function getTimeData({\n  date,\n  minDate,\n  maxDate,\n  isHideSecond,\n  filter\n}: {\n  date: number\n  minDate: number\n  maxDate: number\n  isHideSecond: boolean\n  filter?: CalendarTimeFilter\n}) {\n  const compareMin = compareDate(date, minDate)\n  const compareMax = compareDate(date, maxDate)\n\n  let minHour = 0\n  let maxHour = 23\n  let minMinute = 0\n  let maxMinute = 59\n  let minSecond = 0\n  let maxSecond = 59\n\n  if (compareMin === 0) {\n    const minTime = getTime(minDate)\n    const currentTime = getTime(date)\n\n    minHour = minTime[0]\n    if (minTime[0] === currentTime[0]) {\n      minMinute = minTime[1]\n\n      if (minTime[1] === currentTime[1]) {\n        minSecond = minTime[2]\n      }\n    }\n  }\n\n  if (compareMax === 0) {\n    const maxTime = getTime(maxDate)\n    const currentTime = getTime(date)\n\n    maxHour = maxTime[0]\n    if (maxTime[0] === currentTime[0]) {\n      maxMinute = maxTime[1]\n\n      if (maxTime[1] === currentTime[1]) {\n        maxSecond = maxTime[2]\n      }\n    }\n  }\n\n  let columns: CalendarItem[][] = []\n  let hours = times(24, (index) => {\n    return {\n      label: translate('hour', padZero(index)),\n      value: index,\n      disabled: index < minHour || index > maxHour\n    }\n  })\n  let minutes = times(60, (index) => {\n    return {\n      label: translate('minute', padZero(index)),\n      value: index,\n      disabled: index < minMinute || index > maxMinute\n    }\n  })\n  let seconds: CalendarItem[] = []\n  if (filter && isFunction(filter)) {\n    hours = filter({\n      type: 'hour',\n      values: hours\n    })\n    minutes = filter({\n      type: 'minute',\n      values: minutes\n    })\n  }\n\n  if (!isHideSecond) {\n    seconds = times(60, (index) => {\n      return {\n        label: translate('second', padZero(index)),\n        value: index,\n        disabled: index < minSecond || index > maxSecond\n      }\n    })\n    if (filter && isFunction(filter)) {\n      seconds = filter({\n        type: 'second',\n        values: seconds\n      })\n    }\n  }\n\n  columns = isHideSecond ? [hours, minutes] : [hours, minutes, seconds]\n\n  return columns\n}\n\n/**\n * 获取当前是第几周\n * @param {timestamp} date\n */\nexport function getWeekNumber(date: number | Date) {\n  date = new Date(date)\n  date.setHours(0, 0, 0, 0)\n  // Thursday in current week decides the year.\n  date.setDate(date.getDate() + 3 - ((date.getDay() + 6) % 7))\n  // January 4 is always in week 1.\n  const week = new Date(date.getFullYear(), 0, 4)\n  // Adjust to Thursday in week 1 and count number of weeks from date to week 1.\n  // Rounding should be fine for Daylight Saving Time. Its shift should never be more than 12 hours.\n  return 1 + Math.round(((date.getTime() - week.getTime()) / 86400000 - 3 + ((week.getDay() + 6) % 7)) / 7)\n}\n\nexport function getItemClass(monthType: CalendarDayType, value: number | null | (number | null)[], type: CalendarType) {\n  const classList = ['is-' + monthType]\n\n  if (type.indexOf('range') > -1 && isArray(value)) {\n    if (!value || !value[1]) {\n      classList.push('is-without-end')\n    }\n  }\n\n  return classList.join(' ')\n}\n","import type { PropType } from 'vue'\nimport { makeBooleanProp, makeRequiredProp } from '../../common/props'\nimport type { CalendarFormatter, CalendarType } from '../types'\n\nexport const yearProps = {\n  type: makeRequiredProp(String as PropType<CalendarType>),\n  date: makeRequiredProp(Number),\n  value: makeRequiredProp([Number, Array] as PropType<number | (number | null)[] | null>),\n  minDate: makeRequiredProp(Number),\n  maxDate: makeRequiredProp(Number),\n  // 日期格式化函数\n  formatter: Function as PropType<CalendarFormatter>,\n  maxRange: Number,\n  rangePrompt: String,\n  allowSameDay: makeBooleanProp(false),\n  defaultTime: {\n    type: [Array] as PropType<Array<number[]>>\n  },\n  showTitle: makeBooleanProp(true)\n}\n","<template>\n  <wd-toast selector=\"wd-year\" />\n\n  <view class=\"wd-year year\">\n    <view class=\"wd-year__title\" v-if=\"showTitle\">{{ yearTitle(date) }}</view>\n    <view class=\"wd-year__months\">\n      <view\n        v-for=\"(item, index) in months\"\n        :key=\"index\"\n        :class=\"`wd-year__month ${item.disabled ? 'is-disabled' : ''} ${item.isLastRow ? 'is-last-row' : ''} ${\n          item.type ? monthTypeClass(item.type) : ''\n        }`\"\n        @click=\"handleDateClick(index)\"\n      >\n        <view class=\"wd-year__month-top\">{{ item.topInfo }}</view>\n        <view class=\"wd-year__month-text\">{{ getMonthLabel(item.date) }}</view>\n        <view class=\"wd-year__month-bottom\">{{ item.bottomInfo }}</view>\n      </view>\n    </view>\n  </view>\n</template>\n<script lang=\"ts\">\nexport default {\n  options: {\n    addGlobalClass: true,\n    virtualHost: true,\n    styleIsolation: 'shared'\n  }\n}\n</script>\n\n<script lang=\"ts\" setup>\nimport wdToast from '../../wd-toast/wd-toast.vue'\nimport { computed, ref, watch } from 'vue'\nimport { deepClone, isArray, isFunction } from '../../common/util'\nimport { compareMonth, formatYearTitle, getDateByDefaultTime, getItemClass, getMonthByOffset, getMonthOffset } from '../utils'\nimport { useToast } from '../../wd-toast'\nimport { useTranslate } from '../../composables/useTranslate'\nimport { dayjs } from '../../common/dayjs'\nimport { yearProps } from './types'\nimport type { CalendarDayItem, CalendarDayType } from '../types'\n\nconst props = defineProps(yearProps)\nconst emit = defineEmits(['change'])\n\nconst toast = useToast('wd-year')\nconst { translate } = useTranslate('calendar-view')\n\nconst months = ref<CalendarDayItem[]>([])\n\nconst monthTypeClass = computed(() => {\n  return (monthType: CalendarDayType) => {\n    return getItemClass(monthType, props.value, props.type)\n  }\n})\n\nconst yearTitle = computed(() => {\n  return (date: number) => {\n    return formatYearTitle(date)\n  }\n})\n\nwatch(\n  [() => props.type, () => props.date, () => props.value, () => props.minDate, () => props.maxDate, () => props.formatter],\n  () => {\n    setMonths()\n  },\n  {\n    deep: true,\n    immediate: true\n  }\n)\n\nfunction getMonthLabel(date: number) {\n  return dayjs(date).format(translate('month', date))\n}\n\nfunction setMonths() {\n  const monthList: CalendarDayItem[] = []\n  const date = new Date(props.date)\n  const year = date.getFullYear()\n  const value = props.value\n\n  if (props.type.indexOf('range') > -1 && value && !isArray(value)) {\n    console.error('[wot-design] value should be array when type is range')\n    return\n  }\n\n  for (let month = 0; month < 12; month++) {\n    const date = new Date(year, month, 1).getTime()\n    let type: CalendarDayType = getMonthType(date)\n    if (!type && compareMonth(date, Date.now()) === 0) {\n      type = 'current'\n    }\n    const monthObj = getFormatterDate(date, month, type)\n    monthList.push(monthObj)\n  }\n\n  months.value = deepClone(monthList)\n}\nfunction getMonthType(date: number) {\n  if (props.type === 'monthrange' && isArray(props.value)) {\n    const [startDate, endDate] = props.value || []\n\n    if (startDate && compareMonth(date, startDate) === 0) {\n      if (endDate && compareMonth(startDate, endDate) === 0) {\n        return 'same'\n      }\n      return 'start'\n    } else if (endDate && compareMonth(date, endDate) === 0) {\n      return 'end'\n    } else if (startDate && endDate && compareMonth(date, startDate) === 1 && compareMonth(date, endDate) === -1) {\n      return 'middle'\n    } else {\n      return ''\n    }\n  } else {\n    if (props.value && compareMonth(date, props.value as number) === 0) {\n      return 'selected'\n    } else {\n      return ''\n    }\n  }\n}\nfunction handleDateClick(index: number) {\n  const date = months.value[index]\n\n  if (date.disabled) return\n\n  switch (props.type) {\n    case 'month':\n      handleMonthChange(date)\n      break\n    case 'monthrange':\n      handleMonthRangeChange(date)\n      break\n    default:\n      handleMonthChange(date)\n  }\n}\nfunction getDate(date: number) {\n  return props.defaultTime && props.defaultTime.length > 0 ? getDateByDefaultTime(date, props.defaultTime[0]) : date\n}\nfunction handleMonthChange(date: CalendarDayItem) {\n  if (date.type !== 'selected') {\n    emit('change', {\n      value: getDate(date.date)\n    })\n  }\n}\nfunction handleMonthRangeChange(date: CalendarDayItem) {\n  let value: (number | null)[] = []\n  const [startDate, endDate] = isArray(props.value) ? props.value || [] : []\n  const compare = compareMonth(date.date, startDate!)\n\n  // 禁止选择同个日期\n  if (!props.allowSameDay && !endDate && compare === 0) return\n\n  if (startDate && !endDate && compare > -1) {\n    if (props.maxRange && getMonthOffset(date.date, startDate) > props.maxRange) {\n      const maxEndDate = getMonthByOffset(startDate, props.maxRange - 1)\n      value = [startDate, getDate(maxEndDate)]\n      toast.show({\n        msg: props.rangePrompt || translate('rangePromptMonth', props.maxRange)\n      })\n    } else {\n      value = [startDate, getDate(date.date)]\n    }\n  } else {\n    value = [getDate(date.date), null]\n  }\n  emit('change', {\n    value\n  })\n}\n\nfunction getFormatterDate(date: number, month: number, type?: CalendarDayType) {\n  let monthObj: CalendarDayItem = {\n    date: date,\n    text: month + 1,\n    topInfo: '',\n    bottomInfo: '',\n    type,\n    disabled: compareMonth(date, props.minDate) === -1 || compareMonth(date, props.maxDate) === 1,\n    isLastRow: month >= 8\n  }\n\n  if (props.formatter) {\n    if (isFunction(props.formatter)) {\n      monthObj = props.formatter(monthObj)\n    } else {\n      console.error('[wot-design] error(wd-calendar-view): the formatter prop of wd-calendar-view should be a function')\n    }\n  }\n\n  return monthObj\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import './index.scss';\n</style>\n","import type { ComponentPublicInstance, ExtractPropTypes, PropType } from 'vue'\nimport { makeBooleanProp, makeRequiredProp } from '../../common/props'\nimport type { CalendarFormatter, CalendarType } from '../types'\n\n/**\n * 月份信息\n */\nexport interface YearInfo {\n  date: number\n  height: number\n}\n\nexport const yearPanelProps = {\n  type: makeRequiredProp(String as PropType<CalendarType>),\n  value: makeRequiredProp([Number, Array] as PropType<number | (number | null)[] | null>),\n  minDate: makeRequiredProp(Number),\n  maxDate: makeRequiredProp(Number),\n  formatter: Function as PropType<CalendarFormatter>,\n  maxRange: Number,\n  rangePrompt: String,\n  allowSameDay: makeBooleanProp(false),\n  showPanelTitle: makeBooleanProp(false),\n  defaultTime: {\n    type: [Array] as PropType<Array<number[]>>\n  },\n  panelHeight: makeRequiredProp(Number)\n}\n\nexport type YearPanelProps = ExtractPropTypes<typeof yearPanelProps>\n\nexport type YearPanelExpose = {\n  /**\n   * 使当前日期或者选中日期滚动到可视区域\n   */\n  scrollIntoView: () => void\n}\n\nexport type YearPanelInstance = ComponentPublicInstance<YearPanelProps, YearPanelExpose>\n","<template>\n  <view class=\"wd-year-panel\">\n    <view v-if=\"showPanelTitle\" class=\"wd-year-panel__title\">{{ title }}</view>\n    <scroll-view class=\"wd-year-panel__container\" :style=\"`height: ${scrollHeight}px`\" scroll-y @scroll=\"yearScroll\" :scroll-top=\"scrollTop\">\n      <view v-for=\"(item, index) in years\" :key=\"index\" :id=\"`year${index}`\">\n        <year\n          :type=\"type\"\n          :date=\"item.date\"\n          :value=\"value\"\n          :min-date=\"minDate\"\n          :max-date=\"maxDate\"\n          :max-range=\"maxRange\"\n          :formatter=\"formatter\"\n          :range-prompt=\"rangePrompt\"\n          :allow-same-day=\"allowSameDay\"\n          :default-time=\"defaultTime\"\n          :showTitle=\"index !== 0\"\n          @change=\"handleDateChange\"\n        />\n      </view>\n    </scroll-view>\n  </view>\n</template>\n<script lang=\"ts\">\nexport default {\n  options: {\n    addGlobalClass: true,\n    virtualHost: true,\n    styleIsolation: 'shared'\n  }\n}\n</script>\n\n<script lang=\"ts\" setup>\nimport { computed, ref, onMounted } from 'vue'\nimport { compareYear, formatYearTitle, getYears } from '../utils'\nimport { isArray, isNumber, pause } from '../../common/util'\nimport Year from '../year/year.vue'\nimport { yearPanelProps, type YearInfo, type YearPanelExpose } from './types'\n\nconst props = defineProps(yearPanelProps)\nconst emit = defineEmits(['change'])\n\nconst scrollTop = ref<number>(0) // 滚动位置\nconst scrollIndex = ref<number>(0) // 当前显示的年份索引\n\n// 滚动区域的高度\nconst scrollHeight = computed(() => {\n  const scrollHeight: number = props.panelHeight + (props.showPanelTitle ? 26 : 16)\n  return scrollHeight\n})\n\n// 年份信息\nconst years = computed<YearInfo[]>(() => {\n  return getYears(props.minDate, props.maxDate).map((year, index) => {\n    return {\n      date: year,\n      height: index === 0 ? 200 : 245\n    }\n  })\n})\n\n// 标题\nconst title = computed(() => {\n  return formatYearTitle(years.value[scrollIndex.value].date)\n})\n\nonMounted(() => {\n  scrollIntoView()\n})\n\nasync function scrollIntoView() {\n  await pause()\n  let activeDate: number | null = null\n  if (isArray(props.value)) {\n    activeDate = props.value![0]\n  } else if (isNumber(props.value)) {\n    activeDate = props.value\n  }\n\n  if (!activeDate) {\n    activeDate = Date.now()\n  }\n\n  let top: number = 0\n  for (let index = 0; index < years.value.length; index++) {\n    if (compareYear(years.value[index].date, activeDate) === 0) {\n      break\n    }\n    top += years.value[index] ? Number(years.value[index].height) : 0\n  }\n  scrollTop.value = 0\n  if (top > 0) {\n    await pause()\n    scrollTop.value = top + 45\n  }\n}\n\nconst yearScroll = (event: { detail: { scrollTop: number } }) => {\n  if (years.value.length <= 1) {\n    return\n  }\n  const scrollTop = Math.max(0, event.detail.scrollTop)\n  doSetSubtitle(scrollTop)\n}\n\n/**\n * 设置小标题\n * scrollTop 滚动条位置\n */\nfunction doSetSubtitle(scrollTop: number) {\n  let height: number = 0 // 月份高度和\n  for (let index = 0; index < years.value.length; index++) {\n    height = height + years.value[index].height\n    if (scrollTop < height) {\n      scrollIndex.value = index\n      return\n    }\n  }\n}\n\nfunction handleDateChange({ value }: { value: number[] }) {\n  emit('change', {\n    value\n  })\n}\n\ndefineExpose<YearPanelExpose>({\n  scrollIntoView\n})\n</script>\n\n<style lang=\"scss\" scoped>\n@import './index.scss';\n</style>\n","import type { PropType } from 'vue'\nimport { makeBooleanProp, makeRequiredProp } from '../../common/props'\nimport type { CalendarFormatter, CalendarType } from '../types'\n\nexport const monthProps = {\n  type: makeRequiredProp(String as PropType<CalendarType>),\n  date: makeRequiredProp(Number),\n  value: makeRequiredProp([Number, Array, null] as PropType<number | (number | null)[] | null>),\n  minDate: makeRequiredProp(Number),\n  maxDate: makeRequiredProp(Number),\n  firstDayOfWeek: makeRequiredProp(Number),\n  formatter: Function as PropType<CalendarFormatter>,\n  maxRange: Number,\n  rangePrompt: String,\n  allowSameDay: makeBooleanProp(false),\n  defaultTime: {\n    type: [Array] as PropType<Array<number[]>>\n  },\n  showTitle: makeBooleanProp(true)\n}\n","<template>\n  <view>\n    <wd-toast selector=\"wd-month\" />\n    <view class=\"month\">\n      <view class=\"wd-month\">\n        <view class=\"wd-month__title\" v-if=\"showTitle\">{{ monthTitle(date) }}</view>\n        <view class=\"wd-month__days\">\n          <view\n            v-for=\"(item, index) in days\"\n            :key=\"index\"\n            :class=\"`wd-month__day ${item.disabled ? 'is-disabled' : ''} ${item.isLastRow ? 'is-last-row' : ''} ${\n              item.type ? dayTypeClass(item.type) : ''\n            }`\"\n            :style=\"index === 0 ? firstDayStyle : ''\"\n            @click=\"handleDateClick(index)\"\n          >\n            <view class=\"wd-month__day-container\">\n              <view class=\"wd-month__day-top\">{{ item.topInfo }}</view>\n              <view class=\"wd-month__day-text\">\n                {{ item.text }}\n              </view>\n              <view class=\"wd-month__day-bottom\">{{ item.bottomInfo }}</view>\n            </view>\n          </view>\n        </view>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script lang=\"ts\">\nexport default {\n  options: {\n    addGlobalClass: true,\n    virtualHost: true,\n    styleIsolation: 'shared'\n  }\n}\n</script>\n\n<script lang=\"ts\" setup>\nimport wdToast from '../../wd-toast/wd-toast.vue'\nimport { computed, ref, watch, type CSSProperties } from 'vue'\nimport {\n  compareDate,\n  formatMonthTitle,\n  getDateByDefaultTime,\n  getDayByOffset,\n  getDayOffset,\n  getItemClass,\n  getMonthEndDay,\n  getNextDay,\n  getPrevDay,\n  getWeekRange\n} from '../utils'\nimport { useToast } from '../../wd-toast'\nimport { deepClone, isArray, isFunction, objToStyle } from '../../common/util'\nimport { useTranslate } from '../../composables/useTranslate'\nimport type { CalendarDayItem, CalendarDayType } from '../types'\nimport { monthProps } from './types'\n\nconst props = defineProps(monthProps)\nconst emit = defineEmits(['change'])\n\nconst { translate } = useTranslate('calendar-view')\n\nconst days = ref<Array<CalendarDayItem>>([])\n\nconst toast = useToast('wd-month')\n\nconst offset = computed(() => {\n  const firstDayOfWeek = props.firstDayOfWeek >= 7 ? props.firstDayOfWeek % 7 : props.firstDayOfWeek\n  const offset = (7 + new Date(props.date).getDay() - firstDayOfWeek) % 7\n  return offset\n})\n\nconst dayTypeClass = computed(() => {\n  return (monthType: CalendarDayType) => {\n    return getItemClass(monthType, props.value, props.type)\n  }\n})\n\nconst monthTitle = computed(() => {\n  return (date: number) => {\n    return formatMonthTitle(date)\n  }\n})\n\nconst firstDayStyle = computed(() => {\n  const dayStyle: CSSProperties = {}\n  dayStyle.marginLeft = `${(100 / 7) * offset.value}%`\n  return objToStyle(dayStyle)\n})\n\nconst isLastRow = (date: number) => {\n  const currentDate = new Date(date)\n  const currentDay = currentDate.getDate()\n  const daysInMonth = getMonthEndDay(currentDate.getFullYear(), currentDate.getMonth() + 1)\n  const totalDaysShown = offset.value + daysInMonth\n  const totalRows = Math.ceil(totalDaysShown / 7)\n  return Math.ceil((offset.value + currentDay) / 7) === totalRows\n}\nwatch(\n  [() => props.type, () => props.date, () => props.value, () => props.minDate, () => props.maxDate, () => props.formatter],\n  () => {\n    setDays()\n  },\n  {\n    deep: true,\n    immediate: true\n  }\n)\n\nfunction setDays() {\n  const dayList: Array<CalendarDayItem> = []\n  const date = new Date(props.date)\n  const year = date.getFullYear()\n  const month = date.getMonth()\n  const totalDay = getMonthEndDay(year, month + 1)\n  let value = props.value\n  if ((props.type === 'week' || props.type === 'weekrange') && value) {\n    value = getWeekValue()\n  }\n\n  for (let day = 1; day <= totalDay; day++) {\n    const date = new Date(year, month, day).getTime()\n    let type: CalendarDayType = getDayType(date, value as number | number[] | null)\n    if (!type && compareDate(date, Date.now()) === 0) {\n      type = 'current'\n    }\n    const dayObj = getFormatterDate(date, day, type)\n    dayList.push(dayObj)\n  }\n  days.value = dayList\n}\nfunction getDayType(date: number, value: number | number[] | null): CalendarDayType {\n  switch (props.type) {\n    case 'date':\n    case 'datetime':\n      return getDateType(date)\n    case 'dates':\n      return getDatesType(date)\n    case 'daterange':\n    case 'datetimerange':\n      return getDatetimeType(date, value)\n    case 'week':\n      return getWeektimeType(date, value)\n    case 'weekrange':\n      return getWeektimeType(date, value)\n    default:\n      return getDateType(date)\n  }\n}\nfunction getDateType(date: number): CalendarDayType {\n  if (props.value && compareDate(date, props.value as number) === 0) {\n    return 'selected'\n  }\n  return ''\n}\n\nfunction getDatesType(date: number): CalendarDayType {\n  const { value } = props\n  let type: CalendarDayType = ''\n\n  if (!isArray(value)) return type\n  const isSelected = (day: number) => {\n    return value.some((item) => compareDate(day, item) === 0)\n  }\n\n  if (isSelected(date)) {\n    const prevDay = getPrevDay(date)\n    const nextDay = getNextDay(date)\n    const prevSelected = isSelected(prevDay)\n    const nextSelected = isSelected(nextDay)\n    if (prevSelected && nextSelected) {\n      type = 'multiple-middle'\n    } else if (prevSelected) {\n      type = 'end'\n    } else if (nextSelected) {\n      type = 'start'\n    } else {\n      type = 'multiple-selected'\n    }\n  }\n\n  return type\n}\nfunction getDatetimeType(date: number, value: number | number[] | null) {\n  const [startDate, endDate] = isArray(value) ? value : []\n\n  if (startDate && compareDate(date, startDate) === 0) {\n    if (props.allowSameDay && endDate && compareDate(startDate, endDate) === 0) {\n      return 'same'\n    }\n    return 'start'\n  } else if (endDate && compareDate(date, endDate) === 0) {\n    return 'end'\n  } else if (startDate && endDate && compareDate(date, startDate) === 1 && compareDate(date, endDate) === -1) {\n    return 'middle'\n  } else {\n    return ''\n  }\n}\nfunction getWeektimeType(date: number, value: number | number[] | null) {\n  const [startDate, endDate] = isArray(value) ? value : []\n\n  if (startDate && compareDate(date, startDate) === 0) {\n    return 'start'\n  } else if (endDate && compareDate(date, endDate) === 0) {\n    return 'end'\n  } else if (startDate && endDate && compareDate(date, startDate) === 1 && compareDate(date, endDate) === -1) {\n    return 'middle'\n  } else {\n    return ''\n  }\n}\nfunction getWeekValue() {\n  if (props.type === 'week') {\n    return getWeekRange(props.value as number, props.firstDayOfWeek)\n  } else {\n    const [startDate, endDate] = (props.value as any) || []\n\n    if (startDate) {\n      const firstWeekRange = getWeekRange(startDate, props.firstDayOfWeek)\n\n      if (endDate) {\n        const endWeekRange = getWeekRange(endDate, props.firstDayOfWeek)\n\n        return [firstWeekRange[0], endWeekRange[1]]\n      } else {\n        return firstWeekRange\n      }\n    }\n\n    return []\n  }\n}\nfunction handleDateClick(index: number) {\n  const date = days.value[index]\n  switch (props.type) {\n    case 'date':\n    case 'datetime':\n      handleDateChange(date)\n      break\n    case 'dates':\n      handleDatesChange(date)\n      break\n    case 'daterange':\n    case 'datetimerange':\n      handleDateRangeChange(date)\n      break\n    case 'week':\n      handleWeekChange(date)\n      break\n    case 'weekrange':\n      handleWeekRangeChange(date)\n      break\n    default:\n      handleDateChange(date)\n  }\n}\nfunction getDate(date: number, isEnd: boolean = false) {\n  date = props.defaultTime && props.defaultTime.length > 0 ? getDateByDefaultTime(date, isEnd ? props.defaultTime[1] : props.defaultTime[0]) : date\n\n  if (date < props.minDate) return props.minDate\n\n  if (date > props.maxDate) return props.maxDate\n\n  return date\n}\n\nfunction handleDateChange(date: CalendarDayItem) {\n  if (date.disabled) return\n\n  if (date.type !== 'selected') {\n    emit('change', {\n      value: getDate(date.date),\n      type: 'start'\n    })\n  }\n}\nfunction handleDatesChange(date: CalendarDayItem) {\n  if (date.disabled) return\n  const currentValue = deepClone(isArray(props.value) ? props.value : [])\n  const dateIndex = currentValue.findIndex((item) => item && compareDate(item, date.date) === 0)\n  const value = dateIndex === -1 ? [...currentValue, getDate(date.date)] : currentValue.filter((_, index) => index !== dateIndex)\n  emit('change', { value })\n}\n\nfunction handleDateRangeChange(date: CalendarDayItem) {\n  if (date.disabled) return\n\n  let value: (number | null)[] = []\n  let type: CalendarDayType = ''\n  const [startDate, endDate] = deepClone(isArray(props.value) ? props.value : [])\n  const compare = compareDate(date.date, startDate)\n\n  // 禁止选择同个日期\n  if (!props.allowSameDay && compare === 0 && (props.type === 'daterange' || props.type === 'datetimerange') && !endDate) {\n    return\n  }\n\n  if (startDate && !endDate && compare > -1) {\n    // 不能选择超过最大范围的日期\n    if (props.maxRange && getDayOffset(date.date, startDate) > props.maxRange) {\n      const maxEndDate = getDayByOffset(startDate, props.maxRange - 1)\n      value = [startDate, getDate(maxEndDate, true)]\n      toast.show({\n        msg: props.rangePrompt || translate('rangePrompt', props.maxRange)\n      })\n    } else {\n      value = [startDate, getDate(date.date, true)]\n    }\n  } else if (props.type === 'datetimerange' && startDate && endDate) {\n    // 时间范围类型，且有开始时间和结束时间，需要支持重新点击开始日期和结束日期可以重新修改时间\n    if (compare === 0) {\n      type = 'start'\n      value = props.value as number[]\n    } else if (compareDate(date.date, endDate) === 0) {\n      type = 'end'\n      value = props.value as number[]\n    } else {\n      value = [getDate(date.date), null]\n    }\n  } else {\n    value = [getDate(date.date), null]\n  }\n\n  emit('change', {\n    value,\n    type: type || (value[1] ? 'end' : 'start')\n  })\n}\nfunction handleWeekChange(date: CalendarDayItem) {\n  const [weekStart] = getWeekRange(date.date, props.firstDayOfWeek)\n\n  // 周的第一天如果是禁用状态，则不可选中\n  if (getFormatterDate(weekStart, new Date(weekStart).getDate()).disabled) return\n\n  emit('change', {\n    value: getDate(weekStart) + 24 * 60 * 60 * 1000\n  })\n}\nfunction handleWeekRangeChange(date: CalendarDayItem) {\n  const [weekStartDate] = getWeekRange(date.date, props.firstDayOfWeek)\n\n  // 周的第一天如果是禁用状态，则不可选中\n  if (getFormatterDate(weekStartDate, new Date(weekStartDate).getDate()).disabled) return\n\n  let value: (number | null)[] = []\n  const [startDate, endDate] = deepClone(isArray(props.value) ? props.value : [])\n  const [startWeekStartDate] = startDate ? getWeekRange(startDate, props.firstDayOfWeek) : []\n  const compare = compareDate(weekStartDate, startWeekStartDate)\n\n  if (startDate && !endDate && compare > -1) {\n    if (!props.allowSameDay && compare === 0) return\n\n    value = [getDate(startWeekStartDate) + 24 * 60 * 60 * 1000, getDate(weekStartDate) + 24 * 60 * 60 * 1000]\n  } else {\n    value = [getDate(weekStartDate) + 24 * 60 * 60 * 1000, null]\n  }\n\n  emit('change', {\n    value\n  })\n}\nfunction getFormatterDate(date: number, day: string | number, type?: CalendarDayType) {\n  let dayObj: CalendarDayItem = {\n    date: date,\n    text: day,\n    topInfo: '',\n    bottomInfo: '',\n    type,\n    disabled: compareDate(date, props.minDate) === -1 || compareDate(date, props.maxDate) === 1,\n    isLastRow: isLastRow(date)\n  }\n  if (props.formatter) {\n    if (isFunction(props.formatter)) {\n      dayObj = props.formatter(dayObj)\n    } else {\n      console.error('[wot-design] error(wd-calendar-view): the formatter prop of wd-calendar-view should be a function')\n    }\n  }\n  return dayObj\n}\n</script>\n<style lang=\"scss\" scoped>\n@import './index.scss';\n</style>\n","import type { ComponentPublicInstance, ExtractPropTypes, PropType } from 'vue'\nimport { makeBooleanProp, makeRequiredProp } from '../../common/props'\nimport type { CalendarFormatter, CalendarTimeFilter, CalendarType } from '../types'\n\n/**\n * 月份信息\n */\nexport interface MonthInfo {\n  date: number\n  height: number\n}\n\nexport const monthPanelProps = {\n  type: makeRequiredProp(String as PropType<CalendarType>),\n  value: makeRequiredProp([Number, Array, null] as PropType<number | (number | null)[] | null>),\n  minDate: makeRequiredProp(Number),\n  maxDate: makeRequiredProp(Number),\n  firstDayOfWeek: makeRequiredProp(Number),\n  formatter: Function as PropType<CalendarFormatter>,\n  maxRange: Number,\n  rangePrompt: String,\n  allowSameDay: makeBooleanProp(false),\n  showPanelTitle: makeBooleanProp(false),\n  defaultTime: {\n    type: [Array] as PropType<Array<number[]>>\n  },\n  panelHeight: makeRequiredProp(Number),\n  // type 为 'datetime' 或 'datetimerange' 时有效，用于过滤时间选择器的数据\n  timeFilter: Function as PropType<CalendarTimeFilter>,\n  hideSecond: makeBooleanProp(false),\n  /**\n   * 是否在手指松开时立即触发picker-view的 change 事件。若不开启则会在滚动动画结束后触发 change 事件，1.2.25版本起提供，仅微信小程序和支付宝小程序支持。\n   */\n  immediateChange: makeBooleanProp(false)\n}\n\nexport type MonthPanelProps = ExtractPropTypes<typeof monthPanelProps>\n\nexport type MonthPanelTimeType = 'start' | 'end' | ''\n\nexport type MonthPanelExpose = {\n  /**\n   * 使当前日期或者选中日期滚动到可视区域\n   */\n  scrollIntoView: () => void\n}\n\nexport type MonthPanelInstance = ComponentPublicInstance<MonthPanelProps, MonthPanelExpose>\n","<template>\n  <view class=\"wd-month-panel\">\n    <view v-if=\"showPanelTitle\" class=\"wd-month-panel__title\">\n      {{ title }}\n    </view>\n    <view class=\"wd-month-panel__weeks\">\n      <view v-for=\"item in 7\" :key=\"item\" class=\"wd-month-panel__week\">{{ weekLabel(item + firstDayOfWeek) }}</view>\n    </view>\n    <scroll-view\n      :class=\"`wd-month-panel__container ${!!timeType ? 'wd-month-panel__container--time' : ''}`\"\n      :style=\"`height: ${scrollHeight}px`\"\n      scroll-y\n      @scroll=\"monthScroll\"\n      :scroll-top=\"scrollTop\"\n    >\n      <view v-for=\"(item, index) in months\" :key=\"index\" :id=\"`month${index}`\">\n        <month\n          :type=\"type\"\n          :date=\"item.date\"\n          :value=\"value\"\n          :min-date=\"minDate\"\n          :max-date=\"maxDate\"\n          :first-day-of-week=\"firstDayOfWeek\"\n          :formatter=\"formatter\"\n          :max-range=\"maxRange\"\n          :range-prompt=\"rangePrompt\"\n          :allow-same-day=\"allowSameDay\"\n          :default-time=\"defaultTime\"\n          :showTitle=\"index !== 0\"\n          @change=\"handleDateChange\"\n        />\n      </view>\n    </scroll-view>\n    <view v-if=\"timeType\" class=\"wd-month-panel__time\">\n      <view v-if=\"type === 'datetimerange'\" class=\"wd-month-panel__time-label\">\n        <view class=\"wd-month-panel__time-text\">{{ timeType === 'start' ? translate('startTime') : translate('endTime') }}</view>\n      </view>\n      <view class=\"wd-month-panel__time-picker\">\n        <wd-picker-view\n          v-if=\"timeData.length\"\n          v-model=\"timeValue\"\n          :columns=\"timeData\"\n          :columns-height=\"125\"\n          :immediate-change=\"immediateChange\"\n          @change=\"handleTimeChange\"\n          @pickstart=\"handlePickStart\"\n          @pickend=\"handlePickEnd\"\n        />\n      </view>\n    </view>\n  </view>\n</template>\n\n<script lang=\"ts\">\nexport default {\n  options: {\n    addGlobalClass: true,\n    virtualHost: true,\n    styleIsolation: 'shared'\n  }\n}\n</script>\n\n<script lang=\"ts\" setup>\nimport wdPickerView from '../../wd-picker-view/wd-picker-view.vue'\nimport { computed, ref, watch, onMounted } from 'vue'\nimport { debounce, isArray, isEqual, isNumber, pause } from '../../common/util'\nimport { compareMonth, formatMonthTitle, getMonthEndDay, getMonths, getTimeData, getWeekLabel } from '../utils'\nimport Month from '../month/month.vue'\nimport { monthPanelProps, type MonthInfo, type MonthPanelTimeType, type MonthPanelExpose } from './types'\nimport { useTranslate } from '../../composables/useTranslate'\nimport type { CalendarItem } from '../types'\n\nconst props = defineProps(monthPanelProps)\nconst emit = defineEmits(['change', 'pickstart', 'pickend'])\n\nconst { translate } = useTranslate('calendar-view')\n\nconst scrollTop = ref<number>(0) // 滚动位置\nconst scrollIndex = ref<number>(0) // 当前显示的月份索引\nconst timeValue = ref<number[]>([]) // 当前选中的时分秒\n\nconst timeType = ref<MonthPanelTimeType>('') // 当前时间类型，是开始还是结束\nconst innerValue = ref<string | number | (number | null)[]>('') // 内部保存一个值，用于判断新老值，避免监听器触发\n\nconst handleChange = debounce((value) => {\n  emit('change', {\n    value\n  })\n}, 50)\n\n// 时间picker的列数据\nconst timeData = computed<Array<CalendarItem[]>>(() => {\n  let timeColumns: Array<CalendarItem[]> = []\n  if (props.type === 'datetime' && isNumber(props.value)) {\n    const date = new Date(props.value)\n    date.setHours(timeValue.value[0])\n    date.setMinutes(timeValue.value[1])\n    date.setSeconds(props.hideSecond ? 0 : timeValue.value[2])\n    const dateTime = date.getTime()\n    timeColumns = getTime(dateTime) || []\n  } else if (isArray(props.value) && props.type === 'datetimerange') {\n    const [start, end] = props.value!\n    const dataValue = timeType.value === 'start' ? start : end\n    const date = new Date(dataValue || '')\n    date.setHours(timeValue.value[0])\n    date.setMinutes(timeValue.value[1])\n    date.setSeconds(props.hideSecond ? 0 : timeValue.value[2])\n    const dateTime = date.getTime()\n    const finalValue = [start, end]\n    if (timeType.value === 'start') {\n      finalValue[0] = dateTime\n    } else {\n      finalValue[1] = dateTime\n    }\n    timeColumns = getTime(finalValue, timeType.value) || []\n  }\n  return timeColumns\n})\n\n// 标题\nconst title = computed(() => {\n  return formatMonthTitle(months.value[scrollIndex.value].date)\n})\n\n// 周标题\nconst weekLabel = computed(() => {\n  return (index: number) => {\n    return getWeekLabel(index - 1)\n  }\n})\n\n// 滚动区域的高度\nconst scrollHeight = computed(() => {\n  const scrollHeight: number = timeType.value ? props.panelHeight - 125 : props.panelHeight\n  return scrollHeight\n})\n\n// 月份日期和月份高度\nconst months = computed<MonthInfo[]>(() => {\n  return getMonths(props.minDate, props.maxDate).map((month, index) => {\n    const offset = (7 + new Date(month).getDay() - props.firstDayOfWeek) % 7\n    const totalDay = getMonthEndDay(new Date(month).getFullYear(), new Date(month).getMonth() + 1)\n    const rows = Math.ceil((offset + totalDay) / 7)\n    return {\n      height: rows * 64 + (rows - 1) * 4 + (index === 0 ? 0 : 45), // 每行64px高度,除最后一行外每行加4px margin,加上标题45px\n      date: month\n    }\n  })\n})\n\nwatch(\n  () => props.type,\n  (val) => {\n    if (\n      (val === 'datetime' && props.value) ||\n      (val === 'datetimerange' && isArray(props.value) && props.value && props.value.length > 0 && props.value[0])\n    ) {\n      setTime(props.value, 'start')\n    }\n  },\n  {\n    deep: true,\n    immediate: true\n  }\n)\n\nwatch(\n  () => props.value,\n  (val) => {\n    if (isEqual(val, innerValue.value)) return\n\n    if ((props.type === 'datetime' && val) || (props.type === 'datetimerange' && val && isArray(val) && val.length > 0 && val[0])) {\n      setTime(val, 'start')\n    }\n  },\n  {\n    deep: true,\n    immediate: true\n  }\n)\n\nonMounted(() => {\n  scrollIntoView()\n})\n\n/**\n * 使当前日期或者选中日期滚动到可视区域\n */\nasync function scrollIntoView() {\n  // 等待渲染完毕\n  await pause()\n  let activeDate: number | null = 0\n  if (isArray(props.value)) {\n    // 对数组按时间排序,取第一个值\n    const sortedValue = [...props.value].sort((a, b) => (a || 0) - (b || 0))\n    activeDate = sortedValue[0]\n  } else if (isNumber(props.value)) {\n    activeDate = props.value\n  }\n\n  if (!activeDate) {\n    activeDate = Date.now()\n  }\n\n  let top: number = 0\n  let activeMonthIndex = -1\n  for (let index = 0; index < months.value.length; index++) {\n    if (compareMonth(months.value[index].date, activeDate) === 0) {\n      activeMonthIndex = index\n      // 找到选中月份后,计算选中日期在月份中的位置\n      const date = new Date(activeDate)\n      const day = date.getDate()\n      const firstDay = new Date(date.getFullYear(), date.getMonth(), 1)\n      const offset = (7 + firstDay.getDay() - props.firstDayOfWeek) % 7\n      const row = Math.floor((offset + day - 1) / 7)\n      // 每行高度64px,每行加4px margin\n      top += row * 64 + row * 4\n      break\n    }\n    top += months.value[index] ? Number(months.value[index].height) : 0\n  }\n  scrollTop.value = 0\n  if (top > 0) {\n    await pause()\n    // 如果不是第一个月才加45\n    scrollTop.value = top + (activeMonthIndex > 0 ? 45 : 0)\n  }\n}\n/**\n * 获取时间 picker 的数据\n * @param {timestamp|array} value 当前时间\n * @param {string} type 类型，是开始还是结束\n */\nfunction getTime(value: number | (number | null)[], type?: string) {\n  if (props.type === 'datetime') {\n    return getTimeData({\n      date: value as number,\n      minDate: props.minDate,\n      maxDate: props.maxDate,\n      filter: props.timeFilter,\n      isHideSecond: props.hideSecond\n    })\n  } else {\n    if (type === 'start' && isArray(props.value)) {\n      return getTimeData({\n        date: (value as Array<number>)[0],\n        minDate: props.minDate,\n        maxDate: props.value[1] ? props.value[1] : props.maxDate,\n        filter: props.timeFilter,\n        isHideSecond: props.hideSecond\n      })\n    } else {\n      return getTimeData({\n        date: (value as Array<number>)[1],\n        minDate: (value as Array<number>)[0],\n        maxDate: props.maxDate,\n        filter: props.timeFilter,\n        isHideSecond: props.hideSecond\n      })\n    }\n  }\n}\n/**\n * 获取 date 的时分秒\n * @param {timestamp} date 时间\n * @param {string} type 类型，是开始还是结束\n */\nfunction getTimeValue(date: number | (number | null)[], type: MonthPanelTimeType) {\n  let dateValue: Date = new Date()\n  if (props.type === 'datetime') {\n    dateValue = new Date(date as number)\n  } else if (isArray(date)) {\n    if (type === 'start') {\n      dateValue = new Date(date[0] || '')\n    } else {\n      dateValue = new Date(date[1] || '')\n    }\n  }\n\n  const hour = dateValue.getHours()\n  const minute = dateValue.getMinutes()\n  const second = dateValue.getSeconds()\n  return props.hideSecond ? [hour, minute] : [hour, minute, second]\n}\n\nfunction setTime(value: number | (number | null)[], type?: MonthPanelTimeType) {\n  if (isArray(value) && value[0] && value[1] && type === 'start' && timeType.value === 'start') {\n    type = 'end'\n  }\n  timeType.value = type || ''\n  timeValue.value = getTimeValue(value, type || '')\n}\nfunction handleDateChange({ value, type }: { value: number | (number | null)[]; type?: MonthPanelTimeType }) {\n  if (!isEqual(value, props.value)) {\n    // 内部保存一个值，用于判断新老值，避免监听器触发\n    innerValue.value = value\n    handleChange(value)\n  }\n  // datetime 和 datetimerange 类型，需要计算 timeData 并做展示\n  if (props.type.indexOf('time') > -1) {\n    setTime(value, type)\n  }\n}\nfunction handleTimeChange({ value }: { value: any[] }) {\n  if (!props.value) {\n    return\n  }\n  if (props.type === 'datetime' && isNumber(props.value)) {\n    const date = new Date(props.value)\n    date.setHours(value[0])\n    date.setMinutes(value[1])\n    date.setSeconds(props.hideSecond ? 0 : value[2])\n    const dateTime = date.getTime()\n    handleChange(dateTime)\n  } else if (isArray(props.value) && props.type === 'datetimerange') {\n    const [start, end] = props.value!\n    const dataValue = timeType.value === 'start' ? start : end\n    const date = new Date(dataValue || '')\n    date.setHours(value[0])\n    date.setMinutes(value[1])\n    date.setSeconds(props.hideSecond ? 0 : value[2])\n    const dateTime = date.getTime()\n\n    if (dateTime === dataValue) return\n\n    const finalValue = [start, end]\n    if (timeType.value === 'start') {\n      finalValue[0] = dateTime\n    } else {\n      finalValue[1] = dateTime\n    }\n    innerValue.value = finalValue // 内部保存一个值，用于判断新老值，避免监听器触发\n    handleChange(finalValue)\n  }\n}\nfunction handlePickStart() {\n  emit('pickstart')\n}\nfunction handlePickEnd() {\n  emit('pickend')\n}\n\nconst monthScroll = (event: { detail: { scrollTop: number } }) => {\n  if (months.value.length <= 1) {\n    return\n  }\n  const scrollTop = Math.max(0, event.detail.scrollTop)\n  doSetSubtitle(scrollTop)\n}\n\n/**\n * 设置小标题\n * scrollTop 滚动条位置\n */\nfunction doSetSubtitle(scrollTop: number) {\n  let height: number = 0 // 月份高度和\n  for (let index = 0; index < months.value.length; index++) {\n    height = height + months.value[index].height\n    if (scrollTop < height) {\n      scrollIndex.value = index\n      return\n    }\n  }\n}\n\ndefineExpose<MonthPanelExpose>({\n  scrollIntoView\n})\n</script>\n\n<style lang=\"scss\" scoped>\n@import './index.scss';\n</style>\n","import type { ComponentPublicInstance, ExtractPropTypes, PropType } from 'vue'\nimport { baseProps, makeBooleanProp, makeNumberProp, makeRequiredProp, makeStringProp } from '../common/props'\n\nexport type CalendarType = 'date' | 'dates' | 'datetime' | 'week' | 'month' | 'daterange' | 'datetimerange' | 'weekrange' | 'monthrange'\n\nexport const calendarViewProps = {\n  ...baseProps,\n  /**\n   * 选中值，为 13 位时间戳或时间戳数组\n   */\n  modelValue: makeRequiredProp([Number, Array, null] as PropType<number | number[] | null>),\n  /**\n   * 日期类型\n   */\n  type: makeStringProp<CalendarType>('date'),\n  /**\n   * 最小日期，为 13 位时间戳\n   */\n  minDate: makeNumberProp(new Date(new Date().getFullYear(), new Date().getMonth() - 6, new Date().getDate()).getTime()),\n  /**\n   * 最大日期，为 13 位时间戳\n   */\n  maxDate: makeNumberProp(new Date(new Date().getFullYear(), new Date().getMonth() + 6, new Date().getDate(), 23, 59, 59).getTime()),\n  /**\n   * 周起始天\n   */\n  firstDayOfWeek: makeNumberProp(0),\n  /**\n   * 日期格式化函数\n   */\n  formatter: Function as PropType<CalendarFormatter>,\n  /**\n   * type 为范围选择时有效，最大日期范围\n   */\n  maxRange: Number,\n  /**\n   * type 为范围选择时有效，选择超出最大日期范围时的错误提示文案\n   */\n  rangePrompt: String,\n  /**\n   * type 为范围选择时有效，是否允许选择同一天\n   */\n  allowSameDay: makeBooleanProp(false),\n  // 是否展示面板标题，自动计算当前滚动的日期月份\n  showPanelTitle: makeBooleanProp(true),\n  /**\n   * 选中日期所使用的当日内具体时刻\n   */\n  defaultTime: {\n    type: [String, Array] as PropType<string | string[]>,\n    default: '00:00:00'\n  },\n  /**\n   * 可滚动面板的高度\n   */\n  panelHeight: makeNumberProp(378),\n  /**\n   * type 为 'datetime' 或 'datetimerange' 时有效，用于过滤时间选择器的数据\n   */\n  timeFilter: Function as PropType<CalendarTimeFilter>,\n  /**\n   * type 为 'datetime' 或 'datetimerange' 时有效，是否不展示秒修改\n   */\n  hideSecond: makeBooleanProp(false),\n  /**\n   * 是否在手指松开时立即触发picker-view的 change 事件。若不开启则会在滚动动画结束后触发 change 事件，1.2.25版本起提供，仅微信小程序和支付宝小程序支持。\n   */\n  immediateChange: makeBooleanProp(false)\n}\n\nexport type CalendarViewProps = ExtractPropTypes<typeof calendarViewProps>\n\nexport type CalendarDayType = '' | 'start' | 'middle' | 'end' | 'selected' | 'same' | 'current' | 'multiple-middle' | 'multiple-selected'\n\nexport type CalendarDayItem = {\n  date: number\n  text?: number | string\n  topInfo?: string\n  bottomInfo?: string\n  type?: CalendarDayType\n  disabled?: boolean\n  isLastRow?: boolean\n}\n\nexport type CalendarFormatter = (day: CalendarDayItem) => CalendarDayItem\n\nexport type CalendarTimeFilterOptionType = 'hour' | 'minute' | 'second'\n\nexport type CalendarTimeFilterOption = {\n  type: CalendarTimeFilterOptionType\n  values: CalendarItem[]\n}\n\nexport type CalendarTimeFilter = (option: CalendarTimeFilterOption) => CalendarItem[]\n\nexport type CalendarItem = {\n  label: string\n  value: number\n  disabled: boolean\n}\n\nexport type CalendarViewExpose = {\n  /**\n   * 使当前日期或者选中日期滚动到可视区域\n   */\n  scrollIntoView: () => void\n}\n\nexport type CalendarViewInstance = ComponentPublicInstance<CalendarViewExpose, CalendarViewProps>\n","<template>\n  <view :class=\"`wd-calendar-view ${customClass}`\">\n    <year-panel\n      v-if=\"type === 'month' || type === 'monthrange'\"\n      ref=\"yearPanelRef\"\n      :type=\"type\"\n      :value=\"modelValue\"\n      :min-date=\"minDate\"\n      :max-date=\"maxDate\"\n      :formatter=\"formatter\"\n      :max-range=\"maxRange\"\n      :range-prompt=\"rangePrompt\"\n      :allow-same-day=\"allowSameDay\"\n      :show-panel-title=\"showPanelTitle\"\n      :default-time=\"formatDefauleTime\"\n      :panel-height=\"panelHeight\"\n      @change=\"handleChange\"\n    />\n    <month-panel\n      v-else\n      ref=\"monthPanelRef\"\n      :type=\"type\"\n      :value=\"modelValue\"\n      :min-date=\"minDate\"\n      :max-date=\"maxDate\"\n      :first-day-of-week=\"firstDayOfWeek\"\n      :formatter=\"formatter\"\n      :max-range=\"maxRange\"\n      :range-prompt=\"rangePrompt\"\n      :allow-same-day=\"allowSameDay\"\n      :show-panel-title=\"showPanelTitle\"\n      :default-time=\"formatDefauleTime\"\n      :panel-height=\"panelHeight\"\n      :immediate-change=\"immediateChange\"\n      :time-filter=\"timeFilter\"\n      :hide-second=\"hideSecond\"\n      @change=\"handleChange\"\n      @pickstart=\"handlePickStart\"\n      @pickend=\"handlePickEnd\"\n    />\n  </view>\n</template>\n<script lang=\"ts\">\nexport default {\n  name: 'wd-calendar-view',\n  options: {\n    addGlobalClass: true,\n    virtualHost: true,\n    styleIsolation: 'shared'\n  }\n}\n</script>\n\n<script lang=\"ts\" setup>\nimport { ref, watch } from 'vue'\nimport { getDefaultTime } from './utils'\nimport yearPanel from './yearPanel/year-panel.vue'\nimport MonthPanel from './monthPanel/month-panel.vue'\nimport { calendarViewProps, type CalendarViewExpose } from './types'\n\nconst props = defineProps(calendarViewProps)\nconst emit = defineEmits(['change', 'update:modelValue', 'pickstart', 'pickend'])\nconst formatDefauleTime = ref<number[][]>([])\n\nconst yearPanelRef = ref()\nconst monthPanelRef = ref()\n\nwatch(\n  () => props.defaultTime,\n  (newValue) => {\n    formatDefauleTime.value = getDefaultTime(newValue)\n  },\n  {\n    deep: true,\n    immediate: true\n  }\n)\n\n/**\n * 使当前日期或者选中日期滚动到可视区域\n */\nfunction scrollIntoView() {\n  const panel = getPanel()\n  panel.scrollIntoView && panel.scrollIntoView()\n}\n\nfunction getPanel() {\n  return props.type.indexOf('month') > -1 ? yearPanelRef.value : monthPanelRef.value\n}\n\nfunction handleChange({ value }: { value: number | number[] | null }) {\n  emit('update:modelValue', value)\n  emit('change', {\n    value\n  })\n}\nfunction handlePickStart() {\n  emit('pickstart')\n}\nfunction handlePickEnd() {\n  emit('pickend')\n}\n\ndefineExpose<CalendarViewExpose>({\n  scrollIntoView\n})\n</script>\n\n<style lang=\"scss\" scoped>\n@import './index.scss';\n</style>\n","/*\n * @Author: weisheng\n * @Date: 2024-03-18 11:22:03\n * @LastEditTime: 2024-04-04 22:35:25\n * @LastEditors: weisheng\n * @Description:\n * @FilePath: /wot-design-uni/src/uni_modules/wot-design-uni/components/wd-action-sheet/types.ts\n * 记得注释\n */\nimport type { ExtractPropTypes } from 'vue'\nimport { baseProps, makeArrayProp, makeBooleanProp, makeNumberProp, makeRequiredProp, makeStringProp } from '../common/props'\n\nexport type Action = {\n  /**\n   * 选项名称\n   */\n  name: string\n  /**\n   * 描述信息\n   */\n  subname?: string\n  /**\n   * 颜色\n   */\n  color?: string\n  /**\n   * 禁用\n   */\n  disabled?: boolean\n  /**\n   * 加载中状态\n   */\n  loading?: boolean\n}\n\nexport type Panel = {\n  /**\n   * 图片地址\n   */\n  iconUrl: string\n  /**\n   * 标题内容\n   */\n  title: string\n}\n\nexport const actionSheetProps = {\n  ...baseProps,\n  /**\n   * header 头部样式\n   * @default ''\n   * @type {string}\n   */\n  customHeaderClass: makeStringProp(''),\n  /**\n   * 设置菜单显示隐藏\n   * @default false\n   * @type {boolean}\n   */\n  modelValue: { ...makeBooleanProp(false), ...makeRequiredProp(Boolean) },\n  /**\n   * 菜单选项\n   * @default []\n   * @type {Action[]}\n   */\n  actions: makeArrayProp<Action>(),\n  /**\n   * 自定义面板项,可以为字符串数组，也可以为对象数组，如果为二维数组，则为多行展示\n   * @default []\n   * @type {Array<Panel | Panel[]>}\n   */\n  panels: makeArrayProp<Panel | Panel[]>(),\n  /**\n   * 标题\n   * @type {string}\n   */\n  title: String,\n  /**\n   * 取消按钮文案\n   * @type {string}\n   */\n  cancelText: String,\n  /**\n   * 点击选项后是否关闭菜单\n   * @default true\n   * @type {boolean}\n   */\n  closeOnClickAction: makeBooleanProp(true),\n  /**\n   * 点击遮罩是否关闭\n   * @default true\n   * @type {boolean}\n   */\n  closeOnClickModal: makeBooleanProp(true),\n  /**\n   * 弹框动画持续时间\n   * @default 200\n   * @type {number}\n   */\n  duration: makeNumberProp(200),\n  /**\n   * 菜单层级\n   * @default 10\n   * @type {number}\n   */\n  zIndex: makeNumberProp(10),\n  /**\n   * 弹层内容懒渲染，触发展示时才渲染内容\n   * @default true\n   * @type {boolean}\n   */\n  lazyRender: makeBooleanProp(true),\n  /**\n   * 弹出面板是否设置底部安全距离（iphone X 类型的机型）\n   * @default true\n   * @type {boolean}\n   */\n  safeAreaInsetBottom: makeBooleanProp(true)\n}\n\nexport type ActionSheetProps = ExtractPropTypes<typeof actionSheetProps>\n","<template>\n  <view>\n    <wd-popup\n      custom-class=\"wd-action-sheet__popup\"\n      :custom-style=\"`${(actions && actions.length) || (panels && panels.length) ? 'background: transparent;' : ''}`\"\n      v-model=\"showPopup\"\n      :duration=\"duration\"\n      position=\"bottom\"\n      :close-on-click-modal=\"closeOnClickModal\"\n      :safe-area-inset-bottom=\"safeAreaInsetBottom\"\n      :lazy-render=\"lazyRender\"\n      @enter=\"handleOpen\"\n      @close=\"close\"\n      @after-enter=\"handleOpened\"\n      @after-leave=\"handleClosed\"\n      @click-modal=\"handleClickModal\"\n      :z-index=\"zIndex\"\n    >\n      <view\n        :class=\"`wd-action-sheet ${customClass}`\"\n        :style=\"`${\n          (actions && actions.length) || (panels && panels.length)\n            ? 'margin: 0 10px calc(var(--window-bottom) + 10px) 10px; border-radius: 16px;'\n            : 'margin-bottom: var(--window-bottom);'\n        } ${customStyle}`\"\n      >\n        <view v-if=\"title\" :class=\"`wd-action-sheet__header ${customHeaderClass}`\">\n          {{ title }}\n          <wd-icon custom-class=\"wd-action-sheet__close\" name=\"add\" @click=\"close\" />\n        </view>\n        <view class=\"wd-action-sheet__actions\" v-if=\"actions && actions.length\">\n          <button\n            v-for=\"(action, rowIndex) in actions\"\n            :key=\"rowIndex\"\n            :class=\"`wd-action-sheet__action ${action.disabled ? 'wd-action-sheet__action--disabled' : ''}  ${\n              action.loading ? 'wd-action-sheet__action--loading' : ''\n            }`\"\n            :style=\"`color: ${action.color}`\"\n            @click=\"select(rowIndex, 'action')\"\n          >\n            <wd-loading custom-class=\"`wd-action-sheet__action-loading\" v-if=\"action.loading\" />\n            <view v-else class=\"wd-action-sheet__name\">{{ action.name }}</view>\n            <view v-if=\"!action.loading && action.subname\" class=\"wd-action-sheet__subname\">{{ action.subname }}</view>\n          </button>\n        </view>\n        <view v-if=\"formatPanels && formatPanels.length\">\n          <view v-for=\"(panel, rowIndex) in formatPanels\" :key=\"rowIndex\" class=\"wd-action-sheet__panels\">\n            <view class=\"wd-action-sheet__panels-content\">\n              <view v-for=\"(col, colIndex) in panel\" :key=\"colIndex\" class=\"wd-action-sheet__panel\" @click=\"select(rowIndex, 'panels', colIndex)\">\n                <image class=\"wd-action-sheet__panel-img\" :src=\"(col as any).iconUrl\" />\n                <view class=\"wd-action-sheet__panel-title\">{{ (col as any).title }}</view>\n              </view>\n            </view>\n          </view>\n        </view>\n        <slot />\n        <button v-if=\"cancelText\" class=\"wd-action-sheet__cancel\" @click=\"handleCancel\">{{ cancelText }}</button>\n      </view>\n    </wd-popup>\n  </view>\n</template>\n<script lang=\"ts\">\nexport default {\n  name: 'wd-action-sheet',\n  options: {\n    addGlobalClass: true,\n    virtualHost: true,\n    styleIsolation: 'shared'\n  }\n}\n</script>\n\n<script lang=\"ts\" setup>\nimport wdPopup from '../wd-popup/wd-popup.vue'\nimport wdIcon from '../wd-icon/wd-icon.vue'\nimport wdLoading from '../wd-loading/wd-loading.vue'\nimport { watch, ref } from 'vue'\nimport { actionSheetProps, type Panel } from './types'\nimport { isArray } from '../common/util'\n\nconst props = defineProps(actionSheetProps)\nconst emit = defineEmits(['select', 'click-modal', 'cancel', 'closed', 'close', 'open', 'opened', 'update:modelValue'])\n\nconst formatPanels = ref<Array<Panel> | Array<Panel[]>>([])\n\nconst showPopup = ref<boolean>(false)\n\nwatch(() => props.panels, computedValue, { deep: true, immediate: true })\n\nwatch(\n  () => props.modelValue,\n  (newValue) => {\n    showPopup.value = newValue\n  },\n  { deep: true, immediate: true }\n)\n\nfunction isPanelArray() {\n  return props.panels.length && !isArray(props.panels[0])\n}\nfunction computedValue() {\n  formatPanels.value = isPanelArray() ? [props.panels as Panel[]] : (props.panels as Panel[][])\n}\n\nfunction select(rowIndex: number, type: 'action' | 'panels', colIndex?: number) {\n  if (type === 'action') {\n    if (props.actions[rowIndex].disabled || props.actions[rowIndex].loading) {\n      return\n    }\n    emit('select', {\n      item: props.actions[rowIndex],\n      index: rowIndex\n    })\n  } else if (isPanelArray()) {\n    emit('select', {\n      item: props.panels[Number(colIndex)],\n      index: colIndex\n    })\n  } else {\n    emit('select', {\n      item: (props.panels as Panel[][])[rowIndex][Number(colIndex)],\n      rowIndex,\n      colIndex\n    })\n  }\n  if (props.closeOnClickAction) {\n    close()\n  }\n}\nfunction handleClickModal() {\n  emit('click-modal')\n}\nfunction handleCancel() {\n  emit('cancel')\n  close()\n}\nfunction close() {\n  emit('update:modelValue', false)\n  emit('close')\n}\nfunction handleOpen() {\n  emit('open')\n}\nfunction handleOpened() {\n  emit('opened')\n}\nfunction handleClosed() {\n  emit('closed')\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import './index.scss';\n</style>\n","/*\n * @Author: weisheng\n * @Date: 2024-03-15 20:40:34\n * @LastEditTime: 2024-12-08 19:13:33\n * @LastEditors: weisheng\n * @Description:\n * @FilePath: /wot-design-uni/src/uni_modules/wot-design-uni/components/wd-calendar/types.ts\n * 记得注释\n */\nimport type { ComponentPublicInstance, ExtractPropTypes, PropType } from 'vue'\nimport { baseProps, makeArrayProp, makeBooleanProp, makeNumberProp, makeRequiredProp, makeStringProp } from '../common/props'\nimport type { CalendarFormatter, CalendarTimeFilter, CalendarType } from '../wd-calendar-view/types'\nimport type { FormItemRule } from '../wd-form/types'\n\nexport const calendarProps = {\n  ...baseProps,\n  /**\n   * 选中值，为 13 位时间戳或时间戳数组\n   */\n  modelValue: makeRequiredProp([Number, Array, null] as PropType<number | number[] | null>),\n  /**\n   * 日期类型，可选值：date / dates / datetime / week / month / daterange / datetimerange / weekrange / monthrange\n   */\n  type: makeStringProp<CalendarType>('date'),\n  /**\n   * 最小日期，为 13 位时间戳\n   */\n  minDate: makeNumberProp(new Date(new Date().getFullYear(), new Date().getMonth() - 6, new Date().getDate()).getTime()),\n  /**\n   * 最大日期，为 13 位时间戳\n   */\n  maxDate: makeNumberProp(new Date(new Date().getFullYear(), new Date().getMonth() + 6, new Date().getDate(), 23, 59, 59).getTime()),\n  /**\n   * 周起始天\n   */\n  firstDayOfWeek: makeNumberProp(0),\n  /**\n   * 日期格式化函数\n   */\n  formatter: Function as PropType<CalendarFormatter>,\n  /**\n   * type 为范围选择时有效，最大日期范围\n   */\n  maxRange: Number,\n  /**\n   * type 为范围选择时有效，选择超出最大日期范围时的错误提示文案\n   */\n  rangePrompt: String,\n  /**\n   * type 为范围选择时有效，是否允许选择同一天\n   */\n  allowSameDay: makeBooleanProp(false),\n  /**\n   * 选中日期所使用的当日内具体时刻\n   */\n  defaultTime: {\n    type: [String, Array] as PropType<string | string[]>\n  },\n  /**\n   * type 为 'datetime' 或 'datetimerange' 时有效，用于过滤时间选择器的数据\n   */\n  timeFilter: Function as PropType<CalendarTimeFilter>,\n  /**\n   * type 为 'datetime' 或 'datetimerange' 时有效，是否不展示秒修改\n   */\n  hideSecond: makeBooleanProp(false),\n  /**\n   * 选择器左侧文案\n   */\n  label: String,\n  /**\n   * 设置左侧标题宽度\n   */\n  labelWidth: String,\n  /**\n   * 禁用\n   */\n  disabled: makeBooleanProp(false),\n  /**\n   * 只读\n   */\n  readonly: makeBooleanProp(false),\n  /**\n   * 选择器占位符\n   */\n  placeholder: String,\n  /**\n   * 弹出层标题\n   */\n  title: String,\n  /**\n   * 选择器的值靠右展示\n   */\n  alignRight: makeBooleanProp(false),\n  /**\n   * 是否为错误状态，错误状态时右侧内容为红色\n   */\n  error: makeBooleanProp(false),\n  /**\n   * 是否必填\n   */\n  required: makeBooleanProp(false),\n  /**\n   * 设置选择器大小，可选值：large\n   */\n  size: String,\n  /**\n   * 是否垂直居中\n   */\n  center: makeBooleanProp(false),\n  /**\n   * 点击遮罩是否关闭\n   */\n  closeOnClickModal: makeBooleanProp(true),\n  /**\n   * 弹框层级\n   */\n  zIndex: makeNumberProp(15),\n  /**\n   * 是否显示确定按钮\n   */\n  showConfirm: makeBooleanProp(true),\n  /**\n   * 确定按钮文字\n   */\n  confirmText: String,\n  /**\n   * 自定义展示文案的格式化函数，返回一个字符串\n   */\n  displayFormat: Function as PropType<CalendarDisplayFormat>,\n  /**\n   * 自定义范围选择类型的面板内部回显，返回一个字符串\n   */\n  innerDisplayFormat: Function as PropType<CalendarInnerDisplayFormat>,\n  /**\n   * 是否超出隐藏\n   */\n  ellipsis: makeBooleanProp(false),\n  /**\n   * 是否显示类型切换功能\n   */\n  showTypeSwitch: makeBooleanProp(false),\n  /**\n   * 快捷选项，为对象数组，其中对象的 text 必传\n   */\n  shortcuts: makeArrayProp<Record<string, any>>(),\n  /**\n   * 快捷操作点击回调\n   */\n  onShortcutsClick: Function as PropType<CalendarOnShortcutsClick>,\n  /**\n   * 弹出面板是否设置底部安全距离（iphone X 类型的机型）\n   */\n  safeAreaInsetBottom: makeBooleanProp(true),\n  /**\n   * 确定前校验函数，接收 { value, resolve } 参数，通过 resolve 继续执行，resolve 接收 1 个 boolean 参数\n   */\n  beforeConfirm: Function as PropType<CalendarBeforeConfirm>,\n  /**\n   * 表单域 model 字段名，在使用表单校验功能的情况下，该属性是必填的\n   */\n  prop: String,\n  /**\n   * 表单验证规则，结合wd-form组件使用\n   */\n  rules: makeArrayProp<FormItemRule>(),\n  customViewClass: makeStringProp(''),\n  /**\n   * label 外部自定义样式\n   */\n  customLabelClass: makeStringProp(''),\n  /**\n   * value 外部自定义样式\n   */\n  customValueClass: makeStringProp(''),\n  /**\n   * 是否在手指松开时立即触发picker-view的 change 事件。若不开启则会在滚动动画结束后触发 change 事件，1.2.25版本起提供，仅微信小程序和支付宝小程序支持。\n   */\n  immediateChange: makeBooleanProp(false),\n  /**\n   * 是否使用内置单元格\n   * 默认为 true，使用内置单元格\n   */\n  withCell: makeBooleanProp(true)\n}\n\nexport type CalendarDisplayFormat = (value: number | number[], type: CalendarType) => string\n\nexport type CalendarInnerDisplayFormat = (value: number, rangeType: 'start' | 'end', type: CalendarType) => string\n\nexport type CalendarBeforeConfirmOption = {\n  value: number | number[] | null\n  resolve: (isPass: boolean) => void\n}\n\nexport type CalendarBeforeConfirm = (option: CalendarBeforeConfirmOption) => void\n\nexport type CalendarOnShortcutsClickOption = {\n  item: Record<string, any>\n  index: number\n}\n\nexport type CalendarOnShortcutsClick = (option: CalendarOnShortcutsClickOption) => number | number[]\n\nexport type CalendarExpose = {\n  /** 关闭时间选择器弹窗 */\n  close: () => void\n  /** 打开时间选择器弹窗 */\n  open: () => void\n}\n\nexport type CalendarProps = ExtractPropTypes<typeof calendarProps>\n\nexport type CalendarInstance = ComponentPublicInstance<CalendarExpose, CalendarProps>\n","<template>\n  <view :class=\"`wd-calendar ${cell.border.value ? 'is-border' : ''} ${customClass}`\">\n    <view class=\"wd-calendar__field\" @click=\"open\" v-if=\"withCell\">\n      <slot v-if=\"$slots.default\"></slot>\n      <view\n        v-else\n        :class=\"`wd-calendar__cell ${disabled ? 'is-disabled' : ''} ${props.readonly ? 'is-readonly' : ''} ${alignRight ? 'is-align-right' : ''} ${\n          error ? 'is-error' : ''\n        } ${size ? 'is-' + size : ''} ${center ? 'is-center' : ''}`\"\n      >\n        <view\n          v-if=\"label || $slots.label\"\n          :class=\"`wd-calendar__label ${isRequired ? 'is-required' : ''} ${customLabelClass}`\"\n          :style=\"labelWidth ? 'min-width:' + labelWidth + ';max-width:' + labelWidth + ';' : ''\"\n        >\n          <slot name=\"label\">{{ label }}</slot>\n        </view>\n        <view class=\"wd-calendar__body\">\n          <view class=\"wd-calendar__value-wraper\">\n            <view\n              :class=\"`wd-calendar__value ${ellipsis ? 'is-ellipsis' : ''} ${customValueClass} ${showValue ? '' : 'wd-calendar__value--placeholder'}`\"\n            >\n              {{ showValue || placeholder || translate('placeholder') }}\n            </view>\n            <wd-icon v-if=\"!disabled && !readonly\" custom-class=\"wd-calendar__arrow\" name=\"arrow-right\" />\n          </view>\n          <view v-if=\"errorMessage\" class=\"wd-calendar__error-message\">{{ errorMessage }}</view>\n        </view>\n      </view>\n    </view>\n    <wd-action-sheet\n      v-model=\"pickerShow\"\n      :duration=\"250\"\n      :close-on-click-modal=\"closeOnClickModal\"\n      :safe-area-inset-bottom=\"safeAreaInsetBottom\"\n      :z-index=\"zIndex\"\n      @close=\"close\"\n    >\n      <view class=\"wd-calendar__header\">\n        <view v-if=\"!showTypeSwitch && shortcuts.length === 0\" class=\"wd-calendar__title\">{{ title || translate('title') }}</view>\n        <view v-if=\"showTypeSwitch\" class=\"wd-calendar__tabs\">\n          <wd-tabs ref=\"calendarTabs\" v-model=\"currentTab\" @change=\"handleTypeChange\">\n            <wd-tab :title=\"translate('day')\" :name=\"translate('day')\" />\n            <wd-tab :title=\"translate('week')\" :name=\"translate('week')\" />\n            <wd-tab :title=\"translate('month')\" :name=\"translate('month')\" />\n          </wd-tabs>\n        </view>\n        <view v-if=\"shortcuts.length > 0\" class=\"wd-calendar__shortcuts\">\n          <wd-tag\n            v-for=\"(item, index) in shortcuts\"\n            :key=\"index\"\n            custom-class=\"wd-calendar__tag\"\n            type=\"primary\"\n            plain\n            round\n            @click=\"handleShortcutClick(index)\"\n          >\n            {{ item.text }}\n          </wd-tag>\n        </view>\n        <wd-icon custom-class=\"wd-calendar__close\" name=\"add\" @click=\"close\" />\n      </view>\n      <view\n        v-if=\"inited\"\n        :class=\"`wd-calendar__view  ${currentType.indexOf('range') > -1 ? 'is-range' : ''} ${showConfirm ? 'is-show-confirm' : ''}`\"\n      >\n        <view v-if=\"range(type)\" :class=\"`wd-calendar__range-label ${type === 'monthrange' ? 'is-monthrange' : ''}`\">\n          <view\n            :class=\"`wd-calendar__range-label-item ${!calendarValue || !isArray(calendarValue) || !calendarValue[0] ? 'is-placeholder' : ''}`\"\n            style=\"text-align: right\"\n          >\n            {{ rangeLabel[0] }}\n          </view>\n          <view class=\"wd-calendar__range-sperator\">/</view>\n          <view :class=\"`wd-calendar__range-label-item ${!calendarValue || !isArray(calendarValue) || !calendarValue[1] ? 'is-placeholder' : ''}`\">\n            {{ rangeLabel[1] }}\n          </view>\n        </view>\n        <wd-calendar-view\n          ref=\"calendarView\"\n          v-model=\"calendarValue\"\n          :type=\"currentType\"\n          :min-date=\"minDate\"\n          :max-date=\"maxDate\"\n          :first-day-of-week=\"firstDayOfWeek\"\n          :formatter=\"formatter\"\n          :panel-height=\"panelHeight\"\n          :max-range=\"maxRange\"\n          :range-prompt=\"rangePrompt\"\n          :allow-same-day=\"allowSameDay\"\n          :default-time=\"defaultTime\"\n          :time-filter=\"timeFilter\"\n          :hide-second=\"hideSecond\"\n          :show-panel-title=\"!range(type)\"\n          :immediate-change=\"immediateChange\"\n          @change=\"handleChange\"\n        />\n      </view>\n      <view v-if=\"showConfirm\" class=\"wd-calendar__confirm\">\n        <wd-button block :disabled=\"confirmBtnDisabled\" @click=\"handleConfirm\">{{ confirmText || translate('confirm') }}</wd-button>\n      </view>\n    </wd-action-sheet>\n  </view>\n</template>\n\n<script lang=\"ts\">\nexport default {\n  name: 'wd-calendar',\n  options: {\n    addGlobalClass: true,\n    virtualHost: true,\n    styleIsolation: 'shared'\n  }\n}\n</script>\n\n<script lang=\"ts\" setup>\nimport wdIcon from '../wd-icon/wd-icon.vue'\nimport wdCalendarView from '../wd-calendar-view/wd-calendar-view.vue'\nimport wdActionSheet from '../wd-action-sheet/wd-action-sheet.vue'\nimport wdButton from '../wd-button/wd-button.vue'\nimport { ref, computed, watch } from 'vue'\nimport { dayjs } from '../common/dayjs'\nimport { deepClone, isArray, isEqual, padZero, pause } from '../common/util'\nimport { getWeekNumber, isRange } from '../wd-calendar-view/utils'\nimport { useCell } from '../composables/useCell'\nimport { FORM_KEY, type FormItemRule } from '../wd-form/types'\nimport { useParent } from '../composables/useParent'\nimport { useTranslate } from '../composables/useTranslate'\nimport { calendarProps, type CalendarExpose } from './types'\nimport type { CalendarType } from '../wd-calendar-view/types'\nconst { translate } = useTranslate('calendar')\n\nconst defaultDisplayFormat = (value: number | number[], type: CalendarType): string => {\n  switch (type) {\n    case 'date':\n      return dayjs(value as number).format('YYYY-MM-DD')\n    case 'dates':\n      return (value as number[])\n        .map((item) => {\n          return dayjs(item).format('YYYY-MM-DD')\n        })\n        .join(', ')\n    case 'daterange':\n      return `${(value as number[])[0] ? dayjs((value as number[])[0]).format('YYYY-MM-DD') : translate('startTime')} ${translate('to')} ${\n        (value as number[])[1] ? dayjs((value as number[])[1]).format('YYYY-MM-DD') : translate('endTime')\n      }`\n    case 'datetime':\n      return dayjs(value as number).format('YYYY-MM-DD HH:mm:ss')\n    case 'datetimerange':\n      return `${(value as number[])[0] ? dayjs((value as number[])[0]).format(translate('timeFormat')) : translate('startTime')} ${translate(\n        'to'\n      )}\\n${(value as number[])[1] ? dayjs((value as number[])[1]).format(translate('timeFormat')) : translate('endTime')}`\n    case 'week': {\n      const date = new Date(value as number)\n      const year = date.getFullYear()\n      const week = getWeekNumber(value as number)\n      const weekStart = new Date(date)\n      weekStart.setDate(date.getDate() - date.getDay() + 1)\n      const weekEnd = new Date(date)\n      weekEnd.setDate(date.getDate() + (7 - date.getDay()))\n      const adjustedYear = weekEnd.getFullYear() > year ? weekEnd.getFullYear() : year\n      return translate('weekFormat', adjustedYear, padZero(week))\n    }\n    case 'weekrange': {\n      const date1 = new Date((value as number[])[0])\n      const date2 = new Date((value as number[])[1])\n      const year1 = date1.getFullYear()\n      const year2 = date2.getFullYear()\n      const week1 = getWeekNumber((value as number[])[0])\n      const week2 = getWeekNumber((value as number[])[1])\n      const weekStart1 = new Date(date1)\n      weekStart1.setDate(date1.getDate() - date1.getDay() + 1)\n      const weekEnd1 = new Date(date1)\n      weekEnd1.setDate(date1.getDate() + (7 - date1.getDay()))\n      const weekStart2 = new Date(date2)\n      weekStart2.setDate(date2.getDate() - date2.getDay() + 1)\n      const weekEnd2 = new Date(date2)\n      weekEnd2.setDate(date2.getDate() + (7 - date2.getDay()))\n      const adjustedYear1 = weekEnd1.getFullYear() > year1 ? weekEnd1.getFullYear() : year1\n      const adjustedYear2 = weekEnd2.getFullYear() > year2 ? weekEnd2.getFullYear() : year2\n      return `${(value as number[])[0] ? translate('weekFormat', adjustedYear1, padZero(week1)) : translate('startWeek')} - ${\n        (value as number[])[1] ? translate('weekFormat', adjustedYear2, padZero(week2)) : translate('endWeek')\n      }`\n    }\n    case 'month':\n      return dayjs(value as number).format('YYYY / MM')\n    case 'monthrange':\n      return `${(value as number[])[0] ? dayjs((value as number[])[0]).format('YYYY / MM') : translate('startMonth')} ${translate('to')} ${\n        (value as number[])[1] ? dayjs((value as number[])[1]).format('YYYY / MM') : translate('endMonth')\n      }`\n  }\n}\n\nconst formatRange = (value: number, rangeType: 'start' | 'end', type: CalendarType) => {\n  switch (type) {\n    case 'daterange':\n      if (!value) {\n        return rangeType === 'end' ? translate('endTime') : translate('startTime')\n      }\n      return dayjs(value).format(translate('dateFormat'))\n    case 'datetimerange':\n      if (!value) {\n        return rangeType === 'end' ? translate('endTime') : translate('startTime')\n      }\n      return dayjs(value).format(translate('timeFormat'))\n    case 'weekrange': {\n      if (!value) {\n        return rangeType === 'end' ? translate('endWeek') : translate('startWeek')\n      }\n      const date = new Date(value)\n      const year = date.getFullYear()\n      const week = getWeekNumber(value)\n      return translate('weekFormat', year, padZero(week))\n    }\n    case 'monthrange':\n      if (!value) {\n        return rangeType === 'end' ? translate('endMonth') : translate('startMonth')\n      }\n      return dayjs(value).format(translate('monthFormat'))\n  }\n}\n\nconst props = defineProps(calendarProps)\nconst emit = defineEmits(['cancel', 'change', 'update:modelValue', 'confirm', 'open'])\n\nconst pickerShow = ref<boolean>(false)\nconst calendarValue = ref<null | number | number[]>(null)\nconst lastCalendarValue = ref<null | number | number[]>(null)\nconst panelHeight = ref<number>(338)\nconst confirmBtnDisabled = ref<boolean>(true)\nconst currentTab = ref<number>(0)\nconst lastTab = ref<number>(0)\nconst currentType = ref<CalendarType>('date')\nconst lastCurrentType = ref<CalendarType>()\nconst inited = ref<boolean>(false)\nconst cell = useCell()\nconst calendarView = ref()\nconst calendarTabs = ref()\n\nconst rangeLabel = computed(() => {\n  const [start, end] = deepClone(isArray(calendarValue.value) ? calendarValue.value : [])\n  return [start, end].map((item, index) => {\n    return (props.innerDisplayFormat || formatRange)(item, index === 0 ? 'start' : 'end', currentType.value)\n  })\n})\n\nconst showValue = computed(() => {\n  if ((!isArray(props.modelValue) && props.modelValue) || (isArray(props.modelValue) && props.modelValue.length)) {\n    return (props.displayFormat || defaultDisplayFormat)(props.modelValue, lastCurrentType.value || currentType.value)\n  } else {\n    return ''\n  }\n})\n\nwatch(\n  () => props.modelValue,\n  (val, oldVal) => {\n    if (isEqual(val, oldVal)) return\n    calendarValue.value = deepClone(val)\n    confirmBtnDisabled.value = getConfirmBtnStatus(val)\n  },\n  {\n    immediate: true\n  }\n)\n\nwatch(\n  () => props.type,\n  (newValue, oldValue) => {\n    if (props.showTypeSwitch) {\n      const tabs = ['date', 'week', 'month']\n      const rangeTabs = ['daterange', 'weekrange', 'monthrange']\n\n      const index = newValue.indexOf('range') > -1 ? rangeTabs.indexOf(newValue) || 0 : tabs.indexOf(newValue)\n      currentTab.value = index\n    }\n    panelHeight.value = props.showConfirm ? 338 : 400\n    currentType.value = deepClone(newValue)\n  },\n  {\n    deep: true,\n    immediate: true\n  }\n)\n\nwatch(\n  () => props.showConfirm,\n  (val) => {\n    panelHeight.value = val ? 338 : 400\n  },\n  {\n    deep: true,\n    immediate: true\n  }\n)\n\nconst { parent: form } = useParent(FORM_KEY)\n\n// 表单校验错误信息\nconst errorMessage = computed(() => {\n  if (form && props.prop && form.errorMessages && form.errorMessages[props.prop]) {\n    return form.errorMessages[props.prop]\n  } else {\n    return ''\n  }\n})\n\n// 是否展示必填\nconst isRequired = computed(() => {\n  let formRequired = false\n  if (form && form.props.rules) {\n    const rules = form.props.rules\n    for (const key in rules) {\n      if (Object.prototype.hasOwnProperty.call(rules, key) && key === props.prop && Array.isArray(rules[key])) {\n        formRequired = rules[key].some((rule: FormItemRule) => rule.required)\n      }\n    }\n  }\n  return props.required || props.rules.some((rule) => rule.required) || formRequired\n})\n\nconst range = computed(() => {\n  return (type: CalendarType) => {\n    return isRange(type)\n  }\n})\n\nfunction scrollIntoView() {\n  calendarView.value && calendarView.value && calendarView.value.$.exposed.scrollIntoView()\n}\n// 对外暴露方法\nasync function open() {\n  const { disabled, readonly } = props\n\n  if (disabled || readonly) return\n\n  inited.value = true\n  pickerShow.value = true\n  lastCalendarValue.value = deepClone(calendarValue.value)\n  lastTab.value = currentTab.value\n  lastCurrentType.value = currentType.value\n  // 等待渲染完毕\n  await pause()\n  scrollIntoView()\n  setTimeout(() => {\n    if (props.showTypeSwitch) {\n      calendarTabs.value.scrollIntoView()\n      calendarTabs.value.updateLineStyle(false)\n    }\n  }, 250)\n  emit('open')\n}\n// 对外暴露方法\nfunction close() {\n  pickerShow.value = false\n  setTimeout(() => {\n    calendarValue.value = deepClone(lastCalendarValue.value)\n    currentTab.value = lastTab.value\n    currentType.value = lastCurrentType.value || 'date'\n    confirmBtnDisabled.value = getConfirmBtnStatus(lastCalendarValue.value)\n  }, 250)\n  emit('cancel')\n}\nfunction handleTypeChange({ index }: { index: number }) {\n  const tabs = ['date', 'week', 'month']\n  const rangeTabs = ['daterange', 'weekrange', 'monthrange']\n  const type = props.type.indexOf('range') > -1 ? rangeTabs[index] : tabs[index]\n  currentTab.value = index\n  currentType.value = type as CalendarType\n}\nfunction getConfirmBtnStatus(value: number | number[] | null) {\n  let confirmBtnDisabled = false\n  // 范围选择未选择满，或者多日期选择未选择日期，按钮置灰不可点击\n  if (\n    (props.type.indexOf('range') > -1 && (!isArray(value) || !value[0] || !value[1] || !value)) ||\n    (props.type === 'dates' && (!isArray(value) || value.length === 0 || !value)) ||\n    !value\n  ) {\n    confirmBtnDisabled = true\n  }\n\n  return confirmBtnDisabled\n}\nfunction handleChange({ value }: { value: number | number[] | null }) {\n  calendarValue.value = deepClone(value)\n  confirmBtnDisabled.value = getConfirmBtnStatus(value)\n\n  emit('change', {\n    value\n  })\n\n  if (!props.showConfirm && !confirmBtnDisabled.value) {\n    handleConfirm()\n  }\n}\nfunction handleConfirm() {\n  if (props.beforeConfirm) {\n    props.beforeConfirm({\n      value: calendarValue.value,\n      resolve: (isPass: boolean) => {\n        isPass && onConfirm()\n      }\n    })\n  } else {\n    onConfirm()\n  }\n}\nfunction onConfirm() {\n  pickerShow.value = false\n  lastCurrentType.value = currentType.value\n  emit('update:modelValue', calendarValue.value)\n  emit('confirm', {\n    value: calendarValue.value,\n    type: currentType.value\n  })\n}\n\nfunction handleShortcutClick(index: number) {\n  if (props.onShortcutsClick && typeof props.onShortcutsClick === 'function') {\n    calendarValue.value = deepClone(\n      props.onShortcutsClick({\n        item: props.shortcuts[index],\n        index\n      })\n    )\n    confirmBtnDisabled.value = getConfirmBtnStatus(calendarValue.value)\n  }\n\n  if (!props.showConfirm) {\n    handleConfirm()\n  }\n}\n\ndefineExpose<CalendarExpose>({\n  close,\n  open\n})\n</script>\n\n<style lang=\"scss\" scoped>\n@import './index.scss';\n</style>\n","<template>\n  <view class=\"container\">\n    <wd-toast />\n    <view class=\"content\">\n      <!-- ==================== 标题区域 ==================== -->\n      <view class=\"title\">Offer Details</view>\n      <!-- ==================== 表单区域 ==================== -->\n      <view class=\"my_form\">\n        <wd-form ref=\"form\" :model=\"formData\" v-if=\"currentType_fromOptions\">\n          <!-- ------------------ 灯泡文字，智能推荐 ------------------ -->\n          <view\n            style=\"\n\n              font-size: 10px;\n              font-weight: normal;\n              line-height: normal;\n              letter-spacing: normal;\n              text-decoration: underline;\n              color: #949399;\n              text-align: right;\n              margin-bottom: 14px;\n            \"\n          >\n            <wd-icon name=\"tips\" size=\"14px\"></wd-icon>\n            Smart Recommendation\n          </view>\n          <!-- 类型: 《提供服务》 1=Offering services,   《提供物品》 2=Offering goods,    3=Requesting services,    4=Requesting goods -->\n          <!-- ********************************** 《A提供物品》 2=Offering goods: 这个只有五个表单项 ********************************** -->\n          <view\n            class=\"this_is_offring_goods\"\n            v-if=\"currentType_fromOptions.method == 2\"\n          >\n            <!-- ------------------ A01·Type选项 ------------------ -->\n            <wd-cell-group\n              custom-class=\"custom_WotCellGroud\"\n              custom-label-class=\"custom_WotCellTitleFont\"\n              title=\"Type\"\n              border\n            >\n              <!-- <wd-cell center custom-label-class=\"custom_WotCellTitleFont\"> -->\n              <wd-drop-menu custom-class=\"custom_WotDropMenu\">\n                <wd-drop-menu-item\n                  custom-class=\"custom_WotDropMenuItem\"\n                  custom-popup-class=\"custom_WotDropMenuPopup\"\n                  v-model=\"formData.type\"\n                  :options=\"type_options\"\n                />\n              </wd-drop-menu>\n              <!-- </wd-cell> -->\n            </wd-cell-group>\n            <!-- ------------------ A02·Offerings Title选项 ------------------ -->\n            <wd-cell-group\n              custom-class=\"custom_WotCellGroud\"\n              custom-label-class=\"custom_WotCellTitleFont\"\n              title=\"Offerings Title\"\n              border\n            >\n              <!-- <wd-cell center custom-label-class=\"custom_WotCellTitleFont\"> -->\n              <wd-drop-menu custom-class=\"custom_WotDropMenu\">\n                <wd-drop-menu-item\n                  custom-class=\"custom_WotDropMenuItem\"\n                  custom-popup-class=\"custom_WotDropMenuPopup\"\n                  v-model=\"formData.title\"\n                  :options=\"type_options\"\n                />\n              </wd-drop-menu>\n              <!-- </wd-cell> -->\n            </wd-cell-group>\n\n            <!-- ------------------ A03·Condition选项 ------------------ -->\n            <wd-cell-group\n              custom-class=\"custom_WotCellGroud\"\n              custom-label-class=\"custom_WotCellTitleFont\"\n              title=\"Condition\"\n              border\n            >\n              <!-- <wd-cell center custom-label-class=\"custom_WotCellTitleFont\"> -->\n              <wd-drop-menu custom-class=\"custom_WotDropMenu\">\n                <wd-drop-menu-item\n                  custom-class=\"custom_WotDropMenuItem\"\n                  custom-popup-class=\"custom_WotDropMenuPopup\"\n                  v-model=\"formData.condition\"\n                  :options=\"type_options\"\n                />\n              </wd-drop-menu>\n              <!-- </wd-cell> -->\n            </wd-cell-group>\n            <!-- ------------------ A04·Description选项 ------------------ -->\n            <wd-cell-group\n              custom-class=\"custom_WotCellGroud\"\n              custom-label-class=\"custom_WotCellTitleFont\"\n              title=\"Description\"\n              style=\"position: relative\"\n              border\n            >\n              <!-- <wd-cell center custom-label-class=\"custom_WotCellTitleFont\"> -->\n              <wd-textarea\n                v-model=\"formData.description\"\n                :maxlength=\"120\"\n                clearable\n                show-word-limit\n              />\n              <view\n                style=\"\n                  position: absolute;\n                  right: 20px;\n                  bottom: 40px;\n                  width: 22px;\n                  height: 22px;\n                  /* border: 1px solid blue; */\n                  display: flex;\n                  justify-content: center;\n                  align-items: center;\n                \"\n                @click=\"handleClickSelectPictures\"\n              >\n                <image\n                  width=\"22px\"\n                  src=\"@/static/chooseOffering/offering_selectPictures.png\"\n                  mode=\"widthFix\"\n                />\n              </view>\n              <!-- </wd-cell> -->\n            </wd-cell-group>\n            <!-- ------------------ A05·Offering Price选项 ------------------ -->\n            <wd-cell-group\n              custom-class=\"custom_WotCellGroud\"\n              custom-label-class=\"custom_WotCellTitleFont\"\n              title=\"Offering Price\"\n              border\n            >\n              <view style=\"padding: 14px; box-sizing: border-box; width: 100%\">\n                <wd-input\n                  type=\"number\"\n                  v-model=\"formData.offeringPrice\"\n                  custom-style=\"text-align:right;\"\n                >\n                  <template #prefix>\n                    <view style=\"font-size: 16px\">$</view>\n                  </template>\n                </wd-input>\n              </view>\n            </wd-cell-group>\n          </view>\n          <!-- ********************************** 《B提供服务》 1=Offering services: 这个有八个表单项 ********************************** -->\n          <view\n            class=\"this_is_offring_goods\"\n            v-if=\"currentType_fromOptions.method == 1\"\n          >\n            <!-- ------------------ B01·Type选项 ------------------ -->\n            <wd-cell-group\n              custom-class=\"custom_WotCellGroud\"\n              custom-label-class=\"custom_WotCellTitleFont\"\n              title=\"Type\"\n              border\n            >\n              <!-- <wd-cell center custom-label-class=\"custom_WotCellTitleFont\"> -->\n              <wd-drop-menu custom-class=\"custom_WotDropMenu\">\n                <wd-drop-menu-item\n                  custom-class=\"custom_WotDropMenuItem\"\n                  custom-popup-class=\"custom_WotDropMenuPopup\"\n                  v-model=\"formData.type\"\n                  :options=\"type_options\"\n                />\n              </wd-drop-menu>\n              <!-- </wd-cell> -->\n            </wd-cell-group>\n            <!-- ------------------ B02·Offerings Title input输入框 ------------------ -->\n            <wd-cell-group\n              custom-class=\"custom_WotCellGroud\"\n              custom-label-class=\"custom_WotCellTitleFont\"\n              title=\"Offerings Title\"\n              border\n            >\n              <!-- <wd-cell center custom-label-class=\"custom_WotCellTitleFont\"> -->\n              <wd-input\n                v-model=\"formData.description\"\n                custom-style=\"padding: 14px; box-sizing: border-box; width: 100%;\"\n              />\n              <!-- </wd-cell> -->\n            </wd-cell-group>\n            <!-- ------------------ B03·From 选项 ------------------ -->\n            <wd-cell-group\n              custom-class=\"custom_WotCellGroud\"\n              custom-label-class=\"custom_WotCellTitleFont\"\n              title=\"From\"\n              border\n            >\n              <!-- <wd-cell center custom-label-class=\"custom_WotCellTitleFont\"> -->\n              <wd-input\n                v-model=\"formData.description\"\n                custom-style=\"padding: 14px; box-sizing: border-box; width: 100%;\"\n              />\n              <!-- </wd-cell> -->\n            </wd-cell-group>\n            <!-- ------------------ B04·To 选项 ------------------ -->\n            <wd-cell-group\n              custom-class=\"custom_WotCellGroud\"\n              custom-label-class=\"custom_WotCellTitleFont\"\n              title=\"To\"\n              border\n            >\n              <!-- <wd-cell center custom-label-class=\"custom_WotCellTitleFont\"> -->\n              <wd-input\n                v-model=\"formData.description\"\n                custom-style=\"padding: 14px; box-sizing: border-box; width: 100%;\"\n              />\n              <!-- </wd-cell> -->\n            </wd-cell-group>\n            <!-- ------------------ B05·Date&Time选项 ------------------ -->\n            <wd-cell-group\n              custom-class=\"custom_WotCellGroud\"\n              custom-label-class=\"custom_WotCellTitleFont\"\n              title=\"Condition\"\n              border\n            >\n              <wd-calendar v-model=\"value\" label=\"pick date\" />\n              <!-- </wd-cell> -->\n            </wd-cell-group>\n            <!-- ------------------ B06·Quantity ------------------ -->\n            <wd-cell-group\n              custom-class=\"custom_WotCellGroud\"\n              custom-label-class=\"custom_WotCellTitleFont\"\n              title=\"Quantity\"\n              border\n            >\n              <view style=\"padding: 14px; box-sizing: border-box; width: 100%\">\n                <wd-input\n                  type=\"number\"\n                  v-model=\"formData.offeringPrice\"\n                  custom-style=\"text-align:left;\"\n                >\n                </wd-input>\n              </view>\n            </wd-cell-group>\n            <!-- ------------------ B07·Description选项 ------------------ -->\n            <wd-cell-group\n              custom-class=\"custom_WotCellGroud\"\n              custom-label-class=\"custom_WotCellTitleFont\"\n              title=\"Description\"\n              style=\"position: relative\"\n              border\n            >\n              <!-- <wd-cell center custom-label-class=\"custom_WotCellTitleFont\"> -->\n              <wd-textarea\n                v-model=\"formData.description\"\n                :maxlength=\"120\"\n                clearable\n                show-word-limit\n              />\n              <view\n                style=\"\n                  position: absolute;\n                  right: 20px;\n                  bottom: 40px;\n                  width: 22px;\n                  height: 22px;\n                  /* border: 1px solid blue; */\n                  display: flex;\n                  justify-content: center;\n                  align-items: center;\n                \"\n                @click=\"handleClickSelectPictures\"\n              >\n                <image\n                  width=\"22px\"\n                  src=\"@/static/chooseOffering/offering_selectPictures.png\"\n                  mode=\"widthFix\"\n                />\n              </view>\n              <!-- </wd-cell> -->\n            </wd-cell-group>\n            <!-- ------------------ B08·Offering Price选项 ------------------ -->\n            <wd-cell-group\n              custom-class=\"custom_WotCellGroud\"\n              custom-label-class=\"custom_WotCellTitleFont\"\n              title=\"Offering Price\"\n              border\n            >\n              <view style=\"padding: 14px; box-sizing: border-box; width: 100%\">\n                <wd-input\n                  type=\"number\"\n                  v-model=\"formData.offeringPrice\"\n                  custom-style=\"text-align:right;\"\n                >\n                  <template #prefix>\n                    <view style=\"font-size: 16px\">$</view>\n                  </template>\n                </wd-input>\n              </view>\n            </wd-cell-group>\n          </view>\n\n          <!-- ********************************** 共用·提交选项选项 ********************************** -->\n          <wd-cell-group>\n            <wd-button\n              type=\"primary\"\n              size=\"large\"\n              @click=\"handleSubmit\"\n              block\n              custom-style=\"background-color: #c46379; color: #ffffff; margin-top: 40px;\"\n              >LIST MY OFFERING\n            </wd-button>\n          </wd-cell-group>\n        </wd-form>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script setup>\nimport { indexType, indexCondition } from \"@/api/totalApi.js\"\n\n// wd的吐司弹窗提示组件\n  import { useToast } from \"@/uni_modules/wot-design-uni\"\n\nconst toast = useToast()\n\n// ================================= 必要的数据准备 =================================\n// 从options中获取的上个页面传递过来的数据，该数据来自 后端《分类》接口，和request页面传过来的method\n// 其中的id用于给《提供商品》《提供服务》接口的cate_id字段赋值，区分不同的分类\n// 其中的method用于区分当前执行的操作\nconst currentType_fromOptions = ref(null)\n\n// 表单数据\nconst formRef = ref(null)\n\nconst formData = reactive({\n  methodtype: 1, // 1 提供 2 需求 (这里写死1)因为拆成页面了，需求都在另一个文件夹的页面中\n  cate_id: 0, // 分类id 来自options\n  type: \"Apparel\",\n  condition: \"Electric Appliance\",\n  title: \"Delivery Service\",\n  description: \"\",\n  price: \"\",\n  images: \"\",\n  from: \"\",\n  to: \"\",\n  datetime: \"\",\n  quantity: \"\",\n})\n\n// 下拉框选项\nconst type_options = [\n  { label: \"Delivery Service\", value: \"Delivery Service\" },\n  { label: \"Apparel\", value: \"Apparel\" },\n  { label: \"Electric Appliance\", value: \"Electric Appliance\" },\n  { label: \"Other\", value: \"Other\" },\n]\n\n// ============================================== 提交表单 ==============================================\nconst handleSubmit = () => {\n  formRef.value\n    .validate()\n    .then(({ valid, errors }) => {\n      if (valid) {\n        showSuccess({\n          msg: \"校验通过\",\n        })\n      }\n    })\n    .catch((error) => {\n      console.log(error, \"error\")\n    })\n}\n\n// ============================================== 页面数据加载 ==============================================\nonLoad(async (options) => {\n  // -------------- 加载路由数据 --------------\n  const NestedObjectOptions = flattenToNestedObject(options)\n  NestedObjectOptions.method = parseInt(NestedObjectOptions.method)\n  console.log(\"NestedObjectOptions\", NestedObjectOptions)\n  currentType_fromOptions.value = NestedObjectOptions\n  switch (NestedObjectOptions.method) {\n    case 1: // 提供服务\n      console.log(\n        \"------------------------- {执行《提供服务》操作} --------------------------\",\n      )\n      break\n    case 2: // 提供商品\n      console.log(\n        \"------------------------- {执行《提供商品》操作} --------------------------\",\n      )\n      break\n    case 3: // 请求服务\n      console.log(\n        \"------------------------- {执行《请求服务》操作} --------------------------\",\n      )\n      break\n    case 4: // 请求商品\n      console.log(\n        \"------------------------- {执行《请求商品》操作} --------------------------\",\n      )\n      break\n    default:\n      console.log(\n        \"------------------------- {错误操作,没有接收到method} --------------------------\",\n      )\n      break\n  }\n  // -------------- 加载 type分类列表 数据 --------------\n  const res_indexType = await indexType()\n  if (res_indexType.code != 200) {\n    toast.warning(\"loading type options error, please try again later\")\n    return\n  }\n  // -------------- 加载 condition条件列表 数据 --------------\n})\n</script>\n\n<style lang=\"scss\" scoped>\n.container {\n  width: 100%;\n  min-height: 100vh;\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.content {\n  width: 100%;\n  min-height: 100vh;\n  padding-bottom: 100px;\n  box-sizing: border-box;\n  background-color: #f4f6fe;\n}\n\n/* ------------------------ 标题区域 ----------------------- */\n.title {\n  width: 100%;\n  height: 200px;\n  padding: 20px;\n  box-sizing: border-box;\n\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n\n  background-color: #235597;\n\n  font-size: 20px;\n  font-weight: 900;\n  line-height: normal;\n  letter-spacing: 0px;\n\n\n  color: #ffffff;\n}\n\n/* ---------------- 四个选项的通用代码 ---------------------*/\n.my_form {\n  width: 100%;\n  height: auto;\n\n  padding: 14px;\n  box-sizing: border-box;\n\n  margin-bottom: 10px;\n\n  .custom_WotCellGroud {\n    border-radius: 10px;\n    overflow: hidden;\n    box-shadow: 1px 1px 1px 1px rgba(126, 126, 126, 0.25);\n    margin-bottom: 10px;\n\n\n    font-size: 18px;\n    font-weight: 600;\n    line-height: normal;\n    letter-spacing: normal;\n    color: #3d3d3d;\n  }\n\n  .custom_WotCellTitleFont {\n\n    font-size: 18px;\n    font-weight: 500;\n    line-height: normal;\n    letter-spacing: normal;\n    color: #3d3d3d;\n  }\n\n  .custom_WotDropMenu,\n  .custom_WotDropMenuItem,\n  .custom_WotDropMenuPopup {\n\n    font-size: 16px;\n    font-weight: 500;\n    line-height: normal;\n    letter-spacing: normal;\n    color: #3d3d3d;\n  }\n\n  .custom_WotDropMenuPopup {\n    width: 50% !important;\n    width: 100px !important;\n    margin: 14px;\n    box-sizing: border-box;\n    background-color: transparent;\n  }\n}\n</style>\n"],"names":["Dayjs","constructor","dateStr","__publicField","this","utc","parsedDate","parseConfig","date","Date","timeZone","getTimezoneOffset","timeZoneString","padNumber","String","replace","mYear","getFullYear","mMonth","getMonth","mDay","getDate","mWeek","getDay","mHour","getHours","mMinute","getMinutes","mSecond","getSeconds","isDate","test","substr","num","length","padChar","Array","join","year","month","unix","timeZoneOffset","Math","floor","getTime","toString","toUTCString","startOf","unit","add","amount","interval","newUnixTime","subtract","format","formatStr","weekdays","match","slice","dayjs","TABS_KEY","Symbol","tabsProps","__spreadProps","baseProps","modelValue","makeNumericProp","slidableNum","makeNumberProp","mapNum","mapTitle","sticky","makeBooleanProp","offsetTop","swipeable","autoLineWidth","lineWidth","numericProp","lineHeight","color","makeStringProp","inactiveColor","animated","duration","slidable","tabProps","name","title","disabled","lazy","badgeProps","Object","options","addGlobalClass","virtualHost","styleIsolation","props","__props","proxy","getCurrentInstance","parent","tabs","index","useParent","active","computed","isDef","state","activeIndex","value","painted","ref","tabBodyStyle","style","display","objToStyle","shouldBeRender","watch","val","newValue","isNumber","isString","self","myName","children","forEach","child","$","uid","console","error","checkName","deep","immediate","showZero","bgColor","max","Number","isDot","Boolean","hidden","type","top","right","content","isNaN","contentStyle","backgroundColor","addUnit","shouldShowBadge","resizeProps","customContainerClass","emit","__emit","expandScrollTop","shrinkScrollTop","expandScrollLeft","shrinkScrollLeft","height","width","scrollEventCount","rootStyle","customStyle","onScrollHandler","resizeId","uuid","scrollToBottom","lastWidth","lastHeight","onMounted","uni.createSelectorQuery","in","select","boundingClientRect","exec","res","result","propName","newHeight","newWidth","emitStack","push","stickyProps","zIndex","STICKY_BOX_KEY","styckyId","observerList","stickyState","reactive","position","boxLeaved","stickyBox","stickyStyle","containerStyle","innerOffsetTop","handleResize","detail","__async","pause","offset","pop","disconnect","clearObserver","observer","uni.createIntersectionObserver","thresholds","createObserver","relativeToViewport","observe","handleRelativeTo","getRect","then","bottom","observerContentScroll","observerForChild","boxStyle","isStycky","__expose","setPosition","styckyBoxId","observerMap","Map","stickyList","linkChildren","useChildren","temp","find","clear","get","delete","deleteObserver","set","exposed","catch","log","childOffsetTop","isAbsolute","onBeforeMount","$item","translate","useTranslate","lineStyle","useInnerLine","inited","animating","mapShow","scrollLeft","touch","useTouch","innerSlidable","bodyStyle","left","getTabName","tab","updateActive","init","setScroll","getActiveIndex","updateLineStyle","scrollIntoView","setActiveTab","setActive","debounce","leading","toggleMap","setTimeout","animation","textRects","textWidth","borderRadius","rects","rect","reduce","prev","curr","transform","transition","Promise","all","navItemsRects","navRect","selectItem","random","handleSelect","onTouchStart","event","touchStart","onTouchMove","touchMove","onTouchEnd","direction","deltaX","offsetX","findIndex","item","nextTick","checkNumRange","tagProps","useIconSlot","icon","closable","plain","dynamic","round","mark","tagClass","dynamicValue","dynamicInput","computeTagClass","indexOf","rootClass","customClass","textStyle","tagClassList","handleClick","handleClose","handleAdd","handleBlur","setDynamicInput","handleConfirm","weeks","compareDate","date1","date2","dateValue1","dateValue2","year1","year2","month1","month2","day1","day2","compareMonth","compareYear","getMonthEndDay","formatMonthTitle","formatYearTitle","getWeekRange","firstDayOfWeek","dateValue","setHours","day","week","weekStart","weekEnd","getDayByOffset","setDate","getDateByDefaultTime","defaultTime","setMinutes","setSeconds","times","n","iteratee","getTimeData","minDate","maxDate","isHideSecond","filter","compareMin","compareMax","minHour","maxHour","minMinute","maxMinute","minSecond","maxSecond","minTime","currentTime","maxTime","columns","hours","label","padZero","minutes","seconds","isFunction","values","getWeekNumber","getItemClass","monthType","classList","isArray","yearProps","makeRequiredProp","formatter","Function","maxRange","rangePrompt","allowSameDay","showTitle","toast","useToast","months","monthTypeClass","yearTitle","getMonthType","startDate","endDate","handleDateClick","handleMonthChange","compare","getMonthOffset","maxEndDate","setMonth","getMonthByOffset","show","msg","handleMonthRangeChange","getFormatterDate","monthObj","text","topInfo","bottomInfo","isLastRow","monthList","now","deepClone","setMonths","yearPanelProps","showPanelTitle","panelHeight","scrollTop","scrollIndex","scrollHeight","years","setFullYear","getYears","map","activeDate","yearScroll","doSetSubtitle","handleDateChange","monthProps","days","dayTypeClass","monthTitle","firstDayStyle","dayStyle","marginLeft","currentDate","currentDay","daysInMonth","totalDaysShown","totalRows","ceil","getDayType","getDateType","isSelected","some","prevDay","getPrevDay","nextDay","getNextDay","prevSelected","nextSelected","getDatesType","getDatetimeType","getWeektimeType","currentValue","dateIndex","_","handleDatesChange","handleDateRangeChange","handleWeekChange","weekStartDate","startWeekStartDate","handleWeekRangeChange","isEnd","dayObj","dayList","totalDay","firstWeekRange","endWeekRange","getWeekValue","setDays","monthPanelProps","timeFilter","hideSecond","immediateChange","timeValue","timeType","innerValue","handleChange","timeData","timeColumns","start","end","dataValue","dateTime","finalValue","weekLabel","getWeekLabel","getMonths","rows","sort","a","b","activeMonthIndex","row","setTime","hour","minute","second","getTimeValue","isEqual","handleTimeChange","handlePickStart","handlePickEnd","monthScroll","calendarViewProps","default","formatDefauleTime","yearPanelRef","monthPanelRef","split","parseInt","time","getDefaultTime","panel","actionSheetProps","customHeaderClass","__spreadValues","actions","makeArrayProp","panels","cancelText","closeOnClickAction","closeOnClickModal","lazyRender","safeAreaInsetBottom","formatPanels","showPopup","isPanelArray","rowIndex","colIndex","loading","close","handleClickModal","handleCancel","handleOpen","handleOpened","handleClosed","calendarProps","labelWidth","readonly","placeholder","alignRight","required","size","center","showConfirm","confirmText","displayFormat","innerDisplayFormat","ellipsis","showTypeSwitch","shortcuts","onShortcutsClick","beforeConfirm","prop","rules","customViewClass","customLabelClass","customValueClass","withCell","defaultDisplayFormat","adjustedYear","week1","week2","weekEnd1","weekEnd2","adjustedYear1","adjustedYear2","formatRange","rangeType","pickerShow","calendarValue","lastCalendarValue","confirmBtnDisabled","currentTab","lastTab","currentType","lastCurrentType","cell","useCell","calendarView","calendarTabs","rangeLabel","showValue","oldVal","getConfirmBtnStatus","oldValue","rangeTabs","form","FORM_KEY","errorMessage","errorMessages","isRequired","formRequired","key","prototype","hasOwnProperty","call","rule","range","isRange","open","handleTypeChange","resolve","isPass","onConfirm","currentType_fromOptions","formRef","formData","methodtype","cate_id","condition","description","price","images","from","to","datetime","quantity","type_options","handleSubmit","validate","valid","errors","showSuccess","onLoad","NestedObjectOptions","flattenToNestedObject","method","indexType","code","warning"],"mappings":"w1DAGA,MAAMA,GAYJ,WAAAC,CAAYC,GAXZC,EAAAC,KAAA,OACAD,EAAAC,KAAA,QACAD,EAAAC,KAAA,YACAD,EAAAC,KAAA,kBACAD,EAAAC,KAAA,SACAD,EAAAC,KAAA,UACAD,EAAAC,KAAA,QACAD,EAAAC,KAAA,SACAD,EAAAC,KAAA,SACAD,EAAAC,KAAA,WACAD,EAAAC,KAAA,WAEEA,KAAKC,KAAM,EACX,MAAMC,EAAaF,KAAKG,YAAYL,GACpCE,KAAKI,KAAO,IAAIC,KAAKH,GACrBF,KAAKM,SAAWN,KAAKI,KAAKG,oBAAsB,GAChDP,KAAKQ,eAAiBR,KAAKS,UAAUC,QAAO,EAAKV,KAAKM,UAAUK,QAAQ,YAAa,WAAY,EAAG,KACpGX,KAAKY,MAAQZ,KAAKI,KAAKS,cACvBb,KAAKc,OAASd,KAAKI,KAAKW,WACxBf,KAAKgB,KAAOhB,KAAKI,KAAKa,UACtBjB,KAAKkB,MAAQlB,KAAKI,KAAKe,SACvBnB,KAAKoB,MAAQpB,KAAKI,KAAKiB,WACvBrB,KAAKsB,QAAUtB,KAAKI,KAAKmB,aACzBvB,KAAKwB,QAAUxB,KAAKI,KAAKqB,YAAW,CAGtC,WAAAtB,CAAYL,GACV,OAAKA,EACD4B,EAAO5B,GAAiBA,EACxB,YAAY6B,KAAK7B,IACnBE,KAAKC,KAAM,EACJ,GAAIH,EAAmB8B,OAAO,EAAG,MAAO9B,EAAmB8B,OAAO,EAAG,MAAO9B,EAAmB8B,OAAO,EAAG,MAE3G9B,MANkBO,IAMlB,CAGT,SAAAI,CAAUoB,EAAYC,EAAeC,GACnC,OAAQF,GAAOA,EAAIC,QAAUA,EAASD,EAAM,GAAGG,MAAMF,EAAS,EAAID,EAAIC,QAAQG,KAAKF,KAAWF,GAAG,CAGnG,IAAAK,GACE,OAAOlC,KAAKY,KAAA,CAGd,KAAAuB,GACE,OAAOnC,KAAKc,MAAA,CAGd,IAAAsB,GACE,MAAMC,EAAiBrC,KAAKC,IAAM,GAAKD,KAAKM,SAAW,GAAK,IAAO,EACnE,OAAOgC,KAAKC,OAAOvC,KAAKI,KAAKoC,UAAYH,GAAkB,IAAI,CAGjE,QAAAI,GACE,OAAOzC,KAAKI,KAAKsC,aAAY,CAG/B,OAAAC,CAAQC,GACN,OAAQA,GACN,IAAK,OACH,OAAO,IAAIhD,GAAM,IAAIS,KAAKL,KAAKkC,OAAQ,EAAG,IAC5C,IAAK,QACH,OAAO,IAAItC,GAAM,IAAIS,KAAKL,KAAKkC,OAAQlC,KAAKmC,QAAS,IACvD,QACE,OAAOnC,KACX,CAGF,GAAA6C,CAAIC,EAAeF,GACjB,IAAIG,EACJ,OAAQH,GACN,IAAK,IACL,IAAK,UACHG,EAAW,GACX,MACF,IAAK,IACL,IAAK,QACHA,EAAW,KACX,MACF,IAAK,IACL,IAAK,OACHA,EAAW,MACX,MACF,IAAK,IACL,IAAK,QACHA,EAAW,OACX,MACF,QACEA,EAAW,EAEf,MAAMC,EAAchD,KAAKoC,OAASU,EAASC,EAC3C,OAAO,IAAInD,GAAM,IAAOoD,EAAW,CAGrC,QAAAC,CAASH,EAAeF,GACtB,OAAO5C,KAAK6C,KAAI,EAAKC,EAAQF,EAAI,CAGnC,MAAAM,CAAOC,EAAY,wBACjB,MAAMC,EAAW,CAAC,SAAU,SAAU,UAAW,YAAa,WAAY,SAAU,YACpF,OAAOD,EAAUxC,QAAQ,2DAA6D0C,IACpF,OAAQA,GACN,IAAK,KACH,OAAO3C,OAAOV,KAAKY,OAAO0C,OAAM,GAClC,IAAK,OACH,OAAO5C,OAAOV,KAAKY,OACrB,IAAK,IACH,OAAOF,OAAOV,KAAKc,OAAS,GAC9B,IAAK,KACH,OAAOd,KAAKS,UAAUC,OAAOV,KAAKc,OAAS,GAAI,EAAG,KACpD,IAAK,IACH,OAAOJ,OAAOV,KAAKgB,MACrB,IAAK,KACH,OAAOhB,KAAKS,UAAUC,OAAOV,KAAKgB,MAAO,EAAG,KAC9C,IAAK,IACH,OAAON,OAAOV,KAAKkB,OACrB,IAAK,OACH,OAAOkC,EAASpD,KAAKkB,OACvB,IAAK,IACH,OAAOR,OAAOV,KAAKoB,OACrB,IAAK,KACH,OAAOpB,KAAKS,UAAUC,OAAOV,KAAKoB,OAAQ,EAAG,KAC/C,IAAK,IACH,OAAOV,OAAOV,KAAKsB,SACrB,IAAK,KACH,OAAOtB,KAAKS,UAAUC,OAAOV,KAAKsB,SAAU,EAAG,KACjD,IAAK,IACH,OAAOZ,OAAOV,KAAKwB,SACrB,IAAK,KACH,OAAOxB,KAAKS,UAAUC,OAAOV,KAAKwB,SAAU,EAAG,KACjD,IAAK,IACH,MAAO,GAAGxB,KAAKQ,eAAe8C,MAAM,WACtC,IAAK,KACH,OAAOtD,KAAKQ,eACd,QACE,OAAO6C,IAEZ,EAIG,SAASE,GAAMzD,GACtB,OAAO,IAAIF,GAAME,EAClB,CClIO,MAAM0D,GAAsCC,OAAO,WAE7CC,GAAYC,OACpBC,GADoB,CAKvBC,WAAYC,EAAgB,GAI5BC,YAAaC,EAAe,GAI5BC,OAAQD,EAAe,IAIvBE,SAAUxD,OAIVyD,OAAQC,GAAgB,GAIxBC,UAAWL,EAAe,GAI1BM,UAAWF,GAAgB,GAI3BG,cAAeH,GAAgB,GAI/BI,UAAWC,EAIXC,WAAYD,EAIZE,MAAOC,EAAe,IAItBC,cAAeD,EAAe,IAI9BE,SAAUV,GAAgB,GAI1BW,SAAUf,EAAe,KAMzBgB,SAAUJ,EAA6B,UC9E5BK,GAAWtB,OACnBC,GADmB,CAKtBsB,KAAMT,EAINU,MAAOzE,OAIP0E,SAAUhB,GAAgB,GAK1BiB,KAAMjB,GAAgB,GAItBkB,WAAYC,uBClBC,CACbL,KAAM,SACNM,QAAS,CACPC,gBAAgB,EAChBC,aAAa,EACbC,eAAgB,+BAYpB,MAAMC,EAAQC,GAERC,MAAEA,GAAUC,KACVC,OAAQC,EAAAC,MAAMA,GAAUC,GAAU3C,IAGpC4C,EAASC,EAAS,MACfC,EAAML,IAAQA,EAAKM,MAAMC,cAAgBN,EAAMO,OAGlDC,EAAUC,EAAaP,EAAOK,OAE9BG,EAAeP,EAAS,KAC5B,MAAMQ,EAAuB,CAAA,EAI7B,OAHKT,EAAOK,OAAWH,EAAML,IAAUA,EAAKL,MAAMd,WAChD+B,EAAMC,QAAU,QAEXC,EAAWF,KAGdG,EAAiBX,EAAS,KAAOT,EAAMP,MAAQqB,EAAQD,OAASL,EAAOK,cAE7EQ,EAAMb,EAASc,IACTA,IAAKR,EAAQD,OAAQ,KAG3BQ,EACE,IAAMrB,EAAMV,KACXiC,KACKb,EAAMa,IAAcC,EAASD,IAAcE,EAASF,GAIpDlB,GAcR,SAAmBqB,GACjB,MAAQpC,KAAMqC,GAAW3B,EACzB,GAAI2B,SAAsD,KAAXA,EAC7C,OAEFtB,GACEA,EAAKuB,SAASC,QAASC,IACjBA,EAAMC,EAAEC,MAAQN,EAAKK,EAAEC,KAAOF,EAAMxC,OAASqC,GAC/CM,QAAQC,MAAM,0BAA0BP,oBAE3C,CAvBCQ,CAAUjC,GAJV+B,QAAQC,MAAM,wEAOlB,CACEE,MAAM,EACNC,WAAW,sXClDF3C,GAAa3B,OACrBC,GADqB,CAKxBC,WAAYY,EAEZyD,SAAU9D,GAAgB,GAC1B+D,QAASzH,OAIT0H,IAAKC,OAILC,MAAOC,QAIPC,OAAQD,QAIRE,KAAM7D,OAAsC,GAI5C8D,IAAKjE,EAILkE,MAAOlE,kBCjCM,CACbS,KAAM,WACNM,QAAS,CACPC,gBAAgB,EAChBC,aAAa,EACbC,eAAgB,+BASpB,MAAMC,EAAQC,EACR+C,EAAUvC,EAAS,KACvB,MAAMxC,WAAEA,EAAAuE,IAAYA,EAAAE,MAAKA,GAAU1C,EACnC,GAAI0C,EAAO,MAAO,GAClB,IAAI7B,EAAQ5C,EAIZ,OAHI4C,GAAS2B,GAAOhB,EAASX,KAAW4B,OAAOQ,MAAMpC,KAAW4B,OAAOQ,MAAMT,KAC3E3B,EAAQ2B,EAAM3B,EAAQ,GAAG2B,KAAS3B,GAE7BA,IAGHqC,EAAezC,EAAS,KAC5B,MAAMQ,EAAuB,CAAA,EAY7B,OAXIP,EAAMV,EAAMuC,WACdtB,EAAMkC,gBAAkBnD,EAAMuC,SAG5B7B,EAAMV,EAAM8C,OACd7B,EAAM6B,IAAMM,EAAQpD,EAAM8C,MAGxBpC,EAAMV,EAAM+C,SACd9B,EAAM8B,MAAQK,EAAQpD,EAAM+C,QAEvB5B,EAAWF,KAIdoC,EAAkB5C,EAAS,KAAOT,EAAM4C,SAAWI,EAAQnC,OAA4B,IAAlBmC,EAAQnC,OAAeb,EAAMsC,UAAatC,EAAM0C,wbCrD9GY,GAAcvF,OACtBC,GADsB,CAEzBuF,qBAAsBvE,EAAe,oBC6BxB,CACbM,KAAM,YACNM,QAAS,CACPE,aAAa,EACbD,gBAAgB,EAChBE,eAAgB,yDAUpB,MAAMC,EAAQC,EACRuD,EAAOC,EAEPC,EAAkB3C,EAAY,GAC9B4C,EAAkB5C,EAAY,GAC9B6C,EAAmB7C,EAAY,GAC/B8C,EAAmB9C,EAAY,GAC/B+C,EAAS/C,EAAY,GACrBgD,EAAQhD,EAAY,GACpBiD,EAAmBjD,EAAY,GAE/BkD,EAAYxD,EAAS,KACzB,MAAMQ,EAAyC,CAC7C8C,MAAOX,EAAQW,EAAMlD,OACrBiD,OAAQV,EAAQU,EAAOjD,QAEzB,MAAO,GAAGM,EAAWF,KAASjB,EAAMkE,gBAEtC,IAAIC,EAAkB,OACtB,MAAMjE,MAAEA,GAAUC,IAEZiE,EAAWrD,EAAY,SAASsD,OAiEtC,SAASC,GAAeC,UAAEA,EAAAC,WAAWA,IACnCd,EAAgB7C,MAAQ,IAAS2D,EACjCb,EAAgB9C,MAAQ,EAAIiD,EAAOjD,MAAQ2D,EAC3CZ,EAAiB/C,MAAQ,IAAS0D,EAClCV,EAAiBhD,MAAQ,EAAIkD,EAAMlD,MAAQ0D,CAAA,QAnE7CE,EAAU,KAEMC,IAA0BC,GAAGzE,GAAO0E,OAAO,IAAIR,EAASvD,SAASgE,qBACzEC,KAAK,EAAEC,MAEX,IAAIP,EAAaO,EAAIjB,OACjBS,EAAYQ,EAAIhB,MAEpBD,EAAOjD,MAAQ2D,EACfT,EAAMlD,MAAQ0D,EAEdJ,EAAkB,KACFO,IAA0BC,GAAGzE,GAAO0E,OAAO,IAAIR,EAASvD,SAASgE,qBACzEC,KAAK,EAAEC,MAEX,GAAiC,IAA7Bf,EAAiBnD,QAAe,CAClC,MAAMmE,EAA0C,CAAA,EAC/C,CAAC,SAAU,MAAO,OAAQ,QAAS,SAAU,SAASnD,QAASoD,IAC9DD,EAAOC,GAAYF,EAAIE,KAEzBzB,EAAK,SAAUwB,EAAM,CAGvB,GAAIhB,EAAiBnD,MAAQ,EAAG,OAGhC,MAAMqE,EAAYH,EAAIjB,OAChBqB,EAAWJ,EAAIhB,MAErBD,EAAOjD,MAAQqE,EACfnB,EAAMlD,MAAQsE,EAEd,MAAMC,EAAsB,GAS5B,GARIF,IAAcV,IAChBA,EAAaU,EACbE,EAAUC,KAAK,IAEbF,IAAaZ,IACfA,EAAYY,EACZC,EAAUC,KAAK,IAEQ,IAArBD,EAAUlJ,OAAc,CAC1B,MAAM8I,EAA8B,CAAA,EACnC,CAAC,SAAU,MAAO,OAAQ,QAAS,SAAU,SAASnD,QAASoD,IAC9DD,EAAOC,GAAYF,EAAIE,KAEzBzB,EAAK,SAAUwB,EAAM,CAGvBV,EAAe,CACbC,YACAC,kBAKNF,EAAe,CACbC,YACAC,w3BC/HOc,GAAcvH,OACtBC,GADsB,CAKzBuH,OAAQnH,EAAe,GAIvBK,UAAWL,EAAe,KCQfoH,GAAiD3H,OAAO,+BCNtD,CACbyB,KAAM,YACNM,QAAS,CACPC,gBAAgB,EAChBC,aAAa,EACbC,eAAgB,0CAapB,MAAMC,EAAQC,EACRwF,EAAW1E,EAAY,YAAYsD,OACnCqB,EAAe3E,EAAmC,IAElD4E,EAAcC,EAAS,CAC3BC,SAAU,WACVC,WAAW,EACXhD,IAAK,EACLgB,OAAQ,EACRC,MAAO,EACPpD,MAAO,MAGDP,OAAQ2F,GAAcxF,GAAUiF,KAElCtF,MAAEA,GAAUC,IAEZ8D,EAAYxD,EAAS,KACzB,MAAMQ,EAAuB,CAC3B,UAAWjB,EAAMuF,OACjBzB,OAAQV,EAAQuC,EAAY7B,QAC5BC,MAAOX,EAAQuC,EAAY5B,QAK7B,OAHK4B,EAAYG,YACf7E,EAAgB,SAAI,YAEf,GAAGE,EAAWF,KAASjB,EAAMkE,gBAGhC8B,EAAcvF,EAAS,KAC3B,MAAMQ,EAAuB,CAC3B,UAAWjB,EAAMuF,OACjBzB,OAAQV,EAAQuC,EAAY7B,QAC5BC,MAAOX,EAAQuC,EAAY5B,QAK7B,OAHK4B,EAAYG,YACf7E,EAAgB,SAAI,YAEf,GAAGE,EAAWF,OAGjBgF,EAAiBxF,EAAS,KAC9B,MAAMQ,EAAuB,CAC3B4E,SAAUF,EAAYE,SACtB/C,IAAKM,EAAQuC,EAAY7C,MAE3B,OAAO3B,EAAWF,KAGdiF,EAAiBzF,EAAS,KAC9B,IAAIqC,EAAc,EAOlB,OAHAA,EAAM,MAGO9C,EAAMvB,YAsBrB,SAAe0H,EAAaC,GAAa,OAAAC,EAAAjM,KAAA,KAAA,YACvCuL,EAAY5B,MAAQqC,EAAOrC,MAC3B4B,EAAY7B,OAASsC,EAAOtC,aACtBwC,IAQR,WACE,GAA2B,IAAvBX,EAAY7B,QAAsC,IAAtB6B,EAAY5B,MAAa,OACzD,MAAMwC,EAASL,EAAerF,MAAQ8E,EAAY7B,QA7BpD,WACE,KAAqC,IAA9B4B,EAAa7E,MAAM3E,QACxBwJ,EAAa7E,MAAM2F,MAAOC,YAC5B,EA2BAC,GAtBF,WACE,MAAMC,EAAWC,EAA+B1G,EAAO,CAAE2G,WAAY,CAAC,EAAG,MAEzE,OADAnB,EAAa7E,MAAMwE,KAAKsB,GACjBA,CAAA,CAoBPG,GACGC,mBAAmB,CAClBjE,KAAMyD,IAEPS,QAAQ,IAAIvB,EAAS5E,QAAUmE,IAC9BiC,EAAiBjC,KAErBkC,EAAQ,IAAIzB,EAAS5E,SAAS,EAAOX,GAAOiH,KAAMpC,IAGhDA,EAAIqC,OAAS3E,OAAOsC,EAAIqC,QAAU,GAE9B3E,OAAOsC,EAAIqC,SAAWb,GAAQU,EAAiB,CAAEpC,mBAAoBE,KAC1E,CAxBDsC,GACKtB,GAAcA,EAAUuB,kBAC7BvB,EAAUuB,iBAAiBpH,EAAK,EAAA,CA2BlC,SAAS+G,GAAiBpC,mBAAEA,IAE1B,GAAIkB,GAAaA,EAAUwB,UAAY5B,EAAY7B,QAAUiC,EAAUwB,SAASzD,OAG9E,OAFA6B,EAAYE,SAAW,gBACvBF,EAAY7C,IAAM,GAIpB,IAAI0E,EAAW3C,EAAmB/B,KAAOoD,EAAerF,MAExD2G,EAAW3C,EAAmB/B,IAAMoD,EAAerF,MAG/C2G,GACF7B,EAAYhF,MAAQ,SACpBgF,EAAYG,WAAY,EACxBH,EAAYE,SAAW,QACvBF,EAAY7C,IAAMoD,EAAerF,QAEjC8E,EAAYhF,MAAQ,SACpBgF,EAAYG,WAAY,EACxBH,EAAYE,SAAW,WACvBF,EAAY7C,IAAM,EACpB,QAeF2E,EAAa,CACXC,YAPF,SAAqB5B,EAAoBD,EAAkB/C,GACzD6C,EAAYG,UAAYA,EACxBH,EAAYE,SAAWA,EACvBF,EAAY7C,IAAMA,CAAA,EAKlB6C,cACAlH,UAAWuB,EAAMvB,4fC7KJ,CACba,KAAM,gBACNM,QAAS,CACPC,gBAAgB,EAEhBE,eAAgB,8BAapB,MAAMC,EAAQC,EAER0H,EAAc5G,EAAY,gBAAgBsD,OAE1CuD,EAAc7G,EAAmB,IAAI8G,KAErCN,EAAW3B,EAAS,CACxB9B,OAAQ,EACRC,MAAO,KAGH7D,MAAEA,GAAUC,KAEVyB,SAAUkG,EAAAC,aAAYA,GAAiBC,GAAYxC,IAc3D,SAASW,EAAaC,GAEpBmB,EAASxD,MAAQqC,EAAOrC,MACxBwD,EAASzD,OAASsC,EAAOtC,OAEzB,MAAMmE,EAAOL,EAAY/G,MACzB+G,EAAY/G,UAAYgH,IACxB,IAAA,MAAY7F,KAAQiG,EAAM,CAIxBX,EAHcQ,EAAWI,KAAM3J,GACtBA,EAAOwD,EAAEC,MAAQA,GAEJ,CAExBiG,EAAKpG,QAAS8E,IACZA,EAASF,eAEXwB,EAAKE,OAAM,CAyBb,SAASb,EAAiBxF,IAnB1B,SAAwBA,GACtB,MAAM6E,EAAWiB,EAAY/G,MAAMuH,IAAItG,EAAMC,EAAEC,KAC1C2E,IACLA,EAASF,aACTmB,EAAY/G,MAAMwH,OAAOvG,EAAMC,EAAEC,KAAG,CAgBpCsG,CAAexG,GACf,MAAM6E,EAXR,SAAwB7E,GACtB,MAAM6E,EAAWC,EAA+B1G,EAAO,CAAE2G,WAAY,CAAC,EAAG,MAEzE,OADAe,EAAY/G,MAAM0H,IAAIzG,EAAMC,EAAEC,IAAK2E,GAC5BA,CAAA,CAQUG,CAAehF,GAC1B0G,EAAU1G,EAAMC,EAAEyG,QACxB,IAAIjC,EAASiC,EAAQ7C,YAAY7B,OAAS0E,EAAQ/J,UAIlD8H,GAAkB,GAGdgB,EAASzD,QAAU0E,EAAQ7C,YAAY7B,QACzC0E,EAAQd,aAAY,EAAO,WAAY,GAEzCf,EAASI,mBAAmB,CAAEjE,KAAMyD,IAAUS,QAAQ,IAAIW,EAAY9G,QAAUmE,IAC9EiC,EAAiBuB,EAASxD,KAG5BkC,EAAQ,IAAIS,EAAY9G,SAAS,EAAOX,GACrCiH,KAAMpC,IAGLA,EAAIqC,OAAS3E,OAAOsC,EAAIqC,QAAU,GAE9B3E,OAAOsC,EAAIqC,SAAWb,GAAQU,EAAiBuB,EAAS,CAAE3D,mBAAoBE,MAEnF0D,MAAO1D,IACN9C,QAAQyG,IAAI3D,IACb,CAOL,SAASkC,EAAiBuB,GAAc3D,mBAAEA,IACxC,IAAI8D,EAAiBH,EAAQ/J,UAI7BkK,GAAkC,GAElC,MAAMpC,EAASiC,EAAQ7C,YAAY7B,OAAS6E,EAC5C,IAAIC,EAAa/D,EAAmBuC,QAAUb,EAI9C,GAFAqC,EAAa/D,EAAmBuC,OAASb,EAErCqC,EACFJ,EAAQd,aAAY,EAAM,WAAY7C,EAAmBf,OAAS0E,EAAQ7C,YAAY7B,aAAM,GACnFe,EAAmB/B,KAAOyD,IAAWqC,EAAY,CAC1D,GAAkC,WAA9BJ,EAAQ7C,YAAYhF,MAAoB,OAC5C6H,EAAQd,aAAY,EAAO,QAASiB,EAAc,CACpD,QA1GFZ,EAAa,CACXR,WACAD,qBAGFuB,EAAc,KACZjB,EAAY/G,UAAYgH,mWCgFX,CACbvI,KAAM,UACNM,QAAS,CACPC,gBAAgB,EAChBC,aAAa,EACbC,eAAgB,yGAepB,MAAM+I,EAAQ,qBAIR9I,EAAQC,EACRuD,EAAOC,GAELsF,UAAAA,GAAcC,GAAa,QAE7BrI,EAAQiF,EAAS,CACrBhF,YAAa,EACbqI,UAAW,gBACXC,cAAc,EACdC,QAAQ,EACRC,WAAW,EACXC,SAAS,EACTC,WAAY,KAGR1H,SAAEA,EAAAmG,aAAUA,GAAiBC,GAAYpK,IAC/CmK,EAAa,CAAEpH,QAAOX,UAEtB,MAAME,MAAEA,GAAUC,IAEZoJ,EAAQC,KAERC,EAAgBhJ,EAAS,IACH,WAAnBT,EAAMZ,UAAyBwC,EAAS1F,OAAS8D,EAAM7B,aAG1DuL,EAAYjJ,EAAS,IACpBT,EAAMd,SAIJiC,EAAW,CAChBwI,MAAM,IAAOhJ,EAAMC,YAAc,IACjC,sBAAuBZ,EAAMb,SAAW,KACxC,8BAA+Ba,EAAMb,SAAW,OANzC,IAULyK,EAAa,CAACC,EAA6BvJ,IACxCI,EAAMmJ,EAAIvK,MAAQuK,EAAIvK,KAAOgB,EAShCwJ,EAAe,CAACjJ,EAAyB,EAAGkJ,GAAgB,EAAOC,GAAqB,KAEpE,IAApBpI,EAAS1F,SAEb2E,EAAQoJ,EAAepJ,GAEnBe,EAASf,GAAOrB,WACpBmB,EAAMC,YAAcC,EAChBmJ,IACFE,GAAyB,IAATH,GAChBI,KAmIJ,WACE,IAAKxJ,EAAMwI,OAAQ,OACnB,MAAM7J,EAAOsK,EAAWhI,EAASjB,EAAMC,aAAcD,EAAMC,aACvDtB,IAASU,EAAM/B,aACjBuF,EAAK,SAAU,CACblD,MAAOK,EAAMC,YACbtB,SAEFkE,EAAK,oBAAqBlE,GAC5B,CA1IA8K,MAQIC,EAAYC,EAASR,EAAc,IAAK,CAAES,SAAS,IAqEzD,SAASC,IACH7J,EAAM0I,SACR1I,EAAMyI,WAAY,EAClBqB,WAAW,KACT9J,EAAM0I,SAAU,GACf,OAEH1I,EAAM0I,SAAU,EAChBoB,WAAW,KACT9J,EAAMyI,WAAY,GACjB,KACL,CAOF,SAAec,EAAgBQ,GAAqB,GAAM,OAAArE,EAAAjM,KAAA,KAAA,YACxD,IAAKuG,EAAMwI,OAAQ,OACnB,MAAMxK,cAAEA,EAAAC,UAAeA,EAAAE,WAAWA,GAAekB,EACjD,IACE,MAAMiJ,EAA2B,CAAA,EACjC,GAAIvI,EAAM9B,GACRqK,EAAUlF,MAAQX,EAAQxE,QAE1B,GAAID,EAAe,CACjB,MAAMgM,QAAkBzD,EAvKd,2BAuKiC,EAAMhH,GAC3C0K,EAAYnI,OAAOkI,EAAUhK,EAAMC,aAAamD,OACtDkF,EAAUlF,MAAQX,EAAQwH,EAAS,CAGnClK,EAAM5B,KACRmK,EAAUnF,OAASV,EAAQtE,GAC3BmK,EAAU4B,aAAe,QAAQzH,EAAQtE,WAE3C,MAAMgM,QAAc5D,EAAQ4B,GAAO,EAAM5I,GACnC6K,EAAOD,EAAMnK,EAAMC,aACzB,IAAI+I,EAAOmB,EAAMpN,MAAM,EAAGiD,EAAMC,aAAaoK,OAAO,CAACC,EAAMC,IAASD,EAAOxI,OAAOyI,EAAKnH,OAAQ,GAAKtB,OAAOsI,EAAKhH,OAAS,EACrH4F,IACFV,EAAUkC,UAAY,cAAcxB,wBAChCe,IACFzB,EAAUmC,WAAa,yFAEzBzK,EAAMuI,cAAe,EACrBvI,EAAMsI,UAAY9H,EAAW8H,GAC/B,OACO/G,GACPD,QAAQC,MAAM,oDAAqDA,EAAK,CAC1E,EAAA,CAeF,SAASiI,IACFxJ,EAAMwI,QACXkC,QAAQC,IAAI,CAACpE,EAAQ4B,GAAO,EAAM5I,GAAQgH,EA7MzB,2BA6M6C,EAAOhH,KAASiH,KAAK,EAAEoE,EAAeC,MAElG,MAAMC,EAAaF,EAAc5K,EAAMC,aAIjC+I,EAFc4B,EAAsB7N,MAAM,EAAGiD,EAAMC,aAAaoK,OAAO,CAACC,EAAWC,IAAcD,EAAOC,EAAKnH,MAAO,IAE9FyH,EAAgBzH,MAAQtB,OAAOgJ,EAAW1H,QAAU,EAC5E4F,IAAShJ,EAAM2I,WACjB3I,EAAM2I,WAAaK,EAAOjN,KAAKgP,SAAW,IAE1C/K,EAAM2I,WAAaK,GAEtB,CAOH,SAASgC,EAAarL,GACpB,QAAc,IAAVA,EAAqB,OACzB,MAAMd,SAAEA,GAAaoC,EAAStB,GACxBhB,EAAOsK,EAAWhI,EAAStB,GAAQA,GAErCd,EACFgE,EAAK,WAAY,CACflD,QACAhB,UAIJqB,EAAM0I,SAAWmB,IACjBH,EAAU/J,GACVkD,EAAK,QAAS,CACZlD,QACAhB,SACD,CAEH,SAASsM,EAAaC,GACf7L,EAAMtB,WACX6K,EAAMuC,WAAWD,EAAK,CAExB,SAASE,EAAYF,GACd7L,EAAMtB,WACX6K,EAAMyC,UAAUH,EAAK,CAEvB,SAASI,IACP,IAAKjM,EAAMtB,UAAW,OACtB,MAAMwN,UAAEA,EAAAC,OAAWA,EAAAC,QAAQA,GAAY7C,EAEf,eAApB2C,EAAUrL,OAA0BuL,EAAQvL,OADvB,KAEnBsL,EAAOtL,MAAQ,GAA2B,IAAtBF,EAAMC,YAC5ByJ,EAAU1J,EAAMC,YAAc,GACrBuL,EAAOtL,MAAQ,GAAKF,EAAMC,cAAgBgB,EAAS1F,OAAS,GACrEmO,EAAU1J,EAAMC,YAAc,GAElC,CAEF,SAASqJ,EAAepJ,GAQtB,GANIW,EAASX,IAAUA,GAASe,EAAS1F,SAEvC+F,QAAQC,MAAM,oGACdrB,EAAQ,GAGNY,EAASZ,GAAQ,CACnB,MAAMP,EAAQsB,EAASyK,UAAWC,GAASA,EAAKhN,OAASuB,GACzDA,OAAQP,EAAe,EAAIA,CAAA,CAG7B,OAAOO,CAAA,QA5MTQ,EACE,IAAMrB,EAAM/B,WACXsD,IACMC,EAASD,IAAcE,EAASF,IACnCU,QAAQC,MAAM,yEAGC,KAAbX,GAAoBb,EAAMa,IAE5BU,QAAQC,MAAM,wEAEQ,iBAAbX,GAAyBA,EAAW,GAE7CU,QAAQC,MAAM,mEAGlB,CACEG,WAAW,EACXD,MAAM,IAIVf,EACE,IAAMrB,EAAM/B,WACXsD,IACC,MAAMjB,EAAQ2J,EAAe1I,GAC7B8I,EAAU9I,GAAU,EAAOjB,IAAUK,EAAMC,cAE7C,CACEyB,WAAW,EACXD,MAAM,IAIVf,EACE,IAAMO,EAAS1F,OACf,KACMyE,EAAMwI,QACRoD,GAAS,KACPlC,EAAUrK,EAAM/B,gBAMxBoD,EACE,IAAMrB,EAAM7B,YACXoD,IACCiL,GAAcjL,EAAU,iBAI5BF,EACE,IAAMrB,EAAM3B,OACXkD,IACCiL,GAAcjL,EAAU,YAI5BkD,EAAU,KACR9D,EAAMwI,QAAS,EACfoD,GAAS,KACPzC,EAAa9J,EAAM/B,YAAY,GAC/B0C,EAAMuI,cAAe,MAgJzBzB,EAAyB,CACvB4C,YACAF,iBACAD,29KC5aWuC,GAAW1O,OACnBC,GADmB,CAQtB0O,YAAalO,GAAgB,GAQ7BqE,KAAM7D,EAAwB,WAO9B2N,KAAM3N,EAAe,IAOrB4N,SAAUpO,GAAgB,GAO1BqO,MAAOrO,GAAgB,GAOvBsO,QAAStO,GAAgB,GAOzBO,MAAOC,EAAe,IAOtBuD,QAASvD,EAAe,IAOxB+N,MAAOvO,GAAgB,GAOvBwO,KAAMxO,GAAgB,mBC5CT,CACbc,KAAM,SACNM,QAAS,CACPC,gBAAgB,EAChBC,aAAa,EACbC,eAAgB,0EAWpB,MAAMC,EAAQC,EACRuD,EAAOC,GAELsF,UAAAA,GAAcC,GAAa,OAE7BiE,EAAWlM,EAAY,IACvBmM,EAAenM,EAAY,IAC3BoM,EAAepM,GAAa,GAElCM,EACE,CAAC,IAAMrB,EAAM0M,YAAa,IAAM1M,EAAM2M,KAAM,IAAM3M,EAAM6M,MAAO,IAAM7M,EAAM8M,QAAS,IAAM9M,EAAM+M,MAAO,IAAM/M,EAAMgN,MACnH,KACEI,KAEF,CAAEhL,MAAM,EAAMC,WAAW,IAG3BhB,EACE,IAAMrB,EAAM6C,KACXtB,IACC,IAAKA,EAAU,OAEf,MAAMsB,EAAO,CAAC,UAAW,SAAU,UAAW,UAAW,YAC1B,IAA3BA,EAAKwK,QAAQ9L,IAAkBU,QAAQC,MAAM,uBAAuBW,EAAKhG,cAC7EuQ,KAEF,CAAEhL,MAAM,EAAMC,WAAW,IAG3BhB,EACE,IAAM8L,EAAatM,MACnB,KACEuM,KAEF,CAAEhL,MAAM,EAAMC,WAAW,IAG3B,MAAMiL,EAAY7M,EAAS,IAClB,UAAUT,EAAMuN,eAAeN,EAASpM,SAG3CoD,EAAYxD,EAAS,KACzB,MAAMwD,EAAiC,CAAA,EAOvC,OANKjE,EAAM6M,OAAS7M,EAAMuC,UACxB0B,EAAsB,WAAIjE,EAAMuC,SAE9BvC,EAAMuC,UACR0B,EAAU,gBAAkBjE,EAAMuC,SAE7B,GAAGpB,EAAW8C,KAAajE,EAAMkE,gBAGpCsJ,EAAY/M,EAAS,KACzB,MAAM+M,EAAiC,CAAA,EAIvC,OAHIxN,EAAMjB,QACRyO,EAAiB,MAAIxN,EAAMjB,OAEtBoC,EAAWqM,KAGpB,SAASJ,IACP,MAAMvK,KAAEA,QAAMgK,EAAAE,MAAOA,EAAAC,KAAOA,UAAMF,EAAAH,KAASA,EAAAD,YAAMA,GAAgB1M,EACjE,IAAIyN,EAAyB,GAC7B5K,GAAQ4K,EAAapI,KAAK,MAAMxC,KAChCgK,GAASY,EAAapI,KAAK,YAC3B0H,GAASU,EAAapI,KAAK,YAC3B2H,GAAQS,EAAapI,KAAK,WAC1ByH,GAAWW,EAAapI,KAAK,cAC7B8H,EAAatM,OAAS4M,EAAapI,KAAK,qBACpCsH,GAAQD,IAAae,EAAapI,KAAK,WAC3C4H,EAASpM,MAAQ4M,EAAapR,KAAK,IAAG,CAGxC,SAASqR,EAAY7B,GACnBrI,EAAK,QAASqI,EAAK,CAErB,SAAS8B,EAAY9B,GACnBrI,EAAK,QAASqI,EAAK,CAErB,SAAS+B,IACPT,EAAatM,OAAQ,EACrBqM,EAAarM,MAAQ,EAAA,CAEvB,SAASgN,IACPC,GAAgB,CAElB,SAASC,EAAclC,GACrBiC,IACAtK,EAAK,UAAW,CACd3C,MAAOgL,EAAMzF,OAAOvF,OACrB,CAEH,SAASiN,IACPX,EAAatM,OAAQ,CAAA,orCCzIjBkI,UAAEA,IAAcC,GAAa,iBAE7BgF,GAAQvN,EAAS,IACd,CACLsI,GAAU,aACVA,GAAU,aACVA,GAAU,aACVA,GAAU,aACVA,GAAU,aACVA,GAAU,aACVA,GAAU,eASP,SAASkF,GAAYC,EAAeC,GACzC,MAAMC,EAAa,IAAI3T,KAAKyT,GACtBG,EAAa,IAAI5T,KAAK0T,GAAS,IAE/BG,EAAQF,EAAWnT,cACnBsT,EAAQF,EAAWpT,cACnBuT,EAASJ,EAAWjT,WACpBsT,EAASJ,EAAWlT,WACpBuT,EAAON,EAAW/S,UAClBsT,EAAON,EAAWhT,UAExB,OAAIiT,IAAUC,EACRC,IAAWC,EACNC,IAASC,EAAO,EAAID,EAAOC,EAAO,GAAI,EAExCH,IAAWC,EAAS,EAAID,EAASC,EAAS,GAAI,EAGhDH,EAAQC,EAAQ,GAAI,CAC7B,CAeO,SAASK,GAAaV,EAAeC,GAC1C,MAAMC,EAAa,IAAI3T,KAAKyT,GACtBG,EAAa,IAAI5T,KAAK0T,GAEtBG,EAAQF,EAAWnT,cACnBsT,EAAQF,EAAWpT,cACnBuT,EAASJ,EAAWjT,WACpBsT,EAASJ,EAAWlT,WAE1B,OAAImT,IAAUC,EACLC,IAAWC,EAAS,EAAID,EAASC,EAAS,GAAI,EAGhDH,EAAQC,EAAQ,GAAI,CAC7B,CAOO,SAASM,GAAYX,EAAeC,GACzC,MAAMC,EAAa,IAAI3T,KAAKyT,GACtBG,EAAa,IAAI5T,KAAK0T,GAEtBG,EAAQF,EAAWnT,cACnBsT,EAAQF,EAAWpT,cAEzB,OAAOqT,IAAUC,EAAQ,EAAID,EAAQC,EAAQ,GAAI,CACnD,CAOO,SAASO,GAAexS,EAAcC,GAC3C,OAAO,GAAK,IAAI9B,KAAK6B,EAAMC,EAAQ,EAAG,IAAIlB,SAC5C,CAMO,SAAS0T,GAAiBvU,GAC/B,OAAOmD,GAAMnD,GAAM8C,OAAOyL,GAAU,cACtC,CAkBO,SAASiG,GAAgBxU,GAC9B,OAAOmD,GAAMnD,GAAM8C,OAAOyL,GAAU,aACtC,CA2CO,SAASkG,GAAazU,EAAc0U,GACrCA,GAAkB,IACpBA,GAAkC,GAGpC,MAAMC,EAAY,IAAI1U,KAAKD,GAC3B2U,EAAUC,SAAS,EAAG,EAAG,EAAG,GAC5B,MAAM9S,EAAO6S,EAAUlU,cACjBsB,EAAQ4S,EAAUhU,WAClBkU,EAAMF,EAAU9T,UAChBiU,EAAOH,EAAU5T,SAEjBgU,EAAY,IAAI9U,KAAK6B,EAAMC,EAAO8S,GAAQ,EAAIC,EAAOJ,GAAkB,GACvEM,EAAU,IAAI/U,KAAK6B,EAAMC,EAAO8S,EAAM,GAAM,EAAIC,EAAOJ,GAAkB,GAE/E,MAAO,CAACK,EAAU3S,UAAW4S,EAAQ5S,UACvC,CAgBO,SAAS6S,GAAejV,EAAc+L,GAC3C,MAAM4I,EAAY,IAAI1U,KAAKD,GAG3B,OAFA2U,EAAUO,QAAQP,EAAU9T,UAAYkL,GAEjC4I,EAAUvS,SACnB,CA+DO,SAAS+S,GAAqBnV,EAAcoV,GACjD,MAAMT,EAAY,IAAI1U,KAAKD,GAK3B,OAJA2U,EAAUC,SAASQ,EAAY,IAC/BT,EAAUU,WAAWD,EAAY,IACjCT,EAAUW,WAAWF,EAAY,IAE1BT,EAAUvS,SACnB,CAOA,MAAMmT,GAAQ,CAACC,EAAWC,KACxB,IAAI3P,GAAgB,EACpB,MAAM0E,EAAyB5I,MAAM4T,EAAI,EAAI,EAAIA,GACjD,OAAS1P,EAAQ0P,GACfhL,EAAO1E,GAAS2P,EAAS3P,GAE3B,OAAO0E,GAOHpI,GAAWpC,IACf,MAAM2U,EAAY,IAAI1U,KAAKD,GAC3B,MAAO,CAAC2U,EAAU1T,WAAY0T,EAAUxT,aAAcwT,EAAUtT,eAO3D,SAASqU,IAAY1V,KAC1BA,EAAA2V,QACAA,EAAAC,QACAA,EAAAC,aACAA,EAAAC,OACAA,IAQA,MAAMC,EAAatC,GAAYzT,EAAM2V,GAC/BK,EAAavC,GAAYzT,EAAM4V,GAErC,IAAIK,EAAU,EACVC,EAAU,GACVC,EAAY,EACZC,EAAY,GACZC,EAAY,EACZC,EAAY,GAEhB,GAAmB,IAAfP,EAAkB,CACpB,MAAMQ,EAAUnU,GAAQuT,GAClBa,EAAcpU,GAAQpC,GAE5BiW,EAAUM,EAAQ,GACdA,EAAQ,KAAOC,EAAY,KAC7BL,EAAYI,EAAQ,GAEhBA,EAAQ,KAAOC,EAAY,KAC7BH,EAAYE,EAAQ,IAExB,CAGF,GAAmB,IAAfP,EAAkB,CACpB,MAAMS,EAAUrU,GAAQwT,GAClBY,EAAcpU,GAAQpC,GAE5BkW,EAAUO,EAAQ,GACdA,EAAQ,KAAOD,EAAY,KAC7BJ,EAAYK,EAAQ,GAEhBA,EAAQ,KAAOD,EAAY,KAC7BF,EAAYG,EAAQ,IAExB,CAGF,IAAIC,EAA4B,GAC5BC,EAAQpB,GAAM,GAAKzP,IACd,CACL8Q,MAAOrI,GAAU,OAAQsI,GAAQ/Q,IACjCO,MAAOP,EACPd,SAAUc,EAAQmQ,GAAWnQ,EAAQoQ,KAGrCY,EAAUvB,GAAM,GAAKzP,IAChB,CACL8Q,MAAOrI,GAAU,SAAUsI,GAAQ/Q,IACnCO,MAAOP,EACPd,SAAUc,EAAQqQ,GAAarQ,EAAQsQ,KAGvCW,EAA0B,GA8B9B,OA7BIjB,GAAUkB,GAAWlB,KACvBa,EAAQb,EAAO,CACbzN,KAAM,OACN4O,OAAQN,IAEVG,EAAUhB,EAAO,CACfzN,KAAM,SACN4O,OAAQH,KAIPjB,IACHkB,EAAUxB,GAAM,GAAKzP,IACZ,CACL8Q,MAAOrI,GAAU,SAAUsI,GAAQ/Q,IACnCO,MAAOP,EACPd,SAAUc,EAAQuQ,GAAavQ,EAAQwQ,KAGvCR,GAAUkB,GAAWlB,KACvBiB,EAAUjB,EAAO,CACfzN,KAAM,SACN4O,OAAQF,MAKdL,EAAUb,EAAe,CAACc,EAAOG,GAAW,CAACH,EAAOG,EAASC,GAEtDL,CACT,CAMO,SAASQ,GAAclX,IAC5BA,EAAO,IAAIC,KAAKD,IACX4U,SAAS,EAAG,EAAG,EAAG,GAEvB5U,EAAKkV,QAAQlV,EAAKa,UAAY,GAAMb,EAAKe,SAAW,GAAK,GAEzD,MAAM+T,EAAO,IAAI7U,KAAKD,EAAKS,cAAe,EAAG,GAG7C,OAAO,EAAIyB,KAAKqQ,QAAQvS,EAAKoC,UAAY0S,EAAK1S,WAAa,MAAW,GAAM0S,EAAK/T,SAAW,GAAK,GAAM,EACzG,CAEO,SAASoW,GAAaC,EAA4B/Q,EAA0CgC,GACjG,MAAMgP,EAAY,CAAC,MAAQD,GAQ3B,OANI/O,EAAKwK,QAAQ,UAAW,GAAMyE,GAAQjR,KACnCA,GAAUA,EAAM,IACnBgR,EAAUxM,KAAK,mBAIZwM,EAAUxV,KAAK,IACxB,CCxaO,MAAM0V,GAAY,CACvBlP,KAAMmP,GAAiBlX,QACvBN,KAAMwX,GAAiBvP,QACvB5B,MAAOmR,GAAiB,CAACvP,OAAQrG,QACjC+T,QAAS6B,GAAiBvP,QAC1B2N,QAAS4B,GAAiBvP,QAE1BwP,UAAWC,SACXC,SAAU1P,OACV2P,YAAatX,OACbuX,aAAc7T,GAAgB,GAC9BoR,YAAa,CACX/M,KAAM,CAACzG,QAETkW,UAAW9T,GAAgB,kBCId,CACboB,QAAS,CACPC,gBAAgB,EAChBC,aAAa,EACbC,eAAgB,uEAgBpB,MAAMC,EAAQC,EACRuD,EAAOC,EAEP8O,EAAQC,EAAS,YACfzJ,UAAAA,GAAcC,GAAa,iBAE7ByJ,EAAS1R,EAAuB,IAEhC2R,EAAiBjS,EAAS,IACtBmR,GACCD,GAAaC,EAAW5R,EAAMa,MAAOb,EAAM6C,OAIhD8P,EAAYlS,EAAS,IACjBjG,GACCwU,GAAgBxU,IA0C3B,SAASoY,EAAapY,GACpB,GAAmB,eAAfwF,EAAM6C,MAAyBiP,GAAQ9R,EAAMa,OAAQ,CACvD,MAAOgS,EAAWC,GAAW9S,EAAMa,OAAS,GAE5C,OAAIgS,GAA+C,IAAlCjE,GAAapU,EAAMqY,GAC9BC,GAAgD,IAArClE,GAAaiE,EAAWC,GAC9B,OAEF,QACEA,GAA2C,IAAhClE,GAAapU,EAAMsY,GAChC,MACED,GAAaC,GAA6C,IAAlClE,GAAapU,EAAMqY,KAAoD,IAAhCjE,GAAapU,EAAMsY,GACpF,SAEA,EACT,CAEA,OAAI9S,EAAMa,OAAuD,IAA9C+N,GAAapU,EAAMwF,EAAMa,OACnC,WAEA,EAEX,CAEF,SAASkS,EAAgBzS,GACvB,MAAM9F,EAAOiY,EAAO5R,MAAMP,GAE1B,IAAI9F,EAAKgF,SAET,OAAQQ,EAAM6C,MACZ,IAAK,QAML,QACEmQ,EAAkBxY,SAJpB,IAAK,cAiBT,SAAgCA,GAC9B,IAAIqG,EAA2B,GAC/B,MAAOgS,EAAWC,GAAWhB,GAAQ9R,EAAMa,QAASb,EAAMa,OAAc,GAClEoS,EAAUrE,GAAapU,EAAKA,KAAMqY,GAGxC,IAAK7S,EAAMqS,eAAiBS,GAAuB,IAAZG,EAAe,OAEtD,GAAIJ,IAAcC,GAAWG,GAAU,EACrC,GAAIjT,EAAMmS,UFuDP,SAAwBjE,EAAeC,GAC5C,MAAMC,EAAa,IAAI3T,KAAKyT,GACtBG,EAAa,IAAI5T,KAAK0T,GAEtBG,EAAQF,EAAWnT,cACnBsT,EAAQF,EAAWpT,cACzB,IAAIuT,EAASJ,EAAWjT,WAKxB,OAFAqT,EAA2B,IAAjBF,EAAQC,GAAcC,EAEzBA,EAJQH,EAAWlT,WAID,CAC3B,CEnE0B+X,CAAe1Y,EAAKA,KAAMqY,GAAa7S,EAAMmS,SAAU,CAC3E,MAAMgB,EFyEL,SAA0B3Y,EAAc+L,GAC7C,MAAM4I,EAAY,IAAI1U,KAAKD,GAG3B,OAFA2U,EAAUiE,SAASjE,EAAUhU,WAAaoL,GAEnC4I,EAAUvS,SACnB,CE9EyByW,CAAiBR,EAAW7S,EAAMmS,SAAW,GAChEtR,EAAQ,CAACgS,EAAWxX,EAAQ8X,IAC5BZ,EAAMe,KAAK,CACTC,IAAKvT,EAAMoS,aAAerJ,EAAU,mBAAoB/I,EAAMmS,WAC/D,MAEDtR,EAAQ,CAACgS,EAAWxX,EAAQb,EAAKA,YAGnCqG,EAAQ,CAACxF,EAAQb,EAAKA,MAAO,MAE/BgJ,EAAK,SAAU,CACb3C,SACD,CAvCG2S,CAAuBhZ,GAI3B,CAEF,SAASa,EAAQb,GACf,OAAOwF,EAAM4P,aAAe5P,EAAM4P,YAAY1T,OAAS,EAAIyT,GAAqBnV,EAAMwF,EAAM4P,YAAY,IAAMpV,CAAA,CAEhH,SAASwY,EAAkBxY,GACP,aAAdA,EAAKqI,MACPW,EAAK,SAAU,CACb3C,MAAOxF,EAAQb,EAAKA,OAExB,CA4BF,SAASiZ,EAAiBjZ,EAAc+B,EAAesG,GACrD,IAAI6Q,EAA4B,CAC9BlZ,OACAmZ,KAAMpX,EAAQ,EACdqX,QAAS,GACTC,WAAY,GACZhR,OACArD,UAAgD,IAAtCoP,GAAapU,EAAMwF,EAAMmQ,UAAyD,IAAtCvB,GAAapU,EAAMwF,EAAMoQ,SAC/E0D,UAAWvX,GAAS,GAWtB,OARIyD,EAAMiS,YACJT,GAAWxR,EAAMiS,WACnByB,EAAW1T,EAAMiS,UAAUyB,GAE3BzR,QAAQC,MAAM,sGAIXwR,CAAA,QArITrS,EACE,CAAC,IAAMrB,EAAM6C,KAAM,IAAM7C,EAAMxF,KAAM,IAAMwF,EAAMa,MAAO,IAAMb,EAAMmQ,QAAS,IAAMnQ,EAAMoQ,QAAS,IAAMpQ,EAAMiS,WAC9G,MAaF,WACE,MAAM8B,EAA+B,GAE/BzX,EADO,IAAI7B,KAAKuF,EAAMxF,MACVS,cACZ4F,EAAQb,EAAMa,MAEpB,GAAIb,EAAM6C,KAAKwK,QAAQ,aAAiBxM,IAAUiR,GAAQjR,GAExD,YADAoB,QAAQC,MAAM,yDAIhB,IAAA,IAAS3F,EAAQ,EAAGA,EAAQ,GAAIA,IAAS,CACvC,MAAM/B,EAAO,IAAIC,KAAK6B,EAAMC,EAAO,GAAGK,UACtC,IAAIiG,EAAwB+P,EAAapY,GACpCqI,GAA2C,IAAnC+L,GAAapU,EAAMC,KAAKuZ,SACnCnR,EAAO,WAET,MAAM6Q,EAAWD,EAAiBjZ,EAAM+B,EAAOsG,GAC/CkR,EAAU1O,KAAKqO,EAAQ,CAGzBjB,EAAO5R,MAAQoT,GAAUF,EAAS,CAjChCG,IAEF,CACE9R,MAAM,EACNC,WAAW,umBAIQ7H,SACdmD,GAAMnD,GAAM8C,OAAOyL,EAAU,QAASvO,UAD/C,IAAuBA,2MC7DV2Z,GAAiB,CAC5BtR,KAAMmP,GAAiBlX,QACvB+F,MAAOmR,GAAiB,CAACvP,OAAQrG,QACjC+T,QAAS6B,GAAiBvP,QAC1B2N,QAAS4B,GAAiBvP,QAC1BwP,UAAWC,SACXC,SAAU1P,OACV2P,YAAatX,OACbuX,aAAc7T,GAAgB,GAC9B4V,eAAgB5V,GAAgB,GAChCoR,YAAa,CACX/M,KAAM,CAACzG,QAETiY,YAAarC,GAAiBvP,uBCDjB,CACb7C,QAAS,CACPC,gBAAgB,EAChBC,aAAa,EACbC,eAAgB,sFAYpB,MAAMC,EAAQC,EACRuD,EAAOC,EAEP6Q,EAAYvT,EAAY,GACxBwT,EAAcxT,EAAY,GAG1ByT,EAAe/T,EAAS,IACCT,EAAMqU,aAAerU,EAAMoU,eAAiB,GAAK,KAK1EK,EAAQhU,EAAqB,IJgG5B,SAAkB0P,EAAiBC,GACxC,MAAMqE,EAAkB,GAClBnY,EAAO,IAAI7B,KAAK0V,GAItB,IAHA7T,EAAK8W,SAAS,GACd9W,EAAKoT,QAAQ,GAENb,GAAYvS,EAAKM,UAAWwT,GAAW,GAC5CqE,EAAMpP,KAAK/I,EAAKM,WAChBN,EAAKoY,YAAYpY,EAAKrB,cAAgB,GAGxC,OAAOwZ,CACT,CI3GSE,CAAS3U,EAAMmQ,QAASnQ,EAAMoQ,SAASwE,IAAI,CAACtY,EAAMgE,KAChD,CACL9F,KAAM8B,EACNwH,OAAkB,IAAVxD,EAAc,IAAM,QAM5Bf,EAAQkB,EAAS,IACduO,GAAgByF,EAAM5T,MAAM0T,EAAY1T,OAAOrG,OAOxD,SAAe2P,IAAiB,OAAA9D,EAAAjM,KAAA,KAAA,kBACxBkM,IACN,IAAIuO,EAA4B,KAC5B/C,GAAQ9R,EAAMa,OAChBgU,EAAa7U,EAAMa,MAAO,GACjBW,EAASxB,EAAMa,SACxBgU,EAAa7U,EAAMa,OAGhBgU,IACHA,EAAapa,KAAKuZ,OAGpB,IAAIlR,EAAc,EAClB,IAAA,IAASxC,EAAQ,EAAGA,EAAQmU,EAAM5T,MAAM3E,QACmB,IAArD2S,GAAY4F,EAAM5T,MAAMP,GAAO9F,KAAMqa,GADKvU,IAI9CwC,GAAO2R,EAAM5T,MAAMP,GAASmC,OAAOgS,EAAM5T,MAAMP,GAAOwD,QAAU,EAElEwQ,EAAUzT,MAAQ,EACdiC,EAAM,UACFwD,IACNgO,EAAUzT,MAAQiC,EAAM,GAC1B,EAAA,CA5BF2B,EAAU,KACR0F,MA8BF,MAAM2K,EAAcjJ,IAClB,GAAI4I,EAAM5T,MAAM3E,QAAU,EACxB,QAUJ,SAAuBoY,GACrB,IAAIxQ,EAAiB,EACrB,IAAA,IAASxD,EAAQ,EAAGA,EAAQmU,EAAM5T,MAAM3E,OAAQoE,IAE9C,GADAwD,GAAkB2Q,EAAM5T,MAAMP,GAAOwD,OACjCwQ,EAAYxQ,EAEd,YADAyQ,EAAY1T,MAAQP,EAGxB,CAfAyU,CADkBrY,KAAK8F,IAAI,EAAGqJ,EAAMzF,OAAOkO,aAmB7C,SAASU,GAAiBnU,MAAEA,IAC1B2C,EAAK,SAAU,CACb3C,SACD,QAGH4G,EAA8B,CAC5B0C,w5BC5HW8K,GAAa,CACxBpS,KAAMmP,GAAiBlX,QACvBN,KAAMwX,GAAiBvP,QACvB5B,MAAOmR,GAAiB,CAACvP,OAAQrG,MAAO,OACxC+T,QAAS6B,GAAiBvP,QAC1B2N,QAAS4B,GAAiBvP,QAC1ByM,eAAgB8C,GAAiBvP,QACjCwP,UAAWC,SACXC,SAAU1P,OACV2P,YAAatX,OACbuX,aAAc7T,GAAgB,GAC9BoR,YAAa,CACX/M,KAAM,CAACzG,QAETkW,UAAW9T,GAAgB,kBCad,CACboB,QAAS,CACPC,gBAAgB,EAChBC,aAAa,EACbC,eAAgB,wEA0BpB,MAAMC,EAAQC,EACRuD,EAAOC,GAELsF,UAAAA,GAAcC,GAAa,iBAE7BkM,EAAOnU,EAA4B,IAEnCwR,EAAQC,EAAS,YAEjBjM,EAAS9F,EAAS,KACtB,MAAMyO,EAAiBlP,EAAMkP,gBAAkB,EAAIlP,EAAMkP,eAAiB,EAAIlP,EAAMkP,eAEpF,OADgB,EAAI,IAAIzU,KAAKuF,EAAMxF,MAAMe,SAAW2T,GAAkB,IAIlEiG,EAAe1U,EAAS,IACpBmR,GACCD,GAAaC,EAAW5R,EAAMa,MAAOb,EAAM6C,OAIhDuS,EAAa3U,EAAS,IAClBjG,GACCuU,GAAiBvU,IAItB6a,EAAgB5U,EAAS,KAC7B,MAAM6U,EAA0B,CAAA,EAEhC,OADAA,EAASC,WAAiB,IAAM,EAAKhP,EAAO1F,MAAtB,IACfM,EAAWmU,KAGdxB,EAAatZ,IACjB,MAAMgb,EAAc,IAAI/a,KAAKD,GACvBib,EAAaD,EAAYna,UACzBqa,EAAc5G,GAAe0G,EAAYva,cAAeua,EAAYra,WAAa,GACjFwa,EAAiBpP,EAAO1F,MAAQ6U,EAChCE,EAAYlZ,KAAKmZ,KAAKF,EAAiB,GAC7C,OAAOjZ,KAAKmZ,MAAMtP,EAAO1F,MAAQ4U,GAAc,KAAOG,GAmCxD,SAASE,EAAWtb,EAAcqG,GAChC,OAAQb,EAAM6C,MACZ,IAAK,OACL,IAAK,WAWL,QACE,OAAOkT,EAAYvb,GAVrB,IAAK,QACH,OAmBN,SAAsBA,GACpB,MAAMqG,MAAEA,GAAUb,EAClB,IAAI6C,EAAwB,GAE5B,IAAKiP,GAAQjR,GAAQ,OAAOgC,EAC5B,MAAMmT,EAAc3G,GACXxO,EAAMoV,KAAM3J,GAAoC,IAA3B2B,GAAYoB,EAAK/C,IAG/C,GAAI0J,EAAWxb,GAAO,CACpB,MAAM0b,ENoCgB,CAAC1b,GAAiBiV,GAAejV,GAAM,GMpC7C2b,CAAW3b,GACrB4b,ENoCgB,CAAC5b,GAAiBiV,GAAejV,EAAM,GMpC7C6b,CAAW7b,GACrB8b,EAAeN,EAAWE,GAC1BK,EAAeP,EAAWI,GAE9BvT,EADEyT,GAAgBC,EACX,kBACED,EACF,MACEC,EACF,QAEA,mBACT,CAGF,OAAO1T,CAAA,CA5CI2T,CAAahc,GACtB,IAAK,YACL,IAAK,gBACH,OA2CN,SAAyBA,EAAcqG,GACrC,MAAOgS,EAAWC,GAAWhB,GAAQjR,GAASA,EAAQ,GAEtD,OAAIgS,GAA8C,IAAjC5E,GAAYzT,EAAMqY,GAC7B7S,EAAMqS,cAAgBS,GAA+C,IAApC7E,GAAY4E,EAAWC,GACnD,OAEF,QACEA,GAA0C,IAA/B7E,GAAYzT,EAAMsY,GAC/B,MACED,GAAaC,GAA4C,IAAjC7E,GAAYzT,EAAMqY,KAAmD,IAA/B5E,GAAYzT,EAAMsY,GAClF,SAEA,EACT,CAzDW2D,CAAgBjc,EAAMqG,GAC/B,IAAK,OAEL,IAAK,YACH,OAAO6V,EAAgBlc,EAAMqG,GAGjC,CAEF,SAASkV,EAAYvb,GACnB,OAAIwF,EAAMa,OAAsD,IAA7CoN,GAAYzT,EAAMwF,EAAMa,OAClC,WAEF,EAAA,CA8CT,SAAS6V,EAAgBlc,EAAcqG,GACrC,MAAOgS,EAAWC,GAAWhB,GAAQjR,GAASA,EAAQ,GAEtD,OAAIgS,GAA8C,IAAjC5E,GAAYzT,EAAMqY,GAC1B,QACEC,GAA0C,IAA/B7E,GAAYzT,EAAMsY,GAC/B,MACED,GAAaC,GAA4C,IAAjC7E,GAAYzT,EAAMqY,KAAmD,IAA/B5E,GAAYzT,EAAMsY,GAClF,SAEA,EACT,CAuBF,SAASC,EAAgBzS,GACvB,MAAM9F,EAAO0a,EAAKrU,MAAMP,GACxB,OAAQN,EAAM6C,MACZ,IAAK,OACL,IAAK,WAgBL,QACEmS,EAAiBxa,SAdnB,IAAK,SAqCT,SAA2BA,GACzB,GAAIA,EAAKgF,SAAU,OACnB,MAAMmX,EAAe1C,GAAUnC,GAAQ9R,EAAMa,OAASb,EAAMa,MAAQ,IAC9D+V,EAAYD,EAAatK,UAAWC,GAASA,GAAyC,IAAjC2B,GAAY3B,EAAM9R,EAAKA,OAC5EqG,GAAsB,IAAd+V,EAAmB,IAAID,EAActb,EAAQb,EAAKA,OAASmc,EAAarG,OAAO,CAACuG,EAAGvW,IAAUA,IAAUsW,GACrHpT,EAAK,SAAU,CAAE3C,SAAO,CAzCpBiW,CAAkBtc,GAClB,MACF,IAAK,YACL,IAAK,iBAyCT,SAA+BA,GAC7B,GAAIA,EAAKgF,SAAU,OAEnB,IAAIqB,EAA2B,GAC3BgC,EAAwB,GAC5B,MAAOgQ,EAAWC,GAAWmB,GAAUnC,GAAQ9R,EAAMa,OAASb,EAAMa,MAAQ,IACtEoS,EAAUhF,GAAYzT,EAAKA,KAAMqY,GAGvC,KAAK7S,EAAMqS,cAA4B,IAAZY,GAAiC,cAAfjT,EAAM6C,MAAuC,kBAAf7C,EAAM6C,MAA8BiQ,GAC7G,OAGF,GAAID,IAAcC,GAAWG,GAAU,EAErC,GAAIjT,EAAMmS,WAAyB3X,EAAKA,KAAMqY,GNjHhC,MAAiC,EMiHY7S,EAAMmS,SAAU,CAEzEtR,EAAQ,CAACgS,EAAWxX,EADDoU,GAAeoD,EAAW7S,EAAMmS,SAAW,IACtB,IACxCI,EAAMe,KAAK,CACTC,IAAKvT,EAAMoS,aAAerJ,EAAU,cAAe/I,EAAMmS,WAC1D,MAEDtR,EAAQ,CAACgS,EAAWxX,EAAQb,EAAKA,MAAM,QAEjB,kBAAfwF,EAAM6C,MAA4BgQ,GAAaC,EAExC,IAAZG,GACFpQ,EAAO,QACPhC,EAAQb,EAAMa,OAC+B,IAApCoN,GAAYzT,EAAKA,KAAMsY,IAChCjQ,EAAO,MACPhC,EAAQb,EAAMa,OAEdA,EAAQ,CAACxF,EAAQb,EAAKA,MAAO,MAG/BqG,EAAQ,CAACxF,EAAQb,EAAKA,MAAO,MAG/BgJ,EAAK,SAAU,CACb3C,QACAgC,KAAMA,IAAShC,EAAM,GAAK,MAAQ,UACnC,CAlFGkW,CAAsBvc,GACtB,MACF,IAAK,QAkFT,SAA0BA,GACxB,MAAO+U,GAAaN,GAAazU,EAAKA,KAAMwF,EAAMkP,gBAGlD,GAAIuE,EAAiBlE,EAAW,IAAI9U,KAAK8U,GAAWlU,WAAWmE,SAAU,OAEzEgE,EAAK,SAAU,CACb3C,MAAOxF,EAAQkU,GAAa,OAC7B,CAzFGyH,CAAiBxc,GACjB,MACF,IAAK,aAyFT,SAA+BA,GAC7B,MAAOyc,GAAiBhI,GAAazU,EAAKA,KAAMwF,EAAMkP,gBAGtD,GAAIuE,EAAiBwD,EAAe,IAAIxc,KAAKwc,GAAe5b,WAAWmE,SAAU,OAEjF,IAAIqB,EAA2B,GAC/B,MAAOgS,EAAWC,GAAWmB,GAAUnC,GAAQ9R,EAAMa,OAASb,EAAMa,MAAQ,KACrEqW,GAAsBrE,EAAY5D,GAAa4D,EAAW7S,EAAMkP,gBAAkB,GACnF+D,EAAUhF,GAAYgJ,EAAeC,GAE3C,GAAIrE,IAAcC,GAAWG,GAAU,EAAI,CACzC,IAAKjT,EAAMqS,cAA4B,IAAZY,EAAe,OAE1CpS,EAAQ,CAACxF,EAAQ6b,GAAsB,MAAqB7b,EAAQ4b,GAAiB,MAAmB,MAExGpW,EAAQ,CAACxF,EAAQ4b,GAAiB,MAAqB,MAGzDzT,EAAK,SAAU,CACb3C,SACD,CA7GGsW,CAAsB3c,GAI1B,CAEF,SAASa,EAAQb,EAAc4c,GAAiB,GAG9C,OAFA5c,EAAOwF,EAAM4P,aAAe5P,EAAM4P,YAAY1T,OAAS,EAAIyT,GAAqBnV,EAAM4c,EAAQpX,EAAM4P,YAAY,GAAK5P,EAAM4P,YAAY,IAAMpV,GAElIwF,EAAMmQ,QAAgBnQ,EAAMmQ,QAEnC3V,EAAOwF,EAAMoQ,QAAgBpQ,EAAMoQ,QAEhC5V,CAAA,CAGT,SAASwa,EAAiBxa,GACpBA,EAAKgF,UAES,aAAdhF,EAAKqI,MACPW,EAAK,SAAU,CACb3C,MAAOxF,EAAQb,EAAKA,MACpBqI,KAAM,SAEV,CAuFF,SAAS4Q,EAAiBjZ,EAAc6U,EAAsBxM,GAC5D,IAAIwU,EAA0B,CAC5B7c,OACAmZ,KAAMtE,EACNuE,QAAS,GACTC,WAAY,GACZhR,OACArD,UAA+C,IAArCyO,GAAYzT,EAAMwF,EAAMmQ,UAAwD,IAArClC,GAAYzT,EAAMwF,EAAMoQ,SAC7E0D,UAAWA,EAAUtZ,IASvB,OAPIwF,EAAMiS,YACJT,GAAWxR,EAAMiS,WACnBoF,EAASrX,EAAMiS,UAAUoF,GAEzBpV,QAAQC,MAAM,sGAGXmV,CAAA,QAzRThW,EACE,CAAC,IAAMrB,EAAM6C,KAAM,IAAM7C,EAAMxF,KAAM,IAAMwF,EAAMa,MAAO,IAAMb,EAAMmQ,QAAS,IAAMnQ,EAAMoQ,QAAS,IAAMpQ,EAAMiS,WAC9G,MASF,WACE,MAAMqF,EAAkC,GAClC9c,EAAO,IAAIC,KAAKuF,EAAMxF,MACtB8B,EAAO9B,EAAKS,cACZsB,EAAQ/B,EAAKW,WACboc,EAAWzI,GAAexS,EAAMC,EAAQ,GAC9C,IAAIsE,EAAQb,EAAMa,MACE,SAAfb,EAAM6C,MAAkC,cAAf7C,EAAM6C,OAAyBhC,IAC3DA,EA+FJ,WACE,GAAmB,SAAfb,EAAM6C,KACR,OAAOoM,GAAajP,EAAMa,MAAiBb,EAAMkP,gBAC5C,CACL,MAAO2D,EAAWC,GAAY9S,EAAMa,OAAiB,GAErD,GAAIgS,EAAW,CACb,MAAM2E,EAAiBvI,GAAa4D,EAAW7S,EAAMkP,gBAErD,GAAI4D,EAAS,CACX,MAAM2E,EAAexI,GAAa6D,EAAS9S,EAAMkP,gBAEjD,MAAO,CAACsI,EAAe,GAAIC,EAAa,GAAE,CAE1C,OAAOD,CACT,CAGF,MAAO,EAAC,CACV,CAlHUE,IAGV,IAAA,IAASrI,EAAM,EAAGA,GAAOkI,EAAUlI,IAAO,CACxC,MAAM7U,EAAO,IAAIC,KAAK6B,EAAMC,EAAO8S,GAAKzS,UACxC,IAAIiG,EAAwBiT,EAAWtb,EAAMqG,GACxCgC,GAA0C,IAAlCoL,GAAYzT,EAAMC,KAAKuZ,SAClCnR,EAAO,WAET,MAAMwU,EAAS5D,EAAiBjZ,EAAM6U,EAAKxM,GAC3CyU,EAAQjS,KAAKgS,EAAM,CAErBnC,EAAKrU,MAAQyW,CAAA,CA5BXK,IAEF,CACEvV,MAAM,EACNC,WAAW,68BCjGFuV,GAAkB,CAC7B/U,KAAMmP,GAAiBlX,QACvB+F,MAAOmR,GAAiB,CAACvP,OAAQrG,MAAO,OACxC+T,QAAS6B,GAAiBvP,QAC1B2N,QAAS4B,GAAiBvP,QAC1ByM,eAAgB8C,GAAiBvP,QACjCwP,UAAWC,SACXC,SAAU1P,OACV2P,YAAatX,OACbuX,aAAc7T,GAAgB,GAC9B4V,eAAgB5V,GAAgB,GAChCoR,YAAa,CACX/M,KAAM,CAACzG,QAETiY,YAAarC,GAAiBvP,QAE9BoV,WAAY3F,SACZ4F,WAAYtZ,GAAgB,GAI5BuZ,gBAAiBvZ,GAAgB,kBCqBpB,CACboB,QAAS,CACPC,gBAAgB,EAChBC,aAAa,EACbC,eAAgB,6GAepB,MAAMC,EAAQC,EACRuD,EAAOC,GAELsF,UAAAA,GAAcC,GAAa,iBAE7BsL,EAAYvT,EAAY,GACxBwT,EAAcxT,EAAY,GAC1BiX,EAAYjX,EAAc,IAE1BkX,EAAWlX,EAAwB,IACnCmX,EAAanX,EAAyC,IAEtDoX,EAAe7N,EAAUzJ,IAC7B2C,EAAK,SAAU,CACb3C,WAED,IAGGuX,EAAW3X,EAAgC,KAC/C,IAAI4X,EAAqC,GACzC,GAAmB,aAAfrY,EAAM6C,MAAuBrB,EAASxB,EAAMa,OAAQ,CACtD,MAAMrG,EAAO,IAAIC,KAAKuF,EAAMa,OAC5BrG,EAAK4U,SAAS4I,EAAUnX,MAAM,IAC9BrG,EAAKqV,WAAWmI,EAAUnX,MAAM,IAChCrG,EAAKsV,WAAW9P,EAAM8X,WAAa,EAAIE,EAAUnX,MAAM,IAEvDwX,EAAczb,EADGpC,EAAKoC,YACa,EAAC,SAC3BkV,GAAQ9R,EAAMa,QAAyB,kBAAfb,EAAM6C,KAA0B,CACjE,MAAOyV,EAAOC,GAAOvY,EAAMa,MACrB2X,EAA+B,UAAnBP,EAASpX,MAAoByX,EAAQC,EACjD/d,EAAO,IAAIC,KAAK+d,GAAa,IACnChe,EAAK4U,SAAS4I,EAAUnX,MAAM,IAC9BrG,EAAKqV,WAAWmI,EAAUnX,MAAM,IAChCrG,EAAKsV,WAAW9P,EAAM8X,WAAa,EAAIE,EAAUnX,MAAM,IACvD,MAAM4X,EAAWje,EAAKoC,UAChB8b,EAAa,CAACJ,EAAOC,GACJ,UAAnBN,EAASpX,MACX6X,EAAW,GAAKD,EAEhBC,EAAW,GAAKD,EAElBJ,EAAczb,EAAQ8b,EAAYT,EAASpX,QAAU,EAAC,CAExD,OAAOwX,IAIH9Y,EAAQkB,EAAS,IACdsO,GAAiB0D,EAAO5R,MAAM0T,EAAY1T,OAAOrG,OAIpDme,EAAYlY,EAAS,IACjBH,GRjBH,SAAsBA,GAK3B,OAJIA,GAAS,IACXA,GAAgB,GAGX0N,GAAMnN,MAAMP,EACrB,CQYWsY,CAAatY,EAAQ,IAK1BkU,EAAe/T,EAAS,IACCwX,EAASpX,MAAQb,EAAMqU,YAAc,IAAMrU,EAAMqU,aAK1E5B,EAAShS,EAAsB,IRR9B,SAAmB0P,EAAiBC,GACzC,MAAMqC,EAAmB,GACnBlW,EAAQ,IAAI9B,KAAK0V,GAGvB,IAFA5T,EAAMmT,QAAQ,GAEPd,GAAarS,EAAMK,UAAWwT,GAAW,GAC9CqC,EAAOpN,KAAK9I,EAAMK,WAClBL,EAAM6W,SAAS7W,EAAMpB,WAAa,GAGpC,OAAOsX,CACT,CQFSoG,CAAU7Y,EAAMmQ,QAASnQ,EAAMoQ,SAASwE,IAAI,CAACrY,EAAO+D,KACzD,MAAMiG,GAAU,EAAI,IAAI9L,KAAK8B,GAAOhB,SAAWyE,EAAMkP,gBAAkB,EACjEqI,EAAWzI,GAAe,IAAIrU,KAAK8B,GAAOtB,cAAe,IAAIR,KAAK8B,GAAOpB,WAAa,GACtF2d,EAAOpc,KAAKmZ,MAAMtP,EAASgR,GAAY,GAC7C,MAAO,CACLzT,OAAe,GAAPgV,EAAyB,GAAZA,EAAO,IAAoB,IAAVxY,EAAc,EAAI,IACxD9F,KAAM+B,MA2CZ,SAAe4N,IAAiB,OAAA9D,EAAAjM,KAAA,KAAA,kBAExBkM,IACN,IAAIuO,EAA4B,EAChC,GAAI/C,GAAQ9R,EAAMa,OAAQ,CAGxBgU,EADoB,IAAI7U,EAAMa,OAAOkY,KAAK,CAACC,EAAGC,KAAOD,GAAK,IAAMC,GAAK,IAC5C,EAAC,MACjBzX,EAASxB,EAAMa,SACxBgU,EAAa7U,EAAMa,OAGhBgU,IACHA,EAAapa,KAAKuZ,OAGpB,IAAIlR,EAAc,EACdoW,GAAmB,EACvB,IAAA,IAAS5Y,EAAQ,EAAGA,EAAQmS,EAAO5R,MAAM3E,OAAQoE,IAAS,CACxD,GAA2D,IAAvDsO,GAAa6D,EAAO5R,MAAMP,GAAO9F,KAAMqa,GAAmB,CAC5DqE,EAAmB5Y,EAEnB,MAAM9F,EAAO,IAAIC,KAAKoa,GAChBxF,EAAM7U,EAAKa,UAEXkL,GAAU,EADC,IAAI9L,KAAKD,EAAKS,cAAeT,EAAKW,WAAY,GAClCI,SAAWyE,EAAMkP,gBAAkB,EAC1DiK,EAAMzc,KAAKC,OAAO4J,EAAS8I,EAAM,GAAK,GAE5CvM,GAAa,GAANqW,EAAiB,EAANA,EAClB,KAAA,CAEFrW,GAAO2P,EAAO5R,MAAMP,GAASmC,OAAOgQ,EAAO5R,MAAMP,GAAOwD,QAAU,CAAA,CAEpEwQ,EAAUzT,MAAQ,EACdiC,EAAM,UACFwD,IAENgO,EAAUzT,MAAQiC,GAAOoW,EAAmB,EAAI,GAAK,GACvD,EAAA,CAOF,SAAStc,EAAQiE,EAAmCgC,GAClD,MAAmB,aAAf7C,EAAM6C,KACDqN,GAAY,CACjB1V,KAAMqG,EACNsP,QAASnQ,EAAMmQ,QACfC,QAASpQ,EAAMoQ,QACfE,OAAQtQ,EAAM6X,WACdxH,aAAcrQ,EAAM8X,aAGT,UAATjV,GAAoBiP,GAAQ9R,EAAMa,OAC7BqP,GAAY,CACjB1V,KAAOqG,EAAwB,GAC/BsP,QAASnQ,EAAMmQ,QACfC,QAASpQ,EAAMa,MAAM,GAAKb,EAAMa,MAAM,GAAKb,EAAMoQ,QACjDE,OAAQtQ,EAAM6X,WACdxH,aAAcrQ,EAAM8X,aAGf5H,GAAY,CACjB1V,KAAOqG,EAAwB,GAC/BsP,QAAUtP,EAAwB,GAClCuP,QAASpQ,EAAMoQ,QACfE,OAAQtQ,EAAM6X,WACdxH,aAAcrQ,EAAM8X,YAG1B,CAyBF,SAASsB,EAAQvY,EAAmCgC,GAC9CiP,GAAQjR,IAAUA,EAAM,IAAMA,EAAM,IAAe,UAATgC,GAAuC,UAAnBoV,EAASpX,QACzEgC,EAAO,OAEToV,EAASpX,MAAQgC,GAAQ,GACzBmV,EAAUnX,MAvBZ,SAAsBrG,EAAkCqI,GACtD,IAAIsM,MAAsB1U,KACP,aAAfuF,EAAM6C,KACRsM,EAAY,IAAI1U,KAAKD,GACZsX,GAAQtX,KAEf2U,EADW,UAATtM,EACU,IAAIpI,KAAKD,EAAK,IAAM,IAEpB,IAAIC,KAAKD,EAAK,IAAM,KAIpC,MAAM6e,EAAOlK,EAAU1T,WACjB6d,EAASnK,EAAUxT,aACnB4d,EAASpK,EAAUtT,aACzB,OAAOmE,EAAM8X,WAAa,CAACuB,EAAMC,GAAU,CAACD,EAAMC,EAAQC,EAAM,CAQ9CC,CAAa3Y,EAAOgC,GAAQ,GAAE,CAElD,SAASmS,GAAiBnU,MAAEA,EAAAgC,KAAOA,IAC5B4W,GAAQ5Y,EAAOb,EAAMa,SAExBqX,EAAWrX,MAAQA,EACnBsX,EAAatX,IAGXb,EAAM6C,KAAKwK,QAAQ,SAAU,GAC/B+L,EAAQvY,EAAOgC,EACjB,CAEF,SAAS6W,GAAiB7Y,MAAEA,IAC1B,GAAKb,EAAMa,MAGX,GAAmB,aAAfb,EAAM6C,MAAuBrB,EAASxB,EAAMa,OAAQ,CACtD,MAAMrG,EAAO,IAAIC,KAAKuF,EAAMa,OAC5BrG,EAAK4U,SAASvO,EAAM,IACpBrG,EAAKqV,WAAWhP,EAAM,IACtBrG,EAAKsV,WAAW9P,EAAM8X,WAAa,EAAIjX,EAAM,IAC7C,MAAM4X,EAAWje,EAAKoC,UACtBub,EAAaM,EAAQ,SACZ3G,GAAQ9R,EAAMa,QAAyB,kBAAfb,EAAM6C,KAA0B,CACjE,MAAOyV,EAAOC,GAAOvY,EAAMa,MACrB2X,EAA+B,UAAnBP,EAASpX,MAAoByX,EAAQC,EACjD/d,EAAO,IAAIC,KAAK+d,GAAa,IACnChe,EAAK4U,SAASvO,EAAM,IACpBrG,EAAKqV,WAAWhP,EAAM,IACtBrG,EAAKsV,WAAW9P,EAAM8X,WAAa,EAAIjX,EAAM,IAC7C,MAAM4X,EAAWje,EAAKoC,UAEtB,GAAI6b,IAAaD,EAAW,OAE5B,MAAME,EAAa,CAACJ,EAAOC,GACJ,UAAnBN,EAASpX,MACX6X,EAAW,GAAKD,EAEhBC,EAAW,GAAKD,EAElBP,EAAWrX,MAAQ6X,EACnBP,EAAaO,EAAU,CACzB,CAEF,SAASiB,IACPnW,EAAK,YAAW,CAElB,SAASoW,IACPpW,EAAK,UAAS,CA7LhBnC,EACE,IAAMrB,EAAM6C,KACXvB,KAEY,aAARA,GAAsBtB,EAAMa,OACpB,kBAARS,GAA2BwQ,GAAQ9R,EAAMa,QAAUb,EAAMa,OAASb,EAAMa,MAAM3E,OAAS,GAAK8D,EAAMa,MAAM,KAEzGuY,EAAQpZ,EAAMa,MAAO,UAGzB,CACEuB,MAAM,EACNC,WAAW,IAIfhB,EACE,IAAMrB,EAAMa,MACXS,IACKmY,GAAQnY,EAAK4W,EAAWrX,SAER,aAAfb,EAAM6C,MAAuBvB,GAAwB,kBAAftB,EAAM6C,MAA4BvB,GAAOwQ,GAAQxQ,IAAQA,EAAIpF,OAAS,GAAKoF,EAAI,KACxH8X,EAAQ9X,EAAK,UAGjB,CACEc,MAAM,EACNC,WAAW,IAIfoC,EAAU,KACR0F,MAgKF,MAAM0P,EAAehO,IACnB,GAAI4G,EAAO5R,MAAM3E,QAAU,EACzB,QAUJ,SAAuBoY,GACrB,IAAIxQ,EAAiB,EACrB,IAAA,IAASxD,EAAQ,EAAGA,EAAQmS,EAAO5R,MAAM3E,OAAQoE,IAE/C,GADAwD,GAAkB2O,EAAO5R,MAAMP,GAAOwD,OAClCwQ,EAAYxQ,EAEd,YADAyQ,EAAY1T,MAAQP,EAGxB,CAfAyU,CADkBrY,KAAK8F,IAAI,EAAGqJ,EAAMzF,OAAOkO,oBAmB7C7M,EAA+B,CAC7B0C,02DC1WW2P,GAAoB/b,OAC5BC,GAD4B,CAK/BC,WAAY+T,GAAiB,CAACvP,OAAQrG,MAAO,OAI7CyG,KAAM7D,EAA6B,QAInCmR,QAAS/R,EAAe,IAAI3D,MAAA,IAASA,MAAOQ,eAAA,IAAmBR,MAAOU,WAAa,OAAOV,MAAOY,WAAWuB,WAI5GwT,QAAShS,EAAe,IAAI3D,MAAA,IAASA,MAAOQ,eAAA,IAAmBR,MAAOU,WAAa,GAAA,IAAOV,MAAOY,UAAW,GAAI,GAAI,IAAIuB,WAIxHsS,eAAgB9Q,EAAe,GAI/B6T,UAAWC,SAIXC,SAAU1P,OAIV2P,YAAatX,OAIbuX,aAAc7T,GAAgB,GAE9B4V,eAAgB5V,GAAgB,GAIhCoR,YAAa,CACX/M,KAAM,CAAC/H,OAAQsB,OACf2d,QAAS,YAKX1F,YAAajW,EAAe,KAI5ByZ,WAAY3F,SAIZ4F,WAAYtZ,GAAgB,GAI5BuZ,gBAAiBvZ,GAAgB,mBCxBpB,CACbc,KAAM,mBACNM,QAAS,CACPC,gBAAgB,EAChBC,aAAa,EACbC,eAAgB,4GAYpB,MAAMC,EAAQC,EACRuD,EAAOC,EACPuW,EAAoBjZ,EAAgB,IAEpCkZ,EAAelZ,IACfmZ,EAAgBnZ,IAyBtB,SAASoX,GAAatX,MAAEA,IACtB2C,EAAK,oBAAqB3C,GAC1B2C,EAAK,SAAU,CACb3C,SACD,CAEH,SAAS8Y,IACPnW,EAAK,YAAW,CAElB,SAASoW,IACPpW,EAAK,UAAS,QAjChBnC,EACE,IAAMrB,EAAM4P,YACXrO,IACCyY,EAAkBnZ,MV8Kf,SAAwB+O,GAC7B,GAAIkC,GAAQlC,GAOV,MAAO,EANYA,EAAY,IAAM,YAAYuK,MAAM,KAAKvF,IAAKtI,GACxD8N,SAAS9N,KAEDsD,EAAY,IAAM,YAAYuK,MAAM,KAAKvF,IAAKtI,GACtD8N,SAAS9N,KAGb,CACL,MAAM+N,GAAQzK,GAAe,YAAYuK,MAAM,KAAKvF,IAAKtI,GAChD8N,SAAS9N,IAGlB,MAAO,CAAC+N,EAAMA,EAAI,CAEtB,CU9L8BC,CAAe/Y,IAE3C,CACEa,MAAM,EACNC,WAAW,IA6BfoF,EAAiC,CAC/B0C,eAvBF,WACE,MAAMoQ,EAKCva,EAAM6C,KAAKwK,QAAQ,UAAW,EAAK4M,EAAapZ,MAAQqZ,EAAcrZ,MAJ7E0Z,EAAMpQ,gBAAkBoQ,EAAMpQ,gBAAe,k2CCrClCqQ,GAAmBzc,OAC3BC,GAD2B,CAO9Byc,kBAAmBzb,EAAe,IAMlCf,WAAYyc,EAAAA,EAAA,CAAA,EAAKlc,GAAgB,IAAWwT,GAAiBrP,UAM7DgY,QAASC,KAMTC,OAAQD,KAKRrb,MAAOzE,OAKPggB,WAAYhgB,OAMZigB,mBAAoBvc,GAAgB,GAMpCwc,kBAAmBxc,GAAgB,GAMnCW,SAAUf,EAAe,KAMzBmH,OAAQnH,EAAe,IAMvB6c,WAAYzc,GAAgB,GAM5B0c,oBAAqB1c,GAAgB,mBCvDxB,CACbc,KAAM,kBACNM,QAAS,CACPC,gBAAgB,EAChBC,aAAa,EACbC,eAAgB,qIAapB,MAAMC,EAAQC,EACRuD,EAAOC,EAEP0X,EAAepa,EAAmC,IAElDqa,EAAYra,GAAa,GAY/B,SAASsa,IACP,OAAOrb,EAAM6a,OAAO3e,SAAW4V,GAAQ9R,EAAM6a,OAAO,GAAE,CAMxD,SAASjW,EAAO0W,EAAkBzY,EAA2B0Y,GAC3D,GAAa,WAAT1Y,EAAmB,CACrB,GAAI7C,EAAM2a,QAAQW,GAAU9b,UAAYQ,EAAM2a,QAAQW,GAAUE,QAC9D,OAEFhY,EAAK,SAAU,CACb8I,KAAMtM,EAAM2a,QAAQW,GACpBhb,MAAOgb,GACR,MACQD,IACT7X,EAAK,SAAU,CACb8I,KAAMtM,EAAM6a,OAAOpY,OAAO8Y,IAC1Bjb,MAAOib,IAGT/X,EAAK,SAAU,CACb8I,KAAOtM,EAAM6a,OAAqBS,GAAU7Y,OAAO8Y,IACnDD,WACAC,aAGAvb,EAAM+a,oBACRU,GACF,CAEF,SAASC,IACPlY,EAAK,cAAa,CAEpB,SAASmY,IACPnY,EAAK,UACLiY,GAAM,CAER,SAASA,IACPjY,EAAK,qBAAqB,GAC1BA,EAAK,QAAO,CAEd,SAASoY,IACPpY,EAAK,OAAM,CAEb,SAASqY,IACPrY,EAAK,SAAQ,CAEf,SAASsY,IACPtY,EAAK,SAAQ,QA5DfnC,EAAM,IAAMrB,EAAM6a,OAalB,WACEM,EAAata,MAAQwa,IAAiB,CAACrb,EAAM6a,QAAsB7a,EAAM6a,MAAA,EAdlC,CAAEzY,MAAM,EAAMC,WAAW,IAElEhB,EACE,IAAMrB,EAAM/B,WACXsD,IACC6Z,EAAUva,MAAQU,GAEpB,CAAEa,MAAM,EAAMC,WAAW,6oFChFd0Z,GAAgBhe,OACxBC,GADwB,CAK3BC,WAAY+T,GAAiB,CAACvP,OAAQrG,MAAO,OAI7CyG,KAAM7D,EAA6B,QAInCmR,QAAS/R,EAAe,IAAI3D,MAAA,IAASA,MAAOQ,eAAA,IAAmBR,MAAOU,WAAa,OAAOV,MAAOY,WAAWuB,WAI5GwT,QAAShS,EAAe,IAAI3D,MAAA,IAASA,MAAOQ,eAAA,IAAmBR,MAAOU,WAAa,GAAA,IAAOV,MAAOY,UAAW,GAAI,GAAI,IAAIuB,WAIxHsS,eAAgB9Q,EAAe,GAI/B6T,UAAWC,SAIXC,SAAU1P,OAIV2P,YAAatX,OAIbuX,aAAc7T,GAAgB,GAI9BoR,YAAa,CACX/M,KAAM,CAAC/H,OAAQsB,QAKjByb,WAAY3F,SAIZ4F,WAAYtZ,GAAgB,GAI5B4S,MAAOtW,OAIPkhB,WAAYlhB,OAIZ0E,SAAUhB,GAAgB,GAI1Byd,SAAUzd,GAAgB,GAI1B0d,YAAaphB,OAIbyE,MAAOzE,OAIPqhB,WAAY3d,GAAgB,GAI5B0D,MAAO1D,GAAgB,GAIvB4d,SAAU5d,GAAgB,GAI1B6d,KAAMvhB,OAINwhB,OAAQ9d,GAAgB,GAIxBwc,kBAAmBxc,GAAgB,GAInC+G,OAAQnH,EAAe,IAIvBme,YAAa/d,GAAgB,GAI7Bge,YAAa1hB,OAIb2hB,cAAevK,SAIfwK,mBAAoBxK,SAIpByK,SAAUne,GAAgB,GAI1Boe,eAAgBpe,GAAgB,GAIhCqe,UAAWjC,KAIXkC,iBAAkB5K,SAIlBgJ,oBAAqB1c,GAAgB,GAIrCue,cAAe7K,SAIf8K,KAAMliB,OAINmiB,MAAOrC,KACPsC,gBAAiBle,EAAe,IAIhCme,iBAAkBne,EAAe,IAIjCoe,iBAAkBpe,EAAe,IAIjC+Y,gBAAiBvZ,GAAgB,GAKjC6e,SAAU7e,GAAgB,mBC7Eb,CACbc,KAAM,cACNM,QAAS,CACPC,gBAAgB,EAChBC,aAAa,EACbC,eAAgB,gHAoBpB,MAAQgJ,UAAAA,GAAcC,GAAa,YAE7BsU,EAAuB,CAACzc,EAA0BgC,KACtD,OAAQA,GACN,IAAK,OACH,OAAOlF,GAAMkD,GAAiBvD,OAAO,cACvC,IAAK,QACH,OAAQuD,EACL+T,IAAKtI,GACG3O,GAAM2O,GAAMhP,OAAO,eAE3BjB,KAAK,MACV,IAAK,YACH,MAAO,GAAIwE,EAAmB,GAAKlD,GAAOkD,EAAmB,IAAIvD,OAAO,cAAgByL,EAAU,gBAAgBA,EAAU,SACzHlI,EAAmB,GAAKlD,GAAOkD,EAAmB,IAAIvD,OAAO,cAAgByL,EAAU,aAE5F,IAAK,WACH,OAAOpL,GAAMkD,GAAiBvD,OAAO,uBACvC,IAAK,gBACH,MAAO,GAAIuD,EAAmB,GAAKlD,GAAOkD,EAAmB,IAAIvD,OAAOyL,EAAU,eAAiBA,EAAU,gBAAgBA,EAC3H,UACKlI,EAAmB,GAAKlD,GAAOkD,EAAmB,IAAIvD,OAAOyL,EAAU,eAAiBA,EAAU,aAC3G,IAAK,OAAQ,CACX,MAAMvO,EAAO,IAAIC,KAAKoG,GAChBvE,EAAO9B,EAAKS,cACZqU,EAAOoC,GAAc7Q,GACT,IAAIpG,KAAKD,GACjBkV,QAAQlV,EAAKa,UAAYb,EAAKe,SAAW,GACnD,MAAMiU,EAAU,IAAI/U,KAAKD,GACzBgV,EAAQE,QAAQlV,EAAKa,WAAa,EAAIb,EAAKe,WAC3C,MAAMgiB,EAAe/N,EAAQvU,cAAgBqB,EAAOkT,EAAQvU,cAAgBqB,EAC5E,OAAOyM,EAAU,aAAcwU,EAAclM,GAAQ/B,GAAK,CAE5D,IAAK,YAAa,CAChB,MAAMpB,EAAQ,IAAIzT,KAAMoG,EAAmB,IACrCsN,EAAQ,IAAI1T,KAAMoG,EAAmB,IACrCyN,EAAQJ,EAAMjT,cACdsT,EAAQJ,EAAMlT,cACduiB,EAAQ9L,GAAe7Q,EAAmB,IAC1C4c,EAAQ/L,GAAe7Q,EAAmB,IAC7B,IAAIpG,KAAKyT,GACjBwB,QAAQxB,EAAM7S,UAAY6S,EAAM3S,SAAW,GACtD,MAAMmiB,EAAW,IAAIjjB,KAAKyT,GAC1BwP,EAAShO,QAAQxB,EAAM7S,WAAa,EAAI6S,EAAM3S,WAC3B,IAAId,KAAK0T,GACjBuB,QAAQvB,EAAM9S,UAAY8S,EAAM5S,SAAW,GACtD,MAAMoiB,EAAW,IAAIljB,KAAK0T,GAC1BwP,EAASjO,QAAQvB,EAAM9S,WAAa,EAAI8S,EAAM5S,WAC9C,MAAMqiB,EAAgBF,EAASziB,cAAgBqT,EAAQoP,EAASziB,cAAgBqT,EAC1EuP,EAAgBF,EAAS1iB,cAAgBsT,EAAQoP,EAAS1iB,cAAgBsT,EAChF,MAAO,GAAI1N,EAAmB,GAAKkI,EAAU,aAAc6U,EAAevM,GAAQmM,IAAUzU,EAAU,kBACnGlI,EAAmB,GAAKkI,EAAU,aAAc8U,EAAexM,GAAQoM,IAAU1U,EAAU,YAC9F,CAEF,IAAK,QACH,OAAOpL,GAAMkD,GAAiBvD,OAAO,aACvC,IAAK,aACH,MAAO,GAAIuD,EAAmB,GAAKlD,GAAOkD,EAAmB,IAAIvD,OAAO,aAAeyL,EAAU,iBAAiBA,EAAU,SACzHlI,EAAmB,GAAKlD,GAAOkD,EAAmB,IAAIvD,OAAO,aAAeyL,EAAU,gBAKzF+U,EAAc,CAACjd,EAAekd,EAA4Blb,KAC9D,OAAQA,GACN,IAAK,YACH,OAAKhC,EAGElD,GAAMkD,GAAOvD,OAAOyL,EAAU,eAFNA,EAAR,QAAdgV,EAAgC,UAAuB,aAGlE,IAAK,gBACH,OAAKld,EAGElD,GAAMkD,GAAOvD,OAAOyL,EAAU,eAFNA,EAAR,QAAdgV,EAAgC,UAAuB,aAGlE,IAAK,YAAa,CAChB,IAAKld,EACH,OAA6BkI,EAAR,QAAdgV,EAAgC,UAAuB,aAEhE,MACMzhB,EADO,IAAI7B,KAAKoG,GACJ5F,cACZqU,EAAOoC,GAAc7Q,GAC3B,OAAOkI,EAAU,aAAczM,EAAM+U,GAAQ/B,GAAK,CAEpD,IAAK,aACH,OAAKzO,EAGElD,GAAMkD,GAAOvD,OAAOyL,EAAU,gBAFNA,EAAR,QAAdgV,EAAgC,WAAwB,gBAMjE/d,EAAQC,EACRuD,EAAOC,EAEPua,EAAajd,GAAa,GAC1Bkd,EAAgBld,EAA8B,MAC9Cmd,EAAoBnd,EAA8B,MAClDsT,EAActT,EAAY,KAC1Bod,EAAqBpd,GAAa,GAClCqd,EAAard,EAAY,GACzBsd,EAAUtd,EAAY,GACtBud,EAAcvd,EAAkB,QAChCwd,EAAkBxd,IAClBoI,EAASpI,GAAa,GACtByd,EAAOC,KACPC,EAAe3d,IACf4d,EAAe5d,IAEf6d,EAAane,EAAS,KAC1B,MAAO6X,EAAOC,GAAOtE,GAAUnC,GAAQmM,EAAcpd,OAASod,EAAcpd,MAAQ,IACpF,MAAO,CAACyX,EAAOC,GAAK3D,IAAI,CAACtI,EAAMhM,KACrBN,EAAM0c,oBAAsBoB,GAAaxR,EAAgB,IAAVhM,EAAc,QAAU,MAAOge,EAAYzd,UAIhGge,EAAYpe,EAAS,KACnBqR,GAAQ9R,EAAM/B,aAAe+B,EAAM/B,YAAgB6T,GAAQ9R,EAAM/B,aAAe+B,EAAM/B,WAAW/B,QAC7F8D,EAAMyc,eAAiBa,GAAsBtd,EAAM/B,WAAYsgB,EAAgB1d,OAASyd,EAAYzd,OAErG,IAIXQ,EACE,IAAMrB,EAAM/B,WACZ,CAACqD,EAAKwd,KACArF,GAAQnY,EAAKwd,KACjBb,EAAcpd,MAAQoT,GAAU3S,GAChC6c,EAAmBtd,MAAQke,EAAoBzd,KAEjD,CACEe,WAAW,IAIfhB,EACE,IAAMrB,EAAM6C,KACZ,CAACtB,EAAUyd,KACT,GAAIhf,EAAM4c,eAAgB,CACxB,MAAMvc,EAAO,CAAC,OAAQ,OAAQ,SACxB4e,EAAY,CAAC,YAAa,YAAa,cAEvC3e,EAAQiB,EAAS8L,QAAQ,UAAW,EAAK4R,EAAU5R,QAAQ9L,IAAa,EAAIlB,EAAKgN,QAAQ9L,GAC/F6c,EAAWvd,MAAQP,CAAA,CAErB+T,EAAYxT,MAAQb,EAAMuc,YAAc,IAAM,IAC9C+B,EAAYzd,MAAQoT,GAAU1S,IAEhC,CACEa,MAAM,EACNC,WAAW,IAIfhB,EACE,IAAMrB,EAAMuc,YACXjb,IACC+S,EAAYxT,MAAQS,EAAM,IAAM,KAElC,CACEc,MAAM,EACNC,WAAW,IAIf,MAAQjC,OAAQ8e,GAAS3e,GAAU4e,IAG7BC,EAAe3e,EAAS,IACxBye,GAAQlf,EAAMgd,MAAQkC,EAAKG,eAAiBH,EAAKG,cAAcrf,EAAMgd,MAChEkC,EAAKG,cAAcrf,EAAMgd,MAEzB,IAKLsC,EAAa7e,EAAS,KAC1B,IAAI8e,GAAe,EACnB,GAAIL,GAAQA,EAAKlf,MAAMid,MAAO,CAC5B,MAAMA,EAAQiC,EAAKlf,MAAMid,MACzB,IAAA,MAAWuC,KAAOvC,EACZtd,OAAO8f,UAAUC,eAAeC,KAAK1C,EAAOuC,IAAQA,IAAQxf,EAAMgd,MAAQ5gB,MAAM0V,QAAQmL,EAAMuC,MAChGD,EAAetC,EAAMuC,GAAKvJ,KAAM2J,GAAuBA,EAAKxD,UAEhE,CAEF,OAAOpc,EAAMoc,UAAYpc,EAAMid,MAAMhH,KAAM2J,GAASA,EAAKxD,WAAamD,IAGlEM,EAAQpf,EAAS,IACboC,GdlRH,SAAiBA,GACtB,OAAOA,EAAKwK,QAAQ,UAAW,CACjC,CciRWyS,CAAQjd,IAQnB,SAAekd,IAAO,OAAA1Z,EAAAjM,KAAA,KAAA,YACpB,MAAMoF,SAAEA,EAAUyc,SAAAA,GAAajc,EAE3BR,GAAYyc,IAEhB9S,EAAOtI,OAAQ,EACfmd,EAAWnd,OAAQ,EACnBqd,EAAkBrd,MAAQoT,GAAUgK,EAAcpd,OAClDwd,EAAQxd,MAAQud,EAAWvd,MAC3B0d,EAAgB1d,MAAQyd,EAAYzd,YAE9ByF,IAdNoY,EAAa7d,OAAS6d,EAAa7d,OAAS6d,EAAa7d,MAAMkB,EAAEyG,QAAQ2B,iBAgBzEM,WAAW,KACLzK,EAAM4c,iBACR+B,EAAa9d,MAAMsJ,iBACnBwU,EAAa9d,MAAMqJ,iBAAgB,KAEpC,KACH1G,EAAK,QAAM,EAAA,CAGb,SAASiY,IACPuC,EAAWnd,OAAQ,EACnB4J,WAAW,KACTwT,EAAcpd,MAAQoT,GAAUiK,EAAkBrd,OAClDud,EAAWvd,MAAQwd,EAAQxd,MAC3Byd,EAAYzd,MAAQ0d,EAAgB1d,OAAS,OAC7Csd,EAAmBtd,MAAQke,EAAoBb,EAAkBrd,QAChE,KACH2C,EAAK,SAAQ,CAEf,SAASwc,GAAiB1f,MAAEA,IAC1B,MAEMuC,EAAO7C,EAAM6C,KAAKwK,QAAQ,UAAW,EADzB,CAAC,YAAa,YAAa,cACa/M,GAF7C,CAAC,OAAQ,OAAQ,SAE0CA,GACxE8d,EAAWvd,MAAQP,EACnBge,EAAYzd,MAAQgC,CAAA,CAEtB,SAASkc,EAAoBle,GAC3B,IAAIsd,GAAqB,EAUzB,SAPGne,EAAM6C,KAAKwK,QAAQ,UAAW,IAAQyE,GAAQjR,IAAWA,EAAM,IAAOA,EAAM,IAAOA,KACpE,UAAfb,EAAM6C,MAAsBiP,GAAQjR,IAA2B,IAAjBA,EAAM3E,QAAiB2E,IACrEA,IAEDsd,GAAqB,GAGhBA,CAAA,CAET,SAAShG,GAAatX,MAAEA,IACtBod,EAAcpd,MAAQoT,GAAUpT,GAChCsd,EAAmBtd,MAAQke,EAAoBle,GAE/C2C,EAAK,SAAU,CACb3C,UAGGb,EAAMuc,aAAgB4B,EAAmBtd,OAC5CkN,GACF,CAEF,SAASA,IACH/N,EAAM+c,cACR/c,EAAM+c,cAAc,CAClBlc,MAAOod,EAAcpd,MACrBof,QAAUC,IACRA,GAAUC,OAIdA,GACF,CAEF,SAASA,IACPnC,EAAWnd,OAAQ,EACnB0d,EAAgB1d,MAAQyd,EAAYzd,MACpC2C,EAAK,oBAAqBya,EAAcpd,OACxC2C,EAAK,UAAW,CACd3C,MAAOod,EAAcpd,MACrBgC,KAAMyb,EAAYzd,OACnB,QAmBH4G,EAA6B,CAC3BgU,QACAsE,yiFAlBF,SAA6Bzf,GACvBN,EAAM8c,kBAAsD,mBAA3B9c,EAAM8c,mBACzCmB,EAAcpd,MAAQoT,GACpBjU,EAAM8c,iBAAiB,CACrBxQ,KAAMtM,EAAM6c,UAAUvc,GACtBA,WAGJ6d,EAAmBtd,MAAQke,EAAoBd,EAAcpd,QAG1Db,EAAMuc,aACTxO,GACF,y/DCnHF,MAAMwE,EAAQC,IAMR4N,EAA0Brf,EAAI,MAG9Bsf,EAAUtf,EAAI,MAEduf,EAAW1a,EAAS,CACxB2a,WAAY,EACZC,QAAS,EACT3d,KAAM,UACN4d,UAAW,qBACXlhB,MAAO,mBACPmhB,YAAa,GACbC,MAAO,GACPC,OAAQ,GACRC,KAAM,GACNC,GAAI,GACJC,SAAU,GACVC,SAAU,KAINC,EAAe,CACnB,CAAE7P,MAAO,mBAAoBvQ,MAAO,oBACpC,CAAEuQ,MAAO,UAAWvQ,MAAO,WAC3B,CAAEuQ,MAAO,qBAAsBvQ,MAAO,sBACtC,CAAEuQ,MAAO,QAASvQ,MAAO,UAIrBqgB,EAAe,KACnBb,EAAQxf,MACLsgB,WACAha,KAAK,EAAGia,QAAOC,aACVD,GACFE,YAAY,CACV/N,IAAK,WAIV9K,MAAOvG,IACND,QAAQyG,IAAIxG,EAAO,mBAKzBqf,GAAc3hB,GAAYyG,EAAAjM,KAAA,KAAA,YAExB,MAAMonB,EAAsBC,GAAsB7hB,GAIlD,OAHA4hB,EAAoBE,OAAStH,SAASoH,EAAoBE,QAC1Dzf,QAAQyG,IAAI,sBAAuB8Y,GACnCpB,EAAwBvf,MAAQ2gB,EACxBA,EAAoBE,QAC1B,KAAK,EACHzf,QAAQyG,IACN,qEAEF,MACF,KAAK,EACHzG,QAAQyG,IACN,qEAEF,MACF,KAAK,EACHzG,QAAQyG,IACN,qEAEF,MACF,KAAK,EACHzG,QAAQyG,IACN,qEAEF,MACF,QACEzG,QAAQyG,IACN,2EAMoB,YADEiZ,MACVC,MAChBrP,EAAMsP,QAAQ,qDAIlB"}