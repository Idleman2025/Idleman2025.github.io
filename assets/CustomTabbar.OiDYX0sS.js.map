{"version":3,"file":"CustomTabbar.OiDYX0sS.js","sources":["../../../../src/store/useTabbarStore.js","../../../../src/components/CustomTabbar.vue"],"sourcesContent":["import { defineStore } from \"pinia\";\nimport { useCommonState } from \"@/store/useCommonState\"\n\nexport const useTabbarStore = defineStore(\n  \"tabbar\",\n  {\n    state: () => {\n      return {\n        tabbarIndex: 0\n      };\n    },\n    actions: {\n      handleChangeTabbar(item) {\n        const commonState = useCommonState()\n        commonState.ORDER_SHOW_DETAIL_FROM_HOME = false\n\n        console.log(\"2333\")\n\n        try {\n          if (item.centerItem) {\n            return uni.navigateTo({ url: item.path });\n          }\n\n          return uni.switchTab({\n            url: item.path\n          });\n        } finally {\n          this.tabbarIndex = item.id;\n        }\n      }\n    }\n  }\n);\n","<!--\ndescription: 自定义tabbar\n-->\n<template>\n  <view class=\"tabbar-container\">\n    <view\n      class=\"tabbar-item\"\n      v-for=\"(item, index) in tabbarList\"\n      :key=\"index\"\n      :class=\"[\n        item.centerItem ? 'center-item' : '',\n        current == item.id ? 'active' : '',\n      ]\"\n      :style=\"{ width: `calc(100%/${tabbarList.length})` }\"\n      @click=\"useTabbar.handleChangeTabbar(item)\"\n    >\n      <view class=\"item-top\">\n        <image :src=\"current == item.id ? item.selectIcon : item.icon\" />\n      </view>\n      <view\n        class=\"item-bottom\"\n        :class=\"[current == item.id ? 'item-active' : '']\"\n      >\n        <text>{{ item.text }}</text>\n      </view>\n    </view>\n  </view>\n  <view class=\"placeholder-container\"> </view>\n</template>\n<script setup>\nimport { useTabbarStore } from \"@/store/useTabbarStore\"\nimport { useCommonState } from \"@/store/useCommonState\"\n\ndefineProps({\n  fixed: Boolean,\n})\n\n// 按下面格式修改或新增\nconst tabbarList = [\n  {\n    id: 0,\n    path: \"/pages/home/index\",\n    icon: \"/static/tabbar/home.png\",\n    selectIcon: \"/static/tabbar/home.png\",\n    text: \"Home\",\n    centerItem: false,\n  },\n  {\n    id: 1,\n    path: \"/pages/explore/index\",\n    icon: \"/static/tabbar/explore.png\",\n    selectIcon: \"/static/tabbar/explore.png\",\n    text: \"Explore\",\n    centerItem: false,\n  },\n  {\n    id: 2,\n    path: \"/pages/request/index\",\n    icon: \"/static/tabbar/request.png\",\n    selectIcon: \"/static/tabbar/request.png\",\n    text: \"Request\",\n    centerItem: false,\n  },\n  {\n    id: 3,\n    path: \"/pages/tracking/index\",\n    icon: \"/static/tabbar/tracking.png\",\n    selectIcon: \"/static/tabbar/tracking.png\",\n    text: \"Tracking\",\n    centerItem: false,\n  },\n  {\n    id: 4,\n    path: \"/pages/profile/index\",\n    icon: \"/static/tabbar/profile.png\",\n    selectIcon: \"/static/tabbar/profile.png\",\n    text: \"Profile\",\n  },\n]\n\nconst useTabbar = useTabbarStore()\n\nonMounted(() => {\n  uni.hideTabBar()\n\n  const pages = getCurrentPages()\n  const { route } = pages[pages.length - 1]\n\n  const tabbarItem = tabbarList.find((i) => i.path == route)\n\n  if (tabbarItem) {\n    useTabbar.handleChangeTabbar(tabbarItem)\n  }\n})\n\nconst current = computed(() => useTabbar.tabbarIndex)\n</script>\n<style scoped lang=\"scss\">\nview {\n  padding: 0;\n  margin: 0;\n  box-sizing: border-box;\n}\n\n.tabbar-container {\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 120rpx;\n  box-shadow: 0 4px 10px 0 rgba(0, 0, 0, 0.3);\n  display: flex;\n  align-items: center;\n  padding: 5rpx 0;\n  color: #ffffff;\n  z-index: 9;\n  background-color: #235597;\n}\n\n.placeholder-container {\n  width: 100%;\n  height: 120rpx;\n}\n\n.tabbar-container .tabbar-item {\n  width: 20%;\n  height: 120rpx;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  text-align: center;\n\n  border-top: 10rpx solid #235597;\n}\n\n.tabbar-container .item-active {\n  color: #ffffff;\n}\n\n.tabbar-container .center-item {\n  display: block;\n  position: relative;\n}\n\n.tabbar-container .tabbar-item.active {\n  border-top: 10rpx solid #069db2;\n}\n\n.tabbar-container .tabbar-item .item-top {\n  width: 70rpx;\n  height: 70rpx;\n  padding: 10rpx;\n}\n\n.tabbar-container .center-item .item-top {\n  flex-shrink: 0;\n  width: 100rpx;\n  height: 100rpx;\n  position: absolute;\n  top: -50rpx;\n  left: calc(50% - 50rpx);\n  border-radius: 50%;\n  background-color: #ffffff;\n}\n\n.tabbar-container .tabbar-item .item-top image {\n  width: 100%;\n  height: 100%;\n}\n\n.tabbar-container .tabbar-item .item-bottom {\n  font-size: 28rpx;\n  width: 100%;\n}\n\n.tabbar-container .center-item .item-bottom {\n  position: absolute;\n  bottom: 5rpx;\n}\n</style>\n"],"names":["useTabbarStore","defineStore","state","tabbarIndex","actions","handleChangeTabbar","item","useCommonState","ORDER_SHOW_DETAIL_FROM_HOME","console","log","centerItem","uni.navigateTo","url","path","uni.switchTab","this","id","tabbarList","icon","selectIcon","text","useTabbar","onMounted","uni.hideTabBar","pages","getCurrentPages","route","length","tabbarItem","find","i","current","computed"],"mappings":"uMAGO,MAAMA,EAAiBC,EAC5B,SACA,CACEC,MAAO,KACE,CACLC,YAAa,IAGjBC,QAAS,CACP,kBAAAC,CAAmBC,GACGC,IACRC,6BAA8B,EAE1CC,QAAQC,IAAI,QAEZ,IACE,OAAIJ,EAAKK,WACAC,EAAe,CAAEC,IAAKP,EAAKQ,OAG7BC,EAAc,CACnBF,IAAKP,EAAKQ,MAEtB,CAAA,QACUE,KAAKb,YAAcG,EAAKW,EAClC,CACA,+DCSA,MAAMC,EAAa,CACjB,CACED,GAAI,EACJH,KAAM,oBACNK,KAAM,0BACNC,WAAY,0BACZC,KAAM,OACNV,YAAY,GAEd,CACEM,GAAI,EACJH,KAAM,uBACNK,KAAM,6BACNC,WAAY,6BACZC,KAAM,UACNV,YAAY,GAEd,CACEM,GAAI,EACJH,KAAM,uBACNK,KAAM,6BACNC,WAAY,6BACZC,KAAM,UACNV,YAAY,GAEd,CACEM,GAAI,EACJH,KAAM,wBACNK,KAAM,8BACNC,WAAY,8BACZC,KAAM,WACNV,YAAY,GAEd,CACEM,GAAI,EACJH,KAAM,uBACNK,KAAM,6BACNC,WAAY,6BACZC,KAAM,YAIJC,EAAYtB,IAElBuB,EAAU,KACRC,IAEA,MAAMC,EAAQC,KACRC,MAAEA,GAAUF,EAAMA,EAAMG,OAAS,GAEjCC,EAAaX,EAAWY,KAAMC,GAAMA,EAAEjB,MAAQa,GAEhDE,GACFP,EAAUjB,mBAAmBwB,KAIjC,MAAMG,EAAUC,EAAS,IAAMX,EAAUnB"}